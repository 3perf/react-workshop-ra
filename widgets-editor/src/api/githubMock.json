{"responseMeta":{"status":200,"success":true},"data":{"statusCode":"200 OK","headers":{"Server":["GitHub.com"],"Date":["Sun, 05 Sep 2021 19:17:25 GMT"],"Content-Type":["application/json; charset=utf-8"],"Transfer-Encoding":["chunked"],"Cache-Control":["private, max-age=60, s-maxage=60"],"Vary":["Accept, Authorization, Cookie, X-GitHub-OTP","Accept-Encoding, Accept, X-Requested-With"],"ETag":["W/\"963fe6217b1f95e468103070d8914138fca65c076aa82f31e9ce1004eaef9a18\""],"X-OAuth-Scopes":["read:discussion, read:user, repo"],"X-Accepted-OAuth-Scopes":["repo"],"X-GitHub-Media-Type":["github.v3; format=json"],"Link":["<https://api.github.com/repositories/70107786/issues?filter=all&per_page=100&page=2>; rel=\"next\", <https://api.github.com/repositories/70107786/issues?filter=all&per_page=100&page=13>; rel=\"last\""],"X-RateLimit-Limit":["5000"],"X-RateLimit-Remaining":["4996"],"X-RateLimit-Reset":["1630872854"],"X-RateLimit-Used":["4"],"X-RateLimit-Resource":["core"],"Access-Control-Expose-Headers":["ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Resource, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset"],"Access-Control-Allow-Origin":["*"],"Strict-Transport-Security":["max-age=31536000; includeSubdomains; preload"],"X-Frame-Options":["deny"],"X-Content-Type-Options":["nosniff"],"X-XSS-Protection":["0"],"Referrer-Policy":["origin-when-cross-origin, strict-origin-when-cross-origin"],"Content-Security-Policy":["default-src 'none'"],"X-GitHub-Request-Id":["E204:AF52:110F87:11DA45:61351771"]},"body":[{"url":"https://api.github.com/repos/vercel/next.js/issues/28810","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28810/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28810/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28810/events","html_url":"https://github.com/vercel/next.js/issues/28810","id":988567359,"node_id":"MDU6SXNzdWU5ODg1NjczNTk=","number":28810,"title":"Next Image optimizations conflict with Cloudflare Mirage optimizations","user":{"login":"austinhale","id":6180399,"node_id":"MDQ6VXNlcjYxODAzOTk=","avatar_url":"https://avatars.githubusercontent.com/u/6180399?v=4","gravatar_id":"","url":"https://api.github.com/users/austinhale","html_url":"https://github.com/austinhale","followers_url":"https://api.github.com/users/austinhale/followers","following_url":"https://api.github.com/users/austinhale/following{/other_user}","gists_url":"https://api.github.com/users/austinhale/gists{/gist_id}","starred_url":"https://api.github.com/users/austinhale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/austinhale/subscriptions","organizations_url":"https://api.github.com/users/austinhale/orgs","repos_url":"https://api.github.com/users/austinhale/repos","events_url":"https://api.github.com/users/austinhale/events{/privacy}","received_events_url":"https://api.github.com/users/austinhale/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-09-05T18:19:35Z","updated_at":"2021-09-05T18:19:35Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\n\n11.1.2\n\n### What version of Node.js are you using?\n\n16.3.0\n\n### What browser are you using?\n\nChrome\n\n### What operating system are you using?\n\nWindows\n\n### How are you deploying your application?\n\nVercel\n\n### Describe the Bug\n\nI started experiencing a problem when trying to change all our images to `next/image`, a strange blank `<img>` element would appear above the image. I searched and found one or two other issues where folks have found similar behavior [https://github.com/vercel/next.js/issues/23774](https://github.com/vercel/next.js/issues/23774).\r\n\r\nExample on our own site where this empty `img` is being created, pushing all content down incorrectly: \r\n\r\n![image](https://user-images.githubusercontent.com/6180399/132136520-cd6430d9-9445-442c-b4e5-84fa6c77ebb1.png)\r\n\r\nLuckily, I was able to track down what was occurring. Cloudflare has a product on their Pro tier called [Image Mirage](https://support.cloudflare.com/hc/en-us/articles/219178057-Configuring-Cloudflare-Mirage) that does two things: \r\n- Image virtualizing (very similar to the next placeholder blur) \r\n- Request streamlining (combines image requests) \r\n\r\nMirage only works with `.jpeg`, `.png`, `.gif`, and `.img` and since the images in question were `.svg` I'm wondering if somehow it was creating the placeholder for the `img` and then being unable to replace the blank image with the image once pulled from the origin. \r\n\r\nTo debug, it's quite simple, you toggle Mirage on/off via a Cloudflare Page Rule. \n\n### Expected Behavior\n\nPerhaps there is a way to make these two things play nicely together. I imagine as the Next project continues to explode in popularity, the number of folks using Next + Cloudflare will continue to grow. It's a nice to have. Obviously Mirage can just be disabled, but it's going to cause a fair amount of hair pulling since Cloudflare is such a ubiquitous product. \r\n\r\nMaybe the best thing to do here is add a small disclaimer in the [docs](https://github.com/vercel/next.js/blob/canary/docs/basic-features/image-optimization.md). Something like: \r\n```\r\nNote: Attempting to utilize more than one vendor image optimization process can cause conflicts & unexpected behavior. For example, 'next/image' does not work with Cloudflare Mirage.\r\n```\n\n### To Reproduce\n\nUse `next/image` while pointing to your domain via Cloudflare DNS proxy. Turn on Mirage. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28805","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28805/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28805/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28805/events","html_url":"https://github.com/vercel/next.js/pull/28805","id":988501343,"node_id":"MDExOlB1bGxSZXF1ZXN0NzI3Mzk2NDA1","number":28805,"title":"Add note to Gatsby migration guide about using `next/image` with custom loaders.","user":{"login":"leerob","id":9113740,"node_id":"MDQ6VXNlcjkxMTM3NDA=","avatar_url":"https://avatars.githubusercontent.com/u/9113740?v=4","gravatar_id":"","url":"https://api.github.com/users/leerob","html_url":"https://github.com/leerob","followers_url":"https://api.github.com/users/leerob/followers","following_url":"https://api.github.com/users/leerob/following{/other_user}","gists_url":"https://api.github.com/users/leerob/gists{/gist_id}","starred_url":"https://api.github.com/users/leerob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leerob/subscriptions","organizations_url":"https://api.github.com/users/leerob/orgs","repos_url":"https://api.github.com/users/leerob/repos","events_url":"https://api.github.com/users/leerob/events{/privacy}","received_events_url":"https://api.github.com/users/leerob/received_events","type":"User","site_admin":false},"labels":[{"id":1124940486,"node_id":"MDU6TGFiZWwxMTI0OTQwNDg2","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20documentation","name":"type: documentation","color":"a3f7d0","default":false,"description":""},{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"The Next.js team at Vercel"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-09-05T12:43:21Z","updated_at":"2021-09-05T12:43:23Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28805","html_url":"https://github.com/vercel/next.js/pull/28805","diff_url":"https://github.com/vercel/next.js/pull/28805.diff","patch_url":"https://github.com/vercel/next.js/pull/28805.patch"},"body":"Feedback from this article: https://blog.whereisthemouse.com/image-optimization-for-static-nextjs-sites","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28800","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28800/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28800/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28800/events","html_url":"https://github.com/vercel/next.js/pull/28800","id":988460923,"node_id":"MDExOlB1bGxSZXF1ZXN0NzI3MzY1NjY2","number":28800,"title":"Update text: .env.local inside the src/ dir","user":{"login":"abeaclark","id":14206953,"node_id":"MDQ6VXNlcjE0MjA2OTUz","avatar_url":"https://avatars.githubusercontent.com/u/14206953?v=4","gravatar_id":"","url":"https://api.github.com/users/abeaclark","html_url":"https://github.com/abeaclark","followers_url":"https://api.github.com/users/abeaclark/followers","following_url":"https://api.github.com/users/abeaclark/following{/other_user}","gists_url":"https://api.github.com/users/abeaclark/gists{/gist_id}","starred_url":"https://api.github.com/users/abeaclark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abeaclark/subscriptions","organizations_url":"https://api.github.com/users/abeaclark/orgs","repos_url":"https://api.github.com/users/abeaclark/repos","events_url":"https://api.github.com/users/abeaclark/events{/privacy}","received_events_url":"https://api.github.com/users/abeaclark/received_events","type":"User","site_admin":false},"labels":[{"id":1124940486,"node_id":"MDU6TGFiZWwxMTI0OTQwNDg2","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20documentation","name":"type: documentation","color":"a3f7d0","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-09-05T09:09:01Z","updated_at":"2021-09-05T12:31:07Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28800","html_url":"https://github.com/vercel/next.js/pull/28800","diff_url":"https://github.com/vercel/next.js/pull/28800.diff","patch_url":"https://github.com/vercel/next.js/pull/28800.patch"},"body":"It took me a long time to determine why my `.env.local` wasn't working. It seems that it is b/c I created this file at the project root. When I moved it into the `src/` directory, it functioned as advertised.\r\n\r\n## Documentation / Examples\r\n\r\n- [ ] Make sure the linting passes\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28797","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28797/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28797/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28797/events","html_url":"https://github.com/vercel/next.js/issues/28797","id":988433956,"node_id":"MDU6SXNzdWU5ODg0MzM5NTY=","number":28797,"title":"Future <Link> navigation is broken if prefetching that route takes longer than 3.8 sec","user":{"login":"jayphelps","id":762949,"node_id":"MDQ6VXNlcjc2Mjk0OQ==","avatar_url":"https://avatars.githubusercontent.com/u/762949?v=4","gravatar_id":"","url":"https://api.github.com/users/jayphelps","html_url":"https://github.com/jayphelps","followers_url":"https://api.github.com/users/jayphelps/followers","following_url":"https://api.github.com/users/jayphelps/following{/other_user}","gists_url":"https://api.github.com/users/jayphelps/gists{/gist_id}","starred_url":"https://api.github.com/users/jayphelps/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jayphelps/subscriptions","organizations_url":"https://api.github.com/users/jayphelps/orgs","repos_url":"https://api.github.com/users/jayphelps/repos","events_url":"https://api.github.com/users/jayphelps/events{/privacy}","received_events_url":"https://api.github.com/users/jayphelps/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-09-05T06:20:16Z","updated_at":"2021-09-05T06:46:41Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"### What version of Next.js are you using?\r\n\r\n11.0.1/Canary (and older to the original introduction of the timeout presumably)\r\n\r\n### What version of Node.js are you using?\r\n\r\nAny\r\n\r\n### What browser are you using?\r\n\r\nAny\r\n\r\n### What operating system are you using?\r\n\r\nAny\r\n\r\n### How are you deploying your application?\r\n\r\nAny\r\n\r\n### Describe the Bug\r\n\r\nThe internal utility [`withFuture()`](https://github.com/vercel/next.js/blob/e969d226999bb0fcb52ecc203b359f3715ff69bf/packages/next/client/route-loader.ts#L61-L65) sets internal state in the routes Map containing a Promise. When loading or prefetching, the internal [`loadRoute()`](https://github.com/vercel/next.js/blob/e969d226999bb0fcb52ecc203b359f3715ff69bf/packages/next/client/route-loader.ts#L308)  uses the [`resolvePromiseWithTimeout ()`](https://github.com/vercel/next.js/blob/e969d226999bb0fcb52ecc203b359f3715ff69bf/packages/next/client/route-loader.ts#L153), which will reject after the given 3.8 second timeout.\r\n\r\nIf a route is navigated to for the first time *without* being prefetched, and the 3.8 timeout is triggered due to slow server/connection, an exception is thrown and ultimately the page will do a full navigation. However, if an attempt to prefetch the route is made by Next and it takes longer than 3.8 seconds, that exception is [caught and swallowed](https://github.com/vercel/next.js/blob/4cdb585962b4f17be55848740d6e34106d730217/packages/next/client/link.tsx#L50-L55) in production mode. Because `withFuture()` does not listen for any rejections from the promise returned from [`generator()`](https://github.com/vercel/next.js/blob/e969d226999bb0fcb52ecc203b359f3715ff69bf/packages/next/client/route-loader.ts#L64) (or, unrelated, if generator() synchronously threw) the state stored in `routes` (passed into `withFuture` as the second argument ,`map`) is not cleaned up and the \"future\" promise stored in there will never be resolved nor rejected.\r\n\r\nWhen induced, the symptom from the user is that clicking a `<Link>` does nothing visually, and no error is logged.\r\n\r\n### Expected Behavior\r\n\r\nPreloading `<Link>`s that take longer than the timeout do not prevent future navigation to that route.\r\n\r\n### To Reproduce\r\n\r\n- `<Link href=\"/something\">` to another page (without setting `prefetch={false}`).\r\n- Some how induce latency over 3.8 seconds for only the JS `/_next/static/chunks/pages/file.js` for that particular page; it's much harder to reproduce if you induce general latency on everything, but consistently reproducible if only that one file.\r\n- Visit that page with that `<Link>`.\r\n- See in Network tab that JS resource is being prefetched, but taking longer than 3.8 seconds.\r\n- Wait until JS resource download completes.\r\n- Now click on the `<Link>`.\r\n- See that nothing happens.\r\n\r\nTo confirm root cause, add a breakpoint to the [prefetch error swallowing line](https://github.com/vercel/next.js/blob/4cdb585962b4f17be55848740d6e34106d730217/packages/next/client/link.tsx#L50-L55), reproduce (seeing debugger pause on that breakpoint), then inspect internal `routes` map to see the hung promise stuck in 'pending' state forever.\r\n\r\nIf things are unclear, I'm happy to jump on Zoom, etc. If needed, I can put together a reproduction, however I did a buttload of investigative work to track down the root cause, so I'm hoping that isn't necessary and the problem is clear. As always, apologies if I'm some how wrong and waste anyone's time \uD83D\uDE05  I tried to be thorough. I would PR, but it’s unclear if the right approach is a more extreme refactor or just simply tweaking withFuture to listen for errors and cleanup—that might have consequences I’m unaware of because it’s used in several places.","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28796","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28796/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28796/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28796/events","html_url":"https://github.com/vercel/next.js/issues/28796","id":988404107,"node_id":"MDU6SXNzdWU5ODg0MDQxMDc=","number":28796,"title":"Fails to load chunk when `Link` is used for a dynamic API route","user":{"login":"alyyousuf7","id":14050128,"node_id":"MDQ6VXNlcjE0MDUwMTI4","avatar_url":"https://avatars.githubusercontent.com/u/14050128?v=4","gravatar_id":"","url":"https://api.github.com/users/alyyousuf7","html_url":"https://github.com/alyyousuf7","followers_url":"https://api.github.com/users/alyyousuf7/followers","following_url":"https://api.github.com/users/alyyousuf7/following{/other_user}","gists_url":"https://api.github.com/users/alyyousuf7/gists{/gist_id}","starred_url":"https://api.github.com/users/alyyousuf7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alyyousuf7/subscriptions","organizations_url":"https://api.github.com/users/alyyousuf7/orgs","repos_url":"https://api.github.com/users/alyyousuf7/repos","events_url":"https://api.github.com/users/alyyousuf7/events{/privacy}","received_events_url":"https://api.github.com/users/alyyousuf7/received_events","type":"User","site_admin":false},"labels":[{"id":549032284,"node_id":"MDU6TGFiZWw1NDkwMzIyODQ=","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20example","name":"type: example","color":"ecffaf","default":false,"description":""},{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-09-05T01:59:35Z","updated_at":"2021-09-05T16:49:29Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What example does this report relate to?\r\n\r\nwith-next-link\r\n\r\n### What version of Next.js are you using?\r\n\r\n11.1.2\r\n\r\n### What version of Node.js are you using?\r\n\r\n14.17.2\r\n\r\n### What browser are you using?\r\n\r\nChrome\r\n\r\n### What operating system are you using?\r\n\r\nmacOS\r\n\r\n### How are you deploying your application?\r\n\r\nnext dev\r\n\r\n### Describe the Bug\r\nWhen I have a dynamic route, `[...id].js` and I use `Link` component on a page to `href` to it, I get the following error:\r\n```\r\nError: Failed to load script: /_next/static/chunks/pages/api/%5B...id%5D.js\r\n```\r\n\r\n```js\r\n<Link href=\"/api/1/2/3\">My link</Link>\r\n```\r\nwhere `/api/[...id].js` (or `/api/1/2/3`) is a dynamic API route.\r\n\r\nIt started happening after I upgraded from next.js v10 to v11\r\n\r\n### Expected Behavior\r\n\r\nIt should not throw any error when `Link` component is pass route to a dynamic API route\r\n\r\n### To Reproduce\r\n\r\n1. Create a Dynamic API route `/pages/api/[...id].js`:\r\n```js\r\nconst handler = async (req, res) => {\r\n  return res.json({ data: req.query });\r\n};\r\n\r\nexport default handler;\r\n```\r\n2. Create a page `/pages/index.js`:\r\n```js\r\nimport Link from 'next/link';\r\n\r\nconst Page = () => {\r\n  return <Link href=\"/api/1/2/3\">Go to dynamic API route</Link>\r\n}\r\n\r\nexport default Page;\r\n```\r\n3. Open the page `http://localhost:3000/` and open network tab (or console) in Chrome\r\n4. Click the link, you'll see the error","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28794","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28794/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28794/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28794/events","html_url":"https://github.com/vercel/next.js/issues/28794","id":988360967,"node_id":"MDU6SXNzdWU5ODgzNjA5Njc=","number":28794,"title":"When using esmExternals does not work with packages that don't use esModuleInterop: true","user":{"login":"lifeiscontent","id":180963,"node_id":"MDQ6VXNlcjE4MDk2Mw==","avatar_url":"https://avatars.githubusercontent.com/u/180963?v=4","gravatar_id":"","url":"https://api.github.com/users/lifeiscontent","html_url":"https://github.com/lifeiscontent","followers_url":"https://api.github.com/users/lifeiscontent/followers","following_url":"https://api.github.com/users/lifeiscontent/following{/other_user}","gists_url":"https://api.github.com/users/lifeiscontent/gists{/gist_id}","starred_url":"https://api.github.com/users/lifeiscontent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lifeiscontent/subscriptions","organizations_url":"https://api.github.com/users/lifeiscontent/orgs","repos_url":"https://api.github.com/users/lifeiscontent/repos","events_url":"https://api.github.com/users/lifeiscontent/events{/privacy}","received_events_url":"https://api.github.com/users/lifeiscontent/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-09-04T20:08:17Z","updated_at":"2021-09-04T20:08:17Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"### What version of Next.js are you using?\n\n11.1.2\n\n### What version of Node.js are you using?\n\n14.17.4\n\n### What browser are you using?\n\nChrome\n\n### What operating system are you using?\n\nLinux\n\n### How are you deploying your application?\n\nVercel\n\n### Describe the Bug\n\npackages that are written in typescript that use esModuleInterop: false don't have their dependencies properly resolved by Webpack in Next.js\n\n### Expected Behavior\n\nDependencies to be resolved regardless of esModuleInterop\n\n### To Reproduce\n\nreproduction here https://github.com/lifeiscontent/esm-next-repro","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28793","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28793/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28793/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28793/events","html_url":"https://github.com/vercel/next.js/pull/28793","id":988354903,"node_id":"MDExOlB1bGxSZXF1ZXN0NzI3Mjg2OTEz","number":28793,"title":"Simplify static + dynamic HTML generation","user":{"login":"devknoll","id":1477230,"node_id":"MDQ6VXNlcjE0NzcyMzA=","avatar_url":"https://avatars.githubusercontent.com/u/1477230?v=4","gravatar_id":"","url":"https://api.github.com/users/devknoll","html_url":"https://github.com/devknoll","followers_url":"https://api.github.com/users/devknoll/followers","following_url":"https://api.github.com/users/devknoll/following{/other_user}","gists_url":"https://api.github.com/users/devknoll/gists{/gist_id}","starred_url":"https://api.github.com/users/devknoll/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devknoll/subscriptions","organizations_url":"https://api.github.com/users/devknoll/orgs","repos_url":"https://api.github.com/users/devknoll/repos","events_url":"https://api.github.com/users/devknoll/events{/privacy}","received_events_url":"https://api.github.com/users/devknoll/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":3129154254,"node_id":"MDU6TGFiZWwzMTI5MTU0MjU0","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Chrome%20Aurora","name":"created-by: Chrome Aurora","color":"000000","default":false,"description":"The Google Chrome team: https://web.dev/aurora"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-09-04T19:29:47Z","updated_at":"2021-09-05T17:28:07Z","closed_at":null,"author_association":"COLLABORATOR","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28793","html_url":"https://github.com/vercel/next.js/pull/28793","diff_url":"https://github.com/vercel/next.js/pull/28793.diff","patch_url":"https://github.com/vercel/next.js/pull/28793.patch"},"body":"Changes `requireStaticHTML` to `supportsDynamicHTML`.\r\n\r\nThis simplifies things a bit by making static HTML (the behavior until React 18 SSR) the default. Instead, dynamic HTML is the exception, and **callers** (_not_ `renderToHTML`) should carefully decide whether dynamic HTML makes sense for the request they are trying to render.\r\n\r\nI also added some comments about this, and tweaked `next-server.ts` to disable dynamic HTML earlier when necessary and ensure that cache/coalescing keys aren't generated for such requests.","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28792","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28792/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28792/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28792/events","html_url":"https://github.com/vercel/next.js/pull/28792","id":988352367,"node_id":"MDExOlB1bGxSZXF1ZXN0NzI3Mjg0OTY1","number":28792,"title":"Add internationalized dynamic routing example","user":{"login":"jferrettiboke","id":11066224,"node_id":"MDQ6VXNlcjExMDY2MjI0","avatar_url":"https://avatars.githubusercontent.com/u/11066224?v=4","gravatar_id":"","url":"https://api.github.com/users/jferrettiboke","html_url":"https://github.com/jferrettiboke","followers_url":"https://api.github.com/users/jferrettiboke/followers","following_url":"https://api.github.com/users/jferrettiboke/following{/other_user}","gists_url":"https://api.github.com/users/jferrettiboke/gists{/gist_id}","starred_url":"https://api.github.com/users/jferrettiboke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jferrettiboke/subscriptions","organizations_url":"https://api.github.com/users/jferrettiboke/orgs","repos_url":"https://api.github.com/users/jferrettiboke/repos","events_url":"https://api.github.com/users/jferrettiboke/events{/privacy}","received_events_url":"https://api.github.com/users/jferrettiboke/received_events","type":"User","site_admin":false},"labels":[{"id":549032284,"node_id":"MDU6TGFiZWw1NDkwMzIyODQ=","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20example","name":"type: example","color":"ecffaf","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-09-04T19:13:50Z","updated_at":"2021-09-04T19:13:53Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28792","html_url":"https://github.com/vercel/next.js/pull/28792","diff_url":"https://github.com/vercel/next.js/pull/28792.diff","patch_url":"https://github.com/vercel/next.js/pull/28792.patch"},"body":"<!--\r\nThanks for opening a PR! Your contribution is much appreciated.\r\nIn order to make sure your PR is handled as smoothly as possible we request that you follow the checklist sections below.\r\nChoose the right checklist for the change that you're making:\r\n-->\r\n\r\n## Bug\r\n\r\n- [ ] Related issues linked using `fixes #number`\r\n- [ ] Integration tests added\r\n- [ ] Errors have helpful link attached, see `contributing.md`\r\n\r\n## Feature\r\n\r\n- [ ] Implements an existing feature request or RFC. Make sure the feature request has been accepted for implementation before opening a PR.\r\n- [ ] Related issues linked using `fixes #number`\r\n- [ ] Integration tests added\r\n- [ ] Documentation added\r\n- [ ] Telemetry added. In case of a feature if it's used or not.\r\n- [ ] Errors have helpful link attached, see `contributing.md`\r\n\r\n## Documentation / Examples\r\n\r\n- [x] Make sure the linting passes\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28786","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28786/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28786/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28786/events","html_url":"https://github.com/vercel/next.js/issues/28786","id":988279019,"node_id":"MDU6SXNzdWU5ODgyNzkwMTk=","number":28786,"title":"Next is not recognizing _document.tsx file","user":{"login":"Anam0927","id":64286381,"node_id":"MDQ6VXNlcjY0Mjg2Mzgx","avatar_url":"https://avatars.githubusercontent.com/u/64286381?v=4","gravatar_id":"","url":"https://api.github.com/users/Anam0927","html_url":"https://github.com/Anam0927","followers_url":"https://api.github.com/users/Anam0927/followers","following_url":"https://api.github.com/users/Anam0927/following{/other_user}","gists_url":"https://api.github.com/users/Anam0927/gists{/gist_id}","starred_url":"https://api.github.com/users/Anam0927/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Anam0927/subscriptions","organizations_url":"https://api.github.com/users/Anam0927/orgs","repos_url":"https://api.github.com/users/Anam0927/repos","events_url":"https://api.github.com/users/Anam0927/events{/privacy}","received_events_url":"https://api.github.com/users/Anam0927/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-09-04T12:02:35Z","updated_at":"2021-09-04T14:29:50Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\n\n11.1.2\n\n### What version of Node.js are you using?\n\n14.17.1\n\n### What browser are you using?\n\nChrome\n\n### What operating system are you using?\n\nWindows\n\n### How are you deploying your application?\n\nnext start\n\n### Describe the Bug\n\nHere's my `_document.tsx` file\r\n\r\n```TS\r\nimport Document, { Html, Head, Main, NextScript } from 'next/document';\r\nimport { ServerStyleSheets, StylesProvider } from '@material-ui/core/styles';\r\nimport React from 'react';\r\n\r\nexport default class MyDocument extends Document {\r\n  render(): JSX.Element {\r\n    return (\r\n      <Html lang=\"en\">\r\n        <Head>\r\n          <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" />\r\n          <link\r\n            href=\"https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&family=Roboto:wght@500&display=swap\"\r\n            rel=\"stylesheet\"\r\n          />\r\n          <script\r\n            dangerouslySetInnerHTML={{\r\n              __html: `(function (w, d, s, l, i) {\r\n              w[l] = w[l] || [];\r\n              w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });\r\n              const f = d.getElementsByTagName(s)[0],\r\n                j = d.createElement(s),\r\n                dl = l != 'dataLayer' ? '&l=' + l : '';\r\n              j.async = true;\r\n              j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;\r\n              f.parentNode.insertBefore(j, f);\r\n            })(window, document, 'script', 'dataLayer', 'xxxxx')`,\r\n            }}\r\n          ></script>\r\n        </Head>\r\n        <body>\r\n          <noscript\r\n            dangerouslySetInnerHTML={{\r\n              __html: `<iframe src=\"https://www.googletagmanager.com/ns.html?id=xxxxx\"\r\nheight=\"0\" width=\"0\" style=\"display:none;visibility:hidden\"></iframe>`,\r\n            }}\r\n          ></noscript>\r\n          <StylesProvider injectFirst>\r\n            <Main />\r\n            <NextScript />\r\n          </StylesProvider>\r\n        </body>\r\n      </Html>\r\n    );\r\n  }\r\n}\r\n\r\n// `getInitialProps` belongs to `_document` (instead of `_app`),\r\n// it's compatible with server-side generation (SSG).\r\nMyDocument.getInitialProps = async (ctx) => {\r\n  // Resolution order\r\n  //\r\n  // On the server:\r\n  // 1. app.getInitialProps\r\n  // 2. page.getInitialProps\r\n  // 3. document.getInitialProps\r\n  // 4. app.render\r\n  // 5. page.render\r\n  // 6. document.render\r\n  //\r\n  // On the server with error:\r\n  // 1. document.getInitialProps\r\n  // 2. app.render\r\n  // 3. page.render\r\n  // 4. document.render\r\n  //\r\n  // On the client\r\n  // 1. app.getInitialProps\r\n  // 2. page.getInitialProps\r\n  // 3. app.render\r\n  // 4. page.render\r\n\r\n  // Render app and page and get the context of the page with collected side effects.\r\n  const sheets = new ServerStyleSheets();\r\n  const originalRenderPage = ctx.renderPage;\r\n\r\n  ctx.renderPage = () =>\r\n    originalRenderPage({\r\n      enhanceApp: (App) => (props) => sheets.collect(<App {...props} />),\r\n    });\r\n\r\n  const initialProps = await Document.getInitialProps(ctx);\r\n\r\n  return {\r\n    ...initialProps,\r\n    // Styles fragment is rendered after the app and page rendering finish.\r\n    styles: [sheets.getStyleElement(), ...React.Children.toArray(initialProps.styles)],\r\n  };\r\n};\r\n\r\n```\r\n\r\nEverything was working fine till I upgraded Next from 11.1.0 to 11.1.2\r\nNow, build error comes stating the following:\r\n\r\n```\r\n./pages/_document.tsx\r\n1:1  Error: next/document should not be imported outside of pages/_document.js. See https://nextjs.org/docs/messages/no-document-import-in-page.  @next/next/no-document-import-in-page\r\n15:11  Warning: Use the `next/script` component for loading third party scripts. See: https://nextjs.org/docs/messages/next-script-for-ga.  @next/next/next-script-for-ga\r\n78:28  Error: Component definition is missing display name  react/display-name\r\n```\r\n\r\nWhat's the problem here? It is in the `pages` folder and everything was working fine. Now, even if I go back to 11.1.0, the error still comes!!\n\n### Expected Behavior\n\nThere should be no error as the file is correctly placed with content also correctly written\n\n### To Reproduce\n\nCreate a custom `_document.tsx` file in a typescript next project and try to build the project.","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28783","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28783/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28783/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28783/events","html_url":"https://github.com/vercel/next.js/issues/28783","id":988227866,"node_id":"MDU6SXNzdWU5ODgyMjc4NjY=","number":28783,"title":"Unhandled 'error' event: write EPIPE when developing or debugging with using yarn zero installs (never in production builds)","user":{"login":"meglio","id":282177,"node_id":"MDQ6VXNlcjI4MjE3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/282177?v=4","gravatar_id":"","url":"https://api.github.com/users/meglio","html_url":"https://github.com/meglio","followers_url":"https://api.github.com/users/meglio/followers","following_url":"https://api.github.com/users/meglio/following{/other_user}","gists_url":"https://api.github.com/users/meglio/gists{/gist_id}","starred_url":"https://api.github.com/users/meglio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/meglio/subscriptions","organizations_url":"https://api.github.com/users/meglio/orgs","repos_url":"https://api.github.com/users/meglio/repos","events_url":"https://api.github.com/users/meglio/events{/privacy}","received_events_url":"https://api.github.com/users/meglio/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-09-04T06:51:13Z","updated_at":"2021-09-04T06:51:40Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\n\n11.1.0\n\n### What version of Node.js are you using?\n\n16.6.1\n\n### What browser are you using?\n\nLatest Firefox on MacOS\n\n### What operating system are you using?\n\nLatest MacOS\n\n### How are you deploying your application?\n\nDebugging locally (NOT within a Docker container)\n\n### Describe the Bug\n\nPlease check the screenshot. This error happens randomly when I `yarn dev`, and it usually works again the next time I `yard dev`: \r\n\r\n<img width=\"686\" alt=\"image\" src=\"https://user-images.githubusercontent.com/282177/132085518-cbe99021-ab18-4f95-bdc2-1b5895c4899e.png\">\r\n\n\n### Expected Behavior\n\nI expect it to not fire any errors - because if I try `next dev` again immediately without making any changes to the environment and to the codebase, it works.\r\n\r\nThis bug is pretty annoying - because it is random.\n\n### To Reproduce\n\nThe issue here is that it is not clear how to reproduce it. The error is fired randomly, and usually disappears if I try again.\r\n\r\nSo, `yarn dev` fires the error.\r\nThen I try `yarn dev` again without touching anything, and it just works.\r\n\r\nI've attached the screenshot with the hope that it will help your team understand what might be causing the issue.\r\n\r\nNote that it never happens when running a version built for production. But it regularly happens when `dev` or `debug` in local environment.\r\n\r\n-----\r\n\r\nMy setup is latest yarn 3.x in the zero-installs mode. In my package.json:\r\n\r\n```\r\n\"packageManager\": \"yarn@3.0.1\",\r\n\"dev\": \"next dev -H doubleeagle.loc.antonphp.com\",\r\n\"debug2\": \"NODE_OPTIONS=\\\"$NODE_OPTIONS --inspect\\\" next dev -H example.lvh.me,\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28779","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28779/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28779/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28779/events","html_url":"https://github.com/vercel/next.js/pull/28779","id":988208178,"node_id":"MDExOlB1bGxSZXF1ZXN0NzI3MTc3MTQx","number":28779,"title":"Docs: next/script with inline code needs \"id\"","user":{"login":"kristjanmar","id":22234692,"node_id":"MDQ6VXNlcjIyMjM0Njky","avatar_url":"https://avatars.githubusercontent.com/u/22234692?v=4","gravatar_id":"","url":"https://api.github.com/users/kristjanmar","html_url":"https://github.com/kristjanmar","followers_url":"https://api.github.com/users/kristjanmar/followers","following_url":"https://api.github.com/users/kristjanmar/following{/other_user}","gists_url":"https://api.github.com/users/kristjanmar/gists{/gist_id}","starred_url":"https://api.github.com/users/kristjanmar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kristjanmar/subscriptions","organizations_url":"https://api.github.com/users/kristjanmar/orgs","repos_url":"https://api.github.com/users/kristjanmar/repos","events_url":"https://api.github.com/users/kristjanmar/events{/privacy}","received_events_url":"https://api.github.com/users/kristjanmar/received_events","type":"User","site_admin":false},"labels":[{"id":1124940486,"node_id":"MDU6TGFiZWwxMTI0OTQwNDg2","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20documentation","name":"type: documentation","color":"a3f7d0","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2021-09-04T04:35:58Z","updated_at":"2021-09-04T08:43:35Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28779","html_url":"https://github.com/vercel/next.js/pull/28779","diff_url":"https://github.com/vercel/next.js/pull/28779.diff","patch_url":"https://github.com/vercel/next.js/pull/28779.patch"},"body":"If a next/script tag with inline content does not have an \"id\" attribute then eslint-plugin-next gives a warning. This should be mentioned in the docs for next/script.\r\n\r\n<!--\r\nThanks for opening a PR! Your contribution is much appreciated.\r\nIn order to make sure your PR is handled as smoothly as possible we request that you follow the checklist sections below.\r\nChoose the right checklist for the change that you're making:\r\n-->\r\n\r\n## Bug\r\n\r\n- [ ] Related issues linked using `fixes #number`\r\n- [ ] Integration tests added\r\n- [ ] Errors have helpful link attached, see `contributing.md`\r\n\r\n## Feature\r\n\r\n- [ ] Implements an existing feature request or RFC. Make sure the feature request has been accepted for implementation before opening a PR.\r\n- [ ] Related issues linked using `fixes #number`\r\n- [ ] Integration tests added\r\n- [X] Documentation added\r\n- [ ] Telemetry added. In case of a feature if it's used or not.\r\n- [ ] Errors have helpful link attached, see `contributing.md`\r\n\r\n## Documentation / Examples\r\n\r\n- [X] Make sure the linting passes\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28778","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28778/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28778/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28778/events","html_url":"https://github.com/vercel/next.js/issues/28778","id":988205842,"node_id":"MDU6SXNzdWU5ODgyMDU4NDI=","number":28778,"title":"Not scroll to top after changing route","user":{"login":"TanDung2512","id":36843017,"node_id":"MDQ6VXNlcjM2ODQzMDE3","avatar_url":"https://avatars.githubusercontent.com/u/36843017?v=4","gravatar_id":"","url":"https://api.github.com/users/TanDung2512","html_url":"https://github.com/TanDung2512","followers_url":"https://api.github.com/users/TanDung2512/followers","following_url":"https://api.github.com/users/TanDung2512/following{/other_user}","gists_url":"https://api.github.com/users/TanDung2512/gists{/gist_id}","starred_url":"https://api.github.com/users/TanDung2512/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TanDung2512/subscriptions","organizations_url":"https://api.github.com/users/TanDung2512/orgs","repos_url":"https://api.github.com/users/TanDung2512/repos","events_url":"https://api.github.com/users/TanDung2512/events{/privacy}","received_events_url":"https://api.github.com/users/TanDung2512/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-09-04T04:18:10Z","updated_at":"2021-09-04T04:18:10Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\n\n11.1.2\n\n### What version of Node.js are you using?\n\nv15.9.0\n\n### What browser are you using?\n\nChrome\n\n### What operating system are you using?\n\nmacOS\n\n### How are you deploying your application?\n\nnext start\n\n### Describe the Bug\n\nI have two pages, each one contains lazy render components. After changing route by clicking <Link scroll={true}>. The page doesn't scroll to top. This happens on Chrome IOS (work well on safari IOS)\r\n\n\n### Expected Behavior\n\nIt should scroll to top after changing page\n\n### To Reproduce\n\nI have created a demo project here: [https://github.com/TanDung2512/demo-bug-scroll-nextjs](url)\r\n\r\n1. Accessing website on Chrome by an Iphone. \r\n2. Scroll till the page renders more sections.\r\n3. Click any item to change page\r\n\r\nhttps://user-images.githubusercontent.com/36843017/132081810-87d47392-4756-4a76-9500-2dc093b78262.MP4\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28774","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28774/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28774/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28774/events","html_url":"https://github.com/vercel/next.js/issues/28774","id":988027935,"node_id":"MDU6SXNzdWU5ODgwMjc5MzU=","number":28774,"title":"`UnhandledSchemeError` when dependency uses `node:assert` imports","user":{"login":"stefanprobst","id":20753323,"node_id":"MDQ6VXNlcjIwNzUzMzIz","avatar_url":"https://avatars.githubusercontent.com/u/20753323?v=4","gravatar_id":"","url":"https://api.github.com/users/stefanprobst","html_url":"https://github.com/stefanprobst","followers_url":"https://api.github.com/users/stefanprobst/followers","following_url":"https://api.github.com/users/stefanprobst/following{/other_user}","gists_url":"https://api.github.com/users/stefanprobst/gists{/gist_id}","starred_url":"https://api.github.com/users/stefanprobst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stefanprobst/subscriptions","organizations_url":"https://api.github.com/users/stefanprobst/orgs","repos_url":"https://api.github.com/users/stefanprobst/repos","events_url":"https://api.github.com/users/stefanprobst/events{/privacy}","received_events_url":"https://api.github.com/users/stefanprobst/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-09-03T18:58:09Z","updated_at":"2021-09-03T18:59:08Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"### What version of Next.js are you using?\r\n\r\n11.1.2\r\n\r\n### What version of Node.js are you using?\r\n\r\n14.17.6\r\n\r\n### What browser are you using?\r\n\r\nff\r\n\r\n### What operating system are you using?\r\n\r\nlinux\r\n\r\n### How are you deploying your application?\r\n\r\nvercel\r\n\r\n### Describe the Bug\r\n\r\nIn a project which has `micromark-util-events-to-acorn@1.0.1` as a dependency, i get the following error when running `yarn dev`:\r\n\r\n`Module build failed: UnhandledSchemeError: Reading from \"node:assert\" is not handled by plugins (Unhandled scheme).`\r\n\r\n![Screenshot_20210903_204738](https://user-images.githubusercontent.com/20753323/132053244-06fd9ef3-539f-4d5e-8557-74c517a29c1d.png)\r\n\r\nThings to note about this package: it uses an export map with a \"development\" user condition, and `node:assert` is only used there, not in the exported production build.\r\n\r\n### Expected Behavior\r\n\r\nNo error.\r\n\r\n### To Reproduce\r\n\r\n1. `git clone https://github.com/stefanprobst/issue-next-webpack-node-imports.git`\r\n2. `cd issue-next-webpack-node-imports`\r\n2. `yarn && yarn dev`\r\n3. open [http://localhost:3000/](http://localhost:3000/)\r\n3. See error message","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28773","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28773/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28773/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28773/events","html_url":"https://github.com/vercel/next.js/issues/28773","id":987966112,"node_id":"MDU6SXNzdWU5ODc5NjYxMTI=","number":28773,"title":"Inline styles with !important not applied on browser back","user":{"login":"matthewoates","id":3092315,"node_id":"MDQ6VXNlcjMwOTIzMTU=","avatar_url":"https://avatars.githubusercontent.com/u/3092315?v=4","gravatar_id":"","url":"https://api.github.com/users/matthewoates","html_url":"https://github.com/matthewoates","followers_url":"https://api.github.com/users/matthewoates/followers","following_url":"https://api.github.com/users/matthewoates/following{/other_user}","gists_url":"https://api.github.com/users/matthewoates/gists{/gist_id}","starred_url":"https://api.github.com/users/matthewoates/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matthewoates/subscriptions","organizations_url":"https://api.github.com/users/matthewoates/orgs","repos_url":"https://api.github.com/users/matthewoates/repos","events_url":"https://api.github.com/users/matthewoates/events{/privacy}","received_events_url":"https://api.github.com/users/matthewoates/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-09-03T17:16:14Z","updated_at":"2021-09-03T17:25:55Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\r\n\r\n11.1.2\r\n\r\n### What version of Node.js are you using?\r\n\r\n14.17.6\r\n\r\n### What browser are you using?\r\n\r\nchrome, firefox, safari, brave\r\n\r\n### What operating system are you using?\r\n\r\nmacOS\r\n\r\n### How are you deploying your application?\r\n\r\nVercel (issue reproducible locally)\r\n\r\n### Describe the Bug\r\n\r\nhttps://media0.giphy.com/media/xncxDsiBfNx4aQuBca/giphy.gif?cid=790b761136fbc67cf693aa80ce70c65ec52caecd97c089f3&rid=giphy.gif&ct=g\r\n\r\n### The issue:\r\n\r\nA component such as:\r\n\r\n```javascript\r\nfunction SsrOnly({ children }) {\r\n  return (\r\n    // removing !important fixes the issue\r\n    // I also noticed the same issue with <style jsx>{`div { display: none !important; }`}</style>\r\n    <div style={{ display: 'none !important' }}>\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SsrOnly;\r\n```\r\n\r\nwill lose its styling if rendered on a page after the browser back button has been used.\r\n\r\n### Expected Behavior\r\n\r\nThe index page renders the same if visited directly or via the back button.\r\n\r\n### To Reproduce\r\n\r\nRepo: https://github.com/matthewoates/nextjs-bug\r\n\r\nrepro steps:\r\n```\r\n# clone\r\nyarn\r\nyarn dev\r\n```\r\n\r\n- open http://localhost:3000\r\n- click on the link\r\n- click on the browser back button\r\n- observe there is a new h1 element shown","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28771","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28771/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28771/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28771/events","html_url":"https://github.com/vercel/next.js/pull/28771","id":987925776,"node_id":"MDExOlB1bGxSZXF1ZXN0NzI2OTM5MzQ3","number":28771,"title":"update webpack to 5.52.0","user":{"login":"sokra","id":1365881,"node_id":"MDQ6VXNlcjEzNjU4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1365881?v=4","gravatar_id":"","url":"https://api.github.com/users/sokra","html_url":"https://github.com/sokra","followers_url":"https://api.github.com/users/sokra/followers","following_url":"https://api.github.com/users/sokra/following{/other_user}","gists_url":"https://api.github.com/users/sokra/gists{/gist_id}","starred_url":"https://api.github.com/users/sokra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sokra/subscriptions","organizations_url":"https://api.github.com/users/sokra/orgs","repos_url":"https://api.github.com/users/sokra/repos","events_url":"https://api.github.com/users/sokra/events{/privacy}","received_events_url":"https://api.github.com/users/sokra/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"The Next.js team at Vercel"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-09-03T16:16:07Z","updated_at":"2021-09-03T16:46:50Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28771","html_url":"https://github.com/vercel/next.js/pull/28771","diff_url":"https://github.com/vercel/next.js/pull/28771.diff","patch_url":"https://github.com/vercel/next.js/pull/28771.patch"},"body":"remove some workarounds\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28769","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28769/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28769/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28769/events","html_url":"https://github.com/vercel/next.js/pull/28769","id":987853785,"node_id":"MDExOlB1bGxSZXF1ZXN0NzI2ODc4Njg2","number":28769,"title":"Experimental: hook version of reportWebVitals","user":{"login":"huozhi","id":4800338,"node_id":"MDQ6VXNlcjQ4MDAzMzg=","avatar_url":"https://avatars.githubusercontent.com/u/4800338?v=4","gravatar_id":"","url":"https://api.github.com/users/huozhi","html_url":"https://github.com/huozhi","followers_url":"https://api.github.com/users/huozhi/followers","following_url":"https://api.github.com/users/huozhi/following{/other_user}","gists_url":"https://api.github.com/users/huozhi/gists{/gist_id}","starred_url":"https://api.github.com/users/huozhi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huozhi/subscriptions","organizations_url":"https://api.github.com/users/huozhi/orgs","repos_url":"https://api.github.com/users/huozhi/repos","events_url":"https://api.github.com/users/huozhi/events{/privacy}","received_events_url":"https://api.github.com/users/huozhi/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"The Next.js team at Vercel"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-09-03T14:58:09Z","updated_at":"2021-09-05T18:00:49Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28769","html_url":"https://github.com/vercel/next.js/pull/28769","diff_url":"https://github.com/vercel/next.js/pull/28769.diff","patch_url":"https://github.com/vercel/next.js/pull/28769.patch"},"body":"### Experimental\r\n\r\nIntroduce `next/vitals` and `useWebVitalsReport` API. `useWebVitalsReport` can work not limited in the app\r\n\r\n`pages/index.js`\r\n```jsx\r\nimport { useWebVitalsReport } from 'next/vitals'\r\n\r\nexport default function Index() {\r\n   useWebVitalsReport((metric) => {\r\n    // handle metric...\r\n  })\r\n  return 'sup'\r\n}\r\n```\r\n\r\nbut defining `reportWebVitals` is required\r\n\r\n`pages/_app.js`\r\n```jsx\r\nexport default function MyApp({ Component, pageProps }) {\r\n  return <Component {...pageProps} />\r\n}\r\n\r\nexport function reportWebVitals() {}\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28766","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28766/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28766/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28766/events","html_url":"https://github.com/vercel/next.js/issues/28766","id":987803021,"node_id":"MDU6SXNzdWU5ODc4MDMwMjE=","number":28766,"title":"  Migration webpack 4 -> 5 and code splitting trouble antd ","user":{"login":"DanilaNagornyi","id":64028251,"node_id":"MDQ6VXNlcjY0MDI4MjUx","avatar_url":"https://avatars.githubusercontent.com/u/64028251?v=4","gravatar_id":"","url":"https://api.github.com/users/DanilaNagornyi","html_url":"https://github.com/DanilaNagornyi","followers_url":"https://api.github.com/users/DanilaNagornyi/followers","following_url":"https://api.github.com/users/DanilaNagornyi/following{/other_user}","gists_url":"https://api.github.com/users/DanilaNagornyi/gists{/gist_id}","starred_url":"https://api.github.com/users/DanilaNagornyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DanilaNagornyi/subscriptions","organizations_url":"https://api.github.com/users/DanilaNagornyi/orgs","repos_url":"https://api.github.com/users/DanilaNagornyi/repos","events_url":"https://api.github.com/users/DanilaNagornyi/events{/privacy}","received_events_url":"https://api.github.com/users/DanilaNagornyi/received_events","type":"User","site_admin":false},"labels":[{"id":549032284,"node_id":"MDU6TGFiZWw1NDkwMzIyODQ=","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20example","name":"type: example","color":"ecffaf","default":false,"description":""},{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-09-03T14:02:38Z","updated_at":"2021-09-03T15:53:48Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What example does this report relate to?\r\n\r\nwith-styled-components\r\n\r\n### What version of Next.js are you using?\r\n\r\n\"next\": \"10.2.3\"\r\n\r\n### What version of Node.js are you using?\r\n\r\nv14.16.1\r\n\r\n### What browser are you using?\r\n\r\nChrome\r\n\r\n### What operating system are you using?\r\n\r\nmacOS\r\n\r\n### How are you deploying your application?\r\n\r\nOther platform\r\n\r\n### Describe the Bug\r\n\r\n problem with the code splitting\r\n\r\n### Expected Behavior\r\n\r\nassembly as in 4 webpack \r\n\r\n### To Reproduce\r\n\r\nHi !\r\n\r\nWe go from 4 to 5 webpacks, everything seems to work out, but there is a problem with the code splitting, namely with the packages of antd screens I attach the file next.config.js\r\n\r\nWebpack 4:\r\n<img width=\"1792\" alt=\"Снимок экрана 2021-09-02 в 17 05 41\" src=\"https://user-images.githubusercontent.com/64028251/132006308-1675602a-159c-41d4-b6fd-0ff7c408c03e.png\">\r\n\r\nWebpack 5:\r\n<img width=\"1792\" alt=\"Снимок экрана 2021-09-02 в 17 15 59\" src=\"https://user-images.githubusercontent.com/64028251/132006402-939b3d9c-e677-49db-992b-5eb6aca43111.png\">\r\n\r\nCan you please tell me how to make the formation of packages as it was before, so that the webpack does not drag everything into one file _app.js ?\r\n\r\nMy config:\r\n```const path = require('path');\r\nconst webpack = require('webpack');\r\n\r\nconst withBundleAnalyzer = require('@next/bundle-analyzer')({\r\n  enabled: process.env.ANALYZE === 'true',\r\n});\r\nconst FilterWarningsPlugin = require('webpack-filter-warnings-plugin');\r\nconst { withSentryConfig } = require('@sentry/nextjs');\r\nconst withAntdLess = require('next-plugin-antd-less');\r\n\r\nlet CONFIG;\r\n\r\ntry {\r\n  CONFIG = require('./etc/config');\r\n} catch (e) {\r\n  console.error(\r\n    'Create config from one of examples. See /etc/ dir and copy one of .dev, .test or .prod config file for config.js!',\r\n  );\r\n  throw new Error(e);\r\n}\r\n\r\nconst SentryWebpackPluginOptions = {\r\n  dryRun: true,\r\n};\r\n\r\nconst themeVariables = require('./src/.......').antDLessVars;\r\n\r\nconst config = withSentryConfig(\r\n  withBundleAnalyzer(\r\n    withAntdLess({\r\n      typescript: {\r\n        ignoreBuildErrors: true,\r\n      },\r\n  \r\n      productionBrowserSourceMaps: false,\r\n      trailingSlash: true,\r\n      serverRuntimeConfig: CONFIG.SSR,\r\n      publicRuntimeConfig: CONFIG.CLIENT,\r\n\r\n      modifyVars: themeVariables,\r\n      webpack: (config, { isServer, buildId }) => {\r\n        config.plugins.push(\r\n          new webpack.DefinePlugin({\r\n            'process.env.SENTRY_RELEASE': JSON.stringify(buildId),\r\n            'process.env.IS_CLIENT': JSON.stringify(!isServer),\r\n            'process.env.IS_SERVER': JSON.stringify(isServer),\r\n            'process.env.IS_DEV': JSON.stringify(process.env.NODE_ENV),\r\n            'process.env.IS_DOCKER': JSON.stringify(process.env.IS_DOCKER),\r\n          }),\r\n          // new AntdDayjsWebpackPlugin(),\r\n          new FilterWarningsPlugin({\r\n            exclude: /mini-css-extract-plugin[^]*Conflicting order between:/,\r\n          }),\r\n        );\r\n\r\n        if (isServer) {\r\n          const antStyles = /antd\\/.*?\\/style.*?/;\r\n\r\n          config.module.rules.unshift({\r\n            test: antStyles,\r\n            use: 'null-loader',\r\n          });\r\n        } else {\r\n          config.plugins.push(new webpack.IgnorePlugin(/^(elastic-apm-node)$/));\r\n        }\r\n\r\n        config.resolve.alias['@ant-design/icons/lib/dist$'] = path.join(__dirname, 'icons.js');\r\n\r\n        config.module.rules.unshift({\r\n          test: /\\.svg$/,\r\n          use: ['@svgr/webpack', 'url-loader'],\r\n        });\r\n\r\n        return config;\r\n      },\r\n    }),\r\n  ),\r\n    SentryWebpackPluginOptions,\r\n  );\r\n  module.exports = config;\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28765","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28765/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28765/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28765/events","html_url":"https://github.com/vercel/next.js/pull/28765","id":987762667,"node_id":"MDExOlB1bGxSZXF1ZXN0NzI2ODAyNTE3","number":28765,"title":"Add config to disable <Link> prefetch globally","user":{"login":"Ryz0nd","id":53689198,"node_id":"MDQ6VXNlcjUzNjg5MTk4","avatar_url":"https://avatars.githubusercontent.com/u/53689198?v=4","gravatar_id":"","url":"https://api.github.com/users/Ryz0nd","html_url":"https://github.com/Ryz0nd","followers_url":"https://api.github.com/users/Ryz0nd/followers","following_url":"https://api.github.com/users/Ryz0nd/following{/other_user}","gists_url":"https://api.github.com/users/Ryz0nd/gists{/gist_id}","starred_url":"https://api.github.com/users/Ryz0nd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ryz0nd/subscriptions","organizations_url":"https://api.github.com/users/Ryz0nd/orgs","repos_url":"https://api.github.com/users/Ryz0nd/repos","events_url":"https://api.github.com/users/Ryz0nd/events{/privacy}","received_events_url":"https://api.github.com/users/Ryz0nd/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-09-03T13:16:38Z","updated_at":"2021-09-03T13:28:21Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28765","html_url":"https://github.com/vercel/next.js/pull/28765","diff_url":"https://github.com/vercel/next.js/pull/28765.diff","patch_url":"https://github.com/vercel/next.js/pull/28765.patch"},"body":"fixes #24009\r\n\r\n## Feature\r\n\r\n- [ ] Implements an existing feature request or RFC. Make sure the feature request has been accepted for implementation before opening a PR.\r\n- [x] Related issues linked using `fixes #number`\r\n- [ ] Integration tests added\r\n- [ ] Documentation added\r\n- [ ] Telemetry added. In case of a feature if it's used or not.\r\n- [ ] Errors have helpful link attached, see `contributing.md`\r\n\r\n## Documentation / Examples\r\n\r\n- [ ] Make sure the linting passes\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28764","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28764/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28764/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28764/events","html_url":"https://github.com/vercel/next.js/pull/28764","id":987760544,"node_id":"MDExOlB1bGxSZXF1ZXN0NzI2ODAwNjc0","number":28764,"title":"fix: migrate with-stitches example to be compat with stitches@1.0.0","user":{"login":"ricardocasares","id":84963,"node_id":"MDQ6VXNlcjg0OTYz","avatar_url":"https://avatars.githubusercontent.com/u/84963?v=4","gravatar_id":"","url":"https://api.github.com/users/ricardocasares","html_url":"https://github.com/ricardocasares","followers_url":"https://api.github.com/users/ricardocasares/followers","following_url":"https://api.github.com/users/ricardocasares/following{/other_user}","gists_url":"https://api.github.com/users/ricardocasares/gists{/gist_id}","starred_url":"https://api.github.com/users/ricardocasares/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ricardocasares/subscriptions","organizations_url":"https://api.github.com/users/ricardocasares/orgs","repos_url":"https://api.github.com/users/ricardocasares/repos","events_url":"https://api.github.com/users/ricardocasares/events{/privacy}","received_events_url":"https://api.github.com/users/ricardocasares/received_events","type":"User","site_admin":false},"labels":[{"id":549032284,"node_id":"MDU6TGFiZWw1NDkwMzIyODQ=","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20example","name":"type: example","color":"ecffaf","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-09-03T13:14:19Z","updated_at":"2021-09-03T13:14:22Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28764","html_url":"https://github.com/vercel/next.js/pull/28764","diff_url":"https://github.com/vercel/next.js/pull/28764.diff","patch_url":"https://github.com/vercel/next.js/pull/28764.patch"},"body":"This updates the exports coming from stitches/react@1.0.0\r\n\r\n## Documentation / Examples\r\n\r\n- [x] Make sure the linting passes\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28760","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28760/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28760/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28760/events","html_url":"https://github.com/vercel/next.js/pull/28760","id":987665804,"node_id":"MDExOlB1bGxSZXF1ZXN0NzI2NzE5NDQx","number":28760,"title":"Add line break to typescript template","user":{"login":"royal","id":20678198,"node_id":"MDQ6VXNlcjIwNjc4MTk4","avatar_url":"https://avatars.githubusercontent.com/u/20678198?v=4","gravatar_id":"","url":"https://api.github.com/users/royal","html_url":"https://github.com/royal","followers_url":"https://api.github.com/users/royal/followers","following_url":"https://api.github.com/users/royal/following{/other_user}","gists_url":"https://api.github.com/users/royal/gists{/gist_id}","starred_url":"https://api.github.com/users/royal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/royal/subscriptions","organizations_url":"https://api.github.com/users/royal/orgs","repos_url":"https://api.github.com/users/royal/repos","events_url":"https://api.github.com/users/royal/events{/privacy}","received_events_url":"https://api.github.com/users/royal/received_events","type":"User","site_admin":false},"labels":[{"id":2108224491,"node_id":"MDU6TGFiZWwyMTA4MjI0NDkx","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20create-next-app","name":"type: create-next-app","color":"9effbb","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-09-03T11:13:19Z","updated_at":"2021-09-03T13:00:00Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28760","html_url":"https://github.com/vercel/next.js/pull/28760","diff_url":"https://github.com/vercel/next.js/pull/28760.diff","patch_url":"https://github.com/vercel/next.js/pull/28760.patch"},"body":"<!--\r\nThanks for opening a PR! Your contribution is much appreciated.\r\nIn order to make sure your PR is handled as smoothly as possible we request that you follow the checklist sections below.\r\nChoose the right checklist for the change that you're making:\r\n-->\r\n\r\nAdds a missing line break to the typescript template for create-next-app.\r\n\r\n## Bug\r\n\r\n- [ ] Related issues linked using `fixes #number`\r\n- [ ] Integration tests added\r\n- [ ] Errors have helpful link attached, see `contributing.md`\r\n\r\n## Feature\r\n\r\n- [ ] Implements an existing feature request or RFC. Make sure the feature request has been accepted for implementation before opening a PR.\r\n- [ ] Related issues linked using `fixes #number`\r\n- [ ] Integration tests added\r\n- [ ] Documentation added\r\n- [ ] Telemetry added. In case of a feature if it's used or not.\r\n- [ ] Errors have helpful link attached, see `contributing.md`\r\n\r\n## Documentation / Examples\r\n\r\n- [ ] Make sure the linting passes\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28757","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28757/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28757/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28757/events","html_url":"https://github.com/vercel/next.js/issues/28757","id":987610246,"node_id":"MDU6SXNzdWU5ODc2MTAyNDY=","number":28757,"title":"Symlink in Pages","user":{"login":"bordeo","id":1566127,"node_id":"MDQ6VXNlcjE1NjYxMjc=","avatar_url":"https://avatars.githubusercontent.com/u/1566127?v=4","gravatar_id":"","url":"https://api.github.com/users/bordeo","html_url":"https://github.com/bordeo","followers_url":"https://api.github.com/users/bordeo/followers","following_url":"https://api.github.com/users/bordeo/following{/other_user}","gists_url":"https://api.github.com/users/bordeo/gists{/gist_id}","starred_url":"https://api.github.com/users/bordeo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bordeo/subscriptions","organizations_url":"https://api.github.com/users/bordeo/orgs","repos_url":"https://api.github.com/users/bordeo/repos","events_url":"https://api.github.com/users/bordeo/events{/privacy}","received_events_url":"https://api.github.com/users/bordeo/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-09-03T09:59:26Z","updated_at":"2021-09-03T10:12:10Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\r\n\r\n11.1.2\r\n\r\n### What version of Node.js are you using?\r\n\r\n14.17.1\r\n\r\n### What browser are you using?\r\n\r\nChrome\r\n\r\n### What operating system are you using?\r\n\r\nmacOS\r\n\r\n### How are you deploying your application?\r\n\r\nnext start\r\n\r\n### Describe the Bug\r\n\r\nUsing symlinks in the `pages` directory causes the symlinked page to not run SSR when navigating client-side.\r\n\r\nThis happens because next-babel-loader checks if file is a page this way \r\n```js\r\nconst isPageFile = filename.startsWith(pagesDir)\r\n``` \r\nwhere [`filename`](https://github.com/vercel/next.js/blob/fcdf73202daaaa4abdca2069f51cc473759618df/packages/next/build/babel/loader/index.ts#L12) is the resolved filename after webpack `SymlinkPlugin` ran.\r\n\r\nThis means, having a project structure like example below, filename for `./pages/symlink.js` is detected as `./symlink.js` instead of `./pages/symlink.js`, `isPageFile` is false and built file `./.next/static/chunks/pages/symlink.js` doesn't contain `__N_SSP = true`\r\n\r\nExample\r\n┣ pages/\r\n┃ ┣ about.js\r\n┃ ┣ index.js\r\n┃ ┗ @symlink.js -> ../symlink.js\r\n┣ symlink.js\r\n\r\n\r\n### Expected Behavior\r\n\r\nWhen navigating to symlinked page ssr props should be resolved and rendered\r\n\r\n### To Reproduce\r\n\r\nRun\r\n```bash\r\ntouch pages/about.js\r\ntouch symlink.js\r\ncd pages\r\nln -s ../symlink.js symlink.js\r\n```\r\nCopy content into relative files\r\n**about.js**\r\n```jsx\r\nimport Link from 'next/link'\r\n\r\nexport async function getServerSideProps({ req }) {\r\n    return {props: {about:'About string server-side rendered'}}\r\n}\r\n\r\nexport default function About({ about }) {\r\n    return (\r\n      <div>\r\n        <span>{about}</span>\r\n        <ul>\r\n          <li>\r\n            <Link href=\"/symlink\">\r\n              <a>Symlink</a>\r\n            </Link>\r\n            </li>\r\n        </ul>\r\n      </div>\r\n    )\r\n  }\r\n```\r\n**symlink.js**\r\n```jsx\r\nimport Link from 'next/link'\r\n\r\nexport async function getServerSideProps({ req }) {\r\n    return {props: {symlink:'Symlink string server-side rendered'}}\r\n}\r\n\r\nexport default function Symlink({ symlink }) {\r\n    return (\r\n      <div>\r\n        <span>{symlink}</span>\r\n        <ul>\r\n          <li>\r\n            <Link href=\"/about\">\r\n              <a>About</a>\r\n            </Link>\r\n            </li>\r\n        </ul>\r\n      </div>\r\n    )\r\n  }\r\n```\r\n\r\nRun `yarn dev`\r\nNavigate to _/about_ than click on _Symlink_ link\r\nSSR client-side doesn't works","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28756","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28756/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28756/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28756/events","html_url":"https://github.com/vercel/next.js/pull/28756","id":987516035,"node_id":"MDExOlB1bGxSZXF1ZXN0NzI2NTkxMDE0","number":28756,"title":"Add tracing for css-loader","user":{"login":"timneutkens","id":6324199,"node_id":"MDQ6VXNlcjYzMjQxOTk=","avatar_url":"https://avatars.githubusercontent.com/u/6324199?v=4","gravatar_id":"","url":"https://api.github.com/users/timneutkens","html_url":"https://github.com/timneutkens","followers_url":"https://api.github.com/users/timneutkens/followers","following_url":"https://api.github.com/users/timneutkens/following{/other_user}","gists_url":"https://api.github.com/users/timneutkens/gists{/gist_id}","starred_url":"https://api.github.com/users/timneutkens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/timneutkens/subscriptions","organizations_url":"https://api.github.com/users/timneutkens/orgs","repos_url":"https://api.github.com/users/timneutkens/repos","events_url":"https://api.github.com/users/timneutkens/events{/privacy}","received_events_url":"https://api.github.com/users/timneutkens/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"The Next.js team at Vercel"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2021-09-03T08:00:04Z","updated_at":"2021-09-04T10:28:33Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28756","html_url":"https://github.com/vercel/next.js/pull/28756","diff_url":"https://github.com/vercel/next.js/pull/28756.diff","patch_url":"https://github.com/vercel/next.js/pull/28756.patch"},"body":"<!--\nThanks for opening a PR! Your contribution is much appreciated.\nIn order to make sure your PR is handled as smoothly as possible we request that you follow the checklist sections below.\nChoose the right checklist for the change that you're making:\n-->\n\nAdds spans for css-loader.\n\n## Bug\n\n- [ ] Related issues linked using `fixes #number`\n- [ ] Integration tests added\n- [ ] Errors have helpful link attached, see `contributing.md`\n\n## Feature\n\n- [ ] Implements an existing feature request or RFC. Make sure the feature request has been accepted for implementation before opening a PR.\n- [ ] Related issues linked using `fixes #number`\n- [ ] Integration tests added\n- [ ] Documentation added\n- [ ] Telemetry added. In case of a feature if it's used or not.\n- [ ] Errors have helpful link attached, see `contributing.md`\n\n## Documentation / Examples\n\n- [ ] Make sure the linting passes\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28755","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28755/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28755/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28755/events","html_url":"https://github.com/vercel/next.js/pull/28755","id":987492202,"node_id":"MDExOlB1bGxSZXF1ZXN0NzI2NTcxMDUy","number":28755,"title":"Updates @react-three/drei version and other dependencies.","user":{"login":"andersonleite","id":52427,"node_id":"MDQ6VXNlcjUyNDI3","avatar_url":"https://avatars.githubusercontent.com/u/52427?v=4","gravatar_id":"","url":"https://api.github.com/users/andersonleite","html_url":"https://github.com/andersonleite","followers_url":"https://api.github.com/users/andersonleite/followers","following_url":"https://api.github.com/users/andersonleite/following{/other_user}","gists_url":"https://api.github.com/users/andersonleite/gists{/gist_id}","starred_url":"https://api.github.com/users/andersonleite/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andersonleite/subscriptions","organizations_url":"https://api.github.com/users/andersonleite/orgs","repos_url":"https://api.github.com/users/andersonleite/repos","events_url":"https://api.github.com/users/andersonleite/events{/privacy}","received_events_url":"https://api.github.com/users/andersonleite/received_events","type":"User","site_admin":false},"labels":[{"id":549032284,"node_id":"MDU6TGFiZWw1NDkwMzIyODQ=","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20example","name":"type: example","color":"ecffaf","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-09-03T07:25:18Z","updated_at":"2021-09-03T07:25:21Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28755","html_url":"https://github.com/vercel/next.js/pull/28755","diff_url":"https://github.com/vercel/next.js/pull/28755.diff","patch_url":"https://github.com/vercel/next.js/pull/28755.patch"},"body":"Updating @react-three/drei from 4.x to 7.x\r\n\r\nI was having problems using this example and realized that it was caused by the \"old\" version of the lib.\r\nAlso updating @react-three/fiber and next to latest. \r\n\r\n## Documentation / Examples\r\n\r\n- [x] Make sure the linting passes\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28738","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28738/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28738/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28738/events","html_url":"https://github.com/vercel/next.js/issues/28738","id":986774657,"node_id":"MDU6SXNzdWU5ODY3NzQ2NTc=","number":28738,"title":"Mobile Menu Doesn't Close ","user":{"login":"SudoStain","id":10123821,"node_id":"MDQ6VXNlcjEwMTIzODIx","avatar_url":"https://avatars.githubusercontent.com/u/10123821?v=4","gravatar_id":"","url":"https://api.github.com/users/SudoStain","html_url":"https://github.com/SudoStain","followers_url":"https://api.github.com/users/SudoStain/followers","following_url":"https://api.github.com/users/SudoStain/following{/other_user}","gists_url":"https://api.github.com/users/SudoStain/gists{/gist_id}","starred_url":"https://api.github.com/users/SudoStain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SudoStain/subscriptions","organizations_url":"https://api.github.com/users/SudoStain/orgs","repos_url":"https://api.github.com/users/SudoStain/repos","events_url":"https://api.github.com/users/SudoStain/events{/privacy}","received_events_url":"https://api.github.com/users/SudoStain/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-09-02T14:02:50Z","updated_at":"2021-09-03T02:23:35Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\n\n11.0.1\n\n### What version of Node.js are you using?\n\n14.15.3\n\n### What browser are you using?\n\nChrome, Safari, Firefox\n\n### What operating system are you using?\n\nmacOS\n\n### How are you deploying your application?\n\nVercel\n\n### Describe the Bug\n\nThe mobile menu does not close when the Link to the page is clicked. I've tried numerous jsx variations. They all have this problem when <Link> tag is used. The page loads in the background but the menu does not close. I was looking around and found a Strapi/Nextjs starter website, it has the same bug, when you click on the contact page the page loads in the background but the menu doesn't close.\r\n\r\n\n\n### Expected Behavior\n\nThe menu closes after the link is clicked.\n\n### To Reproduce\n\n<img width=\"521\" alt=\"Screen Shot 2021-09-01 at 1 56 50 PM\" src=\"https://user-images.githubusercontent.com/10123821/131834717-81695396-7048-4a69-8047-21777e7ac1db.png\">\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28734","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28734/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28734/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28734/events","html_url":"https://github.com/vercel/next.js/pull/28734","id":986476784,"node_id":"MDExOlB1bGxSZXF1ZXN0NzI1NjgwMjc0","number":28734,"title":"update .babelrc support latest styled-components","user":{"login":"Braveheartforyou","id":12381007,"node_id":"MDQ6VXNlcjEyMzgxMDA3","avatar_url":"https://avatars.githubusercontent.com/u/12381007?v=4","gravatar_id":"","url":"https://api.github.com/users/Braveheartforyou","html_url":"https://github.com/Braveheartforyou","followers_url":"https://api.github.com/users/Braveheartforyou/followers","following_url":"https://api.github.com/users/Braveheartforyou/following{/other_user}","gists_url":"https://api.github.com/users/Braveheartforyou/gists{/gist_id}","starred_url":"https://api.github.com/users/Braveheartforyou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Braveheartforyou/subscriptions","organizations_url":"https://api.github.com/users/Braveheartforyou/orgs","repos_url":"https://api.github.com/users/Braveheartforyou/repos","events_url":"https://api.github.com/users/Braveheartforyou/events{/privacy}","received_events_url":"https://api.github.com/users/Braveheartforyou/received_events","type":"User","site_admin":false},"labels":[{"id":549032284,"node_id":"MDU6TGFiZWw1NDkwMzIyODQ=","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20example","name":"type: example","color":"ecffaf","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-09-02T09:55:30Z","updated_at":"2021-09-02T09:55:33Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28734","html_url":"https://github.com/vercel/next.js/pull/28734","diff_url":"https://github.com/vercel/next.js/pull/28734.diff","patch_url":"https://github.com/vercel/next.js/pull/28734.patch"},"body":"latest styled-components@5.x  error\r\n\r\n<!--\r\nThanks for opening a PR! Your contribution is much appreciated.\r\nIn order to make sure your PR is handled as smoothly as possible we request that you follow the checklist sections below.\r\nChoose the right checklist for the change that you're making:\r\n-->\r\n\r\n## Bug\r\n\r\n- [ ] Related issues linked using `fixes #number`\r\n- [ ] Integration tests added\r\n- [ ] Errors have helpful link attached, see `contributing.md`\r\n\r\n## Feature\r\n\r\n- [ ] Implements an existing feature request or RFC. Make sure the feature request has been accepted for implementation before opening a PR.\r\n- [ ] Related issues linked using `fixes #number`\r\n- [ ] Integration tests added\r\n- [ ] Documentation added\r\n- [ ] Telemetry added. In case of a feature if it's used or not.\r\n- [ ] Errors have helpful link attached, see `contributing.md`\r\n\r\n## Documentation / Examples\r\n\r\n- [ ] Make sure the linting passes\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28729","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28729/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28729/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28729/events","html_url":"https://github.com/vercel/next.js/issues/28729","id":986294395,"node_id":"MDU6SXNzdWU5ODYyOTQzOTU=","number":28729,"title":"Markdown inline code parsing error in the doc section","user":{"login":"akasuv","id":30253166,"node_id":"MDQ6VXNlcjMwMjUzMTY2","avatar_url":"https://avatars.githubusercontent.com/u/30253166?v=4","gravatar_id":"","url":"https://api.github.com/users/akasuv","html_url":"https://github.com/akasuv","followers_url":"https://api.github.com/users/akasuv/followers","following_url":"https://api.github.com/users/akasuv/following{/other_user}","gists_url":"https://api.github.com/users/akasuv/gists{/gist_id}","starred_url":"https://api.github.com/users/akasuv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akasuv/subscriptions","organizations_url":"https://api.github.com/users/akasuv/orgs","repos_url":"https://api.github.com/users/akasuv/repos","events_url":"https://api.github.com/users/akasuv/events{/privacy}","received_events_url":"https://api.github.com/users/akasuv/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-09-02T07:32:34Z","updated_at":"2021-09-03T03:40:51Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\n\n11.1.2\n\n### What version of Node.js are you using?\n\n14.17.5\n\n### What browser are you using?\n\nChrome\n\n### What operating system are you using?\n\nmacOS\n\n### How are you deploying your application?\n\nNetlify\n\n### Describe the Bug\n\nSeems like the site doesn't parse the inline code markdown correctly, still has the grave accent in the doc everywhere.\r\n\r\n<img width=\"695\" alt=\"Screen Shot 2021-09-02 at 3 31 37 PM\" src=\"https://user-images.githubusercontent.com/30253166/131801672-b98d1099-917b-4420-b39b-0c71dcbe2a73.png\">\r\n\n\n### Expected Behavior\n\nText marked as inline code should has some styles but the grave accent should be hidden.\n\n### To Reproduce\n\nCheck any place that has inline code markdown in the doc.","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28726","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28726/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28726/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28726/events","html_url":"https://github.com/vercel/next.js/pull/28726","id":986160788,"node_id":"MDExOlB1bGxSZXF1ZXN0NzI1MzkzOTE4","number":28726,"title":"Sentry example: add js types to SentryWebpackPluginOptions","user":{"login":"jonespen","id":230841,"node_id":"MDQ6VXNlcjIzMDg0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230841?v=4","gravatar_id":"","url":"https://api.github.com/users/jonespen","html_url":"https://github.com/jonespen","followers_url":"https://api.github.com/users/jonespen/followers","following_url":"https://api.github.com/users/jonespen/following{/other_user}","gists_url":"https://api.github.com/users/jonespen/gists{/gist_id}","starred_url":"https://api.github.com/users/jonespen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jonespen/subscriptions","organizations_url":"https://api.github.com/users/jonespen/orgs","repos_url":"https://api.github.com/users/jonespen/repos","events_url":"https://api.github.com/users/jonespen/events{/privacy}","received_events_url":"https://api.github.com/users/jonespen/received_events","type":"User","site_admin":false},"labels":[{"id":549032284,"node_id":"MDU6TGFiZWw1NDkwMzIyODQ=","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20example","name":"type: example","color":"ecffaf","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2021-09-02T05:26:36Z","updated_at":"2021-09-03T08:21:39Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28726","html_url":"https://github.com/vercel/next.js/pull/28726","diff_url":"https://github.com/vercel/next.js/pull/28726.diff","patch_url":"https://github.com/vercel/next.js/pull/28726.patch"},"body":"Enables code completion in Visual Studio Code (and perhaps other editors)\r\n\r\n<img width=\"642\" alt=\"image\" src=\"https://user-images.githubusercontent.com/230841/131786815-f0b33142-fcb6-42b0-9407-d1792925b851.png\">\r\n\r\n<!--\r\nThanks for opening a PR! Your contribution is much appreciated.\r\nIn order to make sure your PR is handled as smoothly as possible we request that you follow the checklist sections below.\r\nChoose the right checklist for the change that you're making:\r\n-->\r\n\r\n## Bug\r\n\r\n- [ ] Related issues linked using `fixes #number`\r\n- [ ] Integration tests added\r\n- [ ] Errors have helpful link attached, see `contributing.md`\r\n\r\n## Feature\r\n\r\n- [ ] Implements an existing feature request or RFC. Make sure the feature request has been accepted for implementation before opening a PR.\r\n- [ ] Related issues linked using `fixes #number`\r\n- [ ] Integration tests added\r\n- [ ] Documentation added\r\n- [ ] Telemetry added. In case of a feature if it's used or not.\r\n- [ ] Errors have helpful link attached, see `contributing.md`\r\n\r\n## Documentation / Examples\r\n\r\n- [x] Make sure the linting passes\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28710","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28710/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28710/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28710/events","html_url":"https://github.com/vercel/next.js/pull/28710","id":985233289,"node_id":"MDExOlB1bGxSZXF1ZXN0NzI0NTYyMzQx","number":28710,"title":"Support node-sass@6","user":{"login":"adrienharnay","id":15089053,"node_id":"MDQ6VXNlcjE1MDg5MDUz","avatar_url":"https://avatars.githubusercontent.com/u/15089053?v=4","gravatar_id":"","url":"https://api.github.com/users/adrienharnay","html_url":"https://github.com/adrienharnay","followers_url":"https://api.github.com/users/adrienharnay/followers","following_url":"https://api.github.com/users/adrienharnay/following{/other_user}","gists_url":"https://api.github.com/users/adrienharnay/gists{/gist_id}","starred_url":"https://api.github.com/users/adrienharnay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adrienharnay/subscriptions","organizations_url":"https://api.github.com/users/adrienharnay/orgs","repos_url":"https://api.github.com/users/adrienharnay/repos","events_url":"https://api.github.com/users/adrienharnay/events{/privacy}","received_events_url":"https://api.github.com/users/adrienharnay/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-09-01T14:34:55Z","updated_at":"2021-09-02T08:30:56Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28710","html_url":"https://github.com/vercel/next.js/pull/28710","diff_url":"https://github.com/vercel/next.js/pull/28710.diff","patch_url":"https://github.com/vercel/next.js/pull/28710.patch"},"body":"This features supports node-sass@6, which supports node@16.\r\n\r\nAddresses the discussion https://github.com/vercel/next.js/discussions/28704#discussioncomment-1265193\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28709","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28709/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28709/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28709/events","html_url":"https://github.com/vercel/next.js/pull/28709","id":985212957,"node_id":"MDExOlB1bGxSZXF1ZXN0NzI0NTQ1ODYx","number":28709,"title":"fix: should allow optional properties for `images` option","user":{"login":"catnose99","id":34590683,"node_id":"MDQ6VXNlcjM0NTkwNjgz","avatar_url":"https://avatars.githubusercontent.com/u/34590683?v=4","gravatar_id":"","url":"https://api.github.com/users/catnose99","html_url":"https://github.com/catnose99","followers_url":"https://api.github.com/users/catnose99/followers","following_url":"https://api.github.com/users/catnose99/following{/other_user}","gists_url":"https://api.github.com/users/catnose99/gists{/gist_id}","starred_url":"https://api.github.com/users/catnose99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/catnose99/subscriptions","organizations_url":"https://api.github.com/users/catnose99/orgs","repos_url":"https://api.github.com/users/catnose99/repos","events_url":"https://api.github.com/users/catnose99/events{/privacy}","received_events_url":"https://api.github.com/users/catnose99/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-09-01T14:17:35Z","updated_at":"2021-09-05T00:41:40Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28709","html_url":"https://github.com/vercel/next.js/pull/28709","diff_url":"https://github.com/vercel/next.js/pull/28709.diff","patch_url":"https://github.com/vercel/next.js/pull/28709.patch"},"body":"<!--\r\nThanks for opening a PR! Your contribution is much appreciated.\r\nIn order to make sure your PR is handled as smoothly as possible we request that you follow the checklist sections below.\r\nChoose the right checklist for the change that you're making:\r\n-->\r\n\r\n## Bug\r\n- Fixes #28708\r\n\r\n- [x] Related issues linked using `fixes #number`\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28708","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28708/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28708/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28708/events","html_url":"https://github.com/vercel/next.js/issues/28708","id":985210206,"node_id":"MDU6SXNzdWU5ODUyMTAyMDY=","number":28708,"title":"type `images?: ImageOption` on next.config.js does not allow optional properties.","user":{"login":"catnose99","id":34590683,"node_id":"MDQ6VXNlcjM0NTkwNjgz","avatar_url":"https://avatars.githubusercontent.com/u/34590683?v=4","gravatar_id":"","url":"https://api.github.com/users/catnose99","html_url":"https://github.com/catnose99","followers_url":"https://api.github.com/users/catnose99/followers","following_url":"https://api.github.com/users/catnose99/following{/other_user}","gists_url":"https://api.github.com/users/catnose99/gists{/gist_id}","starred_url":"https://api.github.com/users/catnose99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/catnose99/subscriptions","organizations_url":"https://api.github.com/users/catnose99/orgs","repos_url":"https://api.github.com/users/catnose99/repos","events_url":"https://api.github.com/users/catnose99/events{/privacy}","received_events_url":"https://api.github.com/users/catnose99/received_events","type":"User","site_admin":false},"labels":[{"id":455907192,"node_id":"MDU6TGFiZWw0NTU5MDcxOTI=","url":"https://api.github.com/repos/vercel/next.js/labels/kind:%20bug","name":"kind: bug","color":"d1323a","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-09-01T14:15:22Z","updated_at":"2021-09-03T19:37:50Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\r\n\r\nv11.1.2\r\n\r\n### What version of Node.js are you using?\r\n\r\nv15.8.0\r\n\r\n### What browser are you using?\r\n\r\nChrome\r\n\r\n### What operating system are you using?\r\n\r\nmacOS\r\n\r\n### How are you deploying your application?\r\n\r\nVercel\r\n\r\n### Describe the Bug\r\n\r\nOn next.config.js, setting single property to `images` option  cause a TypeError.\r\n\r\n```\r\nType '{ disableStaticImages: true; }' is missing the following properties\r\nfrom type 'ImageConfig': deviceSizes, imageSizes, loader, path\r\n```\r\n\r\n![スクリーンショット 2021-09-01 23 05 23](https://user-images.githubusercontent.com/34590683/131685782-20eb42f6-1e37-401c-be89-54967af03c20.png)\r\n\r\nThis happens because `deviceSizes`, `imageSizes`, `loader` and `path` are required in `ImageConfig`.\r\n\r\n```ts\r\n// https://github.com/vercel/next.js/blob/8151a7e0dc9a029a9c4261901d333f67d23f718f/packages/next/server/image-config.ts\r\ntype ImageConfig = {\r\n    deviceSizes: number[];\r\n    imageSizes: number[];\r\n    loader: LoaderValue;\r\n    path: string;\r\n    domains?: string[];\r\n    disableStaticImages?: boolean;\r\n    minimumCacheTTL?: number;\r\n};\r\n```\r\n\r\n### Expected Behavior\r\n\r\nShould allow single property as written in [document](https://nextjs.org/docs/basic-features/image-optimization#disable-static-imports)\r\n\r\n```js\r\nmodule.exports = {\r\n  images: {\r\n    disableStaticImages: true,\r\n  },\r\n}\r\n```\r\n\r\n### To Reproduce\r\n\r\nPaste below code into your next.config.js\r\n\r\n```js\r\n// @ts-check\r\n\r\n/**\r\n * @type {import('next').NextConfig}\r\n */\r\nconst nextConfig = {\r\n  images: {\r\n    disableStaticImages: true,\r\n  },\r\n};\r\n\r\nmodule.exports = nextConfig;\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28706","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28706/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28706/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28706/events","html_url":"https://github.com/vercel/next.js/issues/28706","id":985109835,"node_id":"MDU6SXNzdWU5ODUxMDk4MzU=","number":28706,"title":"Router push does not work on IOS VKWebView","user":{"login":"srcnalt","id":3163281,"node_id":"MDQ6VXNlcjMxNjMyODE=","avatar_url":"https://avatars.githubusercontent.com/u/3163281?v=4","gravatar_id":"","url":"https://api.github.com/users/srcnalt","html_url":"https://github.com/srcnalt","followers_url":"https://api.github.com/users/srcnalt/followers","following_url":"https://api.github.com/users/srcnalt/following{/other_user}","gists_url":"https://api.github.com/users/srcnalt/gists{/gist_id}","starred_url":"https://api.github.com/users/srcnalt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srcnalt/subscriptions","organizations_url":"https://api.github.com/users/srcnalt/orgs","repos_url":"https://api.github.com/users/srcnalt/repos","events_url":"https://api.github.com/users/srcnalt/events{/privacy}","received_events_url":"https://api.github.com/users/srcnalt/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-09-01T12:48:00Z","updated_at":"2021-09-01T13:36:53Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\r\n\r\n10.2.3\r\n\r\n### What version of Node.js are you using?\r\n\r\n14.17.1\r\n\r\n### What browser are you using?\r\n\r\nSafari, VKWebView\r\n\r\n### What operating system are you using?\r\n\r\nIOS 14\r\n\r\n### How are you deploying your application?\r\n\r\nVercel\r\n\r\n### Describe the Bug\r\n\r\nI am working on a application that hosts a browser using VKWebView. Calling `router.push` in a function does not take any effect. However `router.push` works in `getServerSideProps/getStaticProps`.\r\n\r\n```jsx\r\nconst router = useRouter()\r\n\r\nconst handleOnClick = (event: any) => {\r\n  event?.preventDefault()\r\n  ...\r\n  const redirected = await router.push(\"/testpage\")\r\n  console.log(redirected) //is true but not redirected\r\n}\r\n```\r\n\r\n### Expected Behavior\r\n\r\n`router.push` to redirect user to given path\r\n\r\n### To Reproduce\r\n\r\n- Will need to create a IOS app with webview and load a nextjs app with similar code.\r\n\r\n```jsx\r\nimport { useRouter } from 'next/router'\r\n\r\nexport default function Home(){\r\n  const router = useRouter()\r\n\r\n  const handleOnClick = (event: any) => {\r\n    event?.preventDefault()\r\n    ...\r\n    router.push(\"/testpage\")\r\n  }\r\n\r\n  return <div onClick={handleOnClick}>Test</div> \r\n}\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28705","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28705/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28705/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28705/events","html_url":"https://github.com/vercel/next.js/issues/28705","id":985066187,"node_id":"MDU6SXNzdWU5ODUwNjYxODc=","number":28705,"title":"`await` breaks dead code elimination","user":{"login":"ViliamKopecky","id":316435,"node_id":"MDQ6VXNlcjMxNjQzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/316435?v=4","gravatar_id":"","url":"https://api.github.com/users/ViliamKopecky","html_url":"https://github.com/ViliamKopecky","followers_url":"https://api.github.com/users/ViliamKopecky/followers","following_url":"https://api.github.com/users/ViliamKopecky/following{/other_user}","gists_url":"https://api.github.com/users/ViliamKopecky/gists{/gist_id}","starred_url":"https://api.github.com/users/ViliamKopecky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ViliamKopecky/subscriptions","organizations_url":"https://api.github.com/users/ViliamKopecky/orgs","repos_url":"https://api.github.com/users/ViliamKopecky/repos","events_url":"https://api.github.com/users/ViliamKopecky/events{/privacy}","received_events_url":"https://api.github.com/users/ViliamKopecky/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-09-01T12:03:03Z","updated_at":"2021-09-01T12:03:03Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\n\n11.1.2 (but works the same in 10)\n\n### What version of Node.js are you using?\n\n14.17.0\n\n### What browser are you using?\n\nChrome (not important)\n\n### What operating system are you using?\n\nmacOS\n\n### How are you deploying your application?\n\nvercel\n\n### Describe the Bug\n\nUsing `await` inside condition disables it's dead code elimination support.\r\n\r\n```ts\r\nif (!process.browser) {\r\n    console.log(\"this is correcly deleted from browser build\");\r\n}\r\n```\r\n\r\n```ts\r\nif (!process.browser) {\r\n    // this await breaks dead code elimination\r\n    await new Promise((res) => res(null));\r\n    console.log(\"this should not be available in browser build\");\r\n}\r\n```\r\n\n\n### Expected Behavior\n\nCode inside the condition should be eliminated even if it contains `await`\n\n### To Reproduce\n\nExample repository: https://github.com/ViliamKopecky/bugreport-nextjs-await-breaks-dead-code-elimination","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28671","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28671/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28671/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28671/events","html_url":"https://github.com/vercel/next.js/issues/28671","id":984131404,"node_id":"MDU6SXNzdWU5ODQxMzE0MDQ=","number":28671,"title":"Head title gets reset after a certain timeout","user":{"login":"Miro8896","id":73107396,"node_id":"MDQ6VXNlcjczMTA3Mzk2","avatar_url":"https://avatars.githubusercontent.com/u/73107396?v=4","gravatar_id":"","url":"https://api.github.com/users/Miro8896","html_url":"https://github.com/Miro8896","followers_url":"https://api.github.com/users/Miro8896/followers","following_url":"https://api.github.com/users/Miro8896/following{/other_user}","gists_url":"https://api.github.com/users/Miro8896/gists{/gist_id}","starred_url":"https://api.github.com/users/Miro8896/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Miro8896/subscriptions","organizations_url":"https://api.github.com/users/Miro8896/orgs","repos_url":"https://api.github.com/users/Miro8896/repos","events_url":"https://api.github.com/users/Miro8896/events{/privacy}","received_events_url":"https://api.github.com/users/Miro8896/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2021-08-31T17:52:30Z","updated_at":"2021-09-01T19:41:31Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\n\n11.1.0\n\n### What version of Node.js are you using?\n\n12.18.3\n\n### What browser are you using?\n\nGoogle Chrome\n\n### What operating system are you using?\n\nmacOS\n\n### How are you deploying your application?\n\nVercel\n\n### Describe the Bug\n\nHello,\r\n\r\nMe and my team are building a platform and we're using `next/head` for our title tags (tab name), but for some reason, after a certain timeout, it simply resets to `https://localhost:3000/etc` without any clear explanation. What could be the reason? We're calling the `<Head>` component in three different places, but that shouldn't be the problem.\r\n\r\nFirst place (`_document.js`):\r\n```\r\n<Head>\r\n    <script\r\n        dangerouslySetInnerHTML={{\r\n             __html: this.renderSnippet(),\r\n        }}\r\n     />\r\n</Head>\r\n```\r\n\r\nSecond place:\r\n```\r\n{!queries && (\r\n    <Head>\r\n        <title>\r\n            {args.name} | {props.title || 'Loading...'}\r\n        </title>\r\n     </Head>\r\n)}\r\n```\r\n\r\nThird place: \r\n```\r\n<Head>  \r\n    <title>\r\n        {`${args.name} | ${loading ? 'Loading...' : overwrite}`}\r\n    </title>\r\n</Head>\r\n```\n\n### Expected Behavior\n\nI'd expect it to always show whatever content I'm placing inside the `<title>` tags. I've even went as far as hardcoding some text there and it still resets it. And it happens randomly, after a certain amount of time, it's unrelated to user input, state changes or even hot reload on local. In the second place where we call it it's the most top component we render on the page, as part of the `<App />`. Any clue what might be causing this?\n\n### To Reproduce\n\nShouldn't be too difficult to reproduce, simply called the `<Head>` inside a top level component, after calling it in `_document.js`, and wait for about twenty seconds and it'll reset.","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28670","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28670/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28670/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28670/events","html_url":"https://github.com/vercel/next.js/pull/28670","id":984129235,"node_id":"MDExOlB1bGxSZXF1ZXN0NzIzNTk5NzMz","number":28670,"title":"Allow dynamic HTML responses for non-crawlers","user":{"login":"devknoll","id":1477230,"node_id":"MDQ6VXNlcjE0NzcyMzA=","avatar_url":"https://avatars.githubusercontent.com/u/1477230?v=4","gravatar_id":"","url":"https://api.github.com/users/devknoll","html_url":"https://github.com/devknoll","followers_url":"https://api.github.com/users/devknoll/followers","following_url":"https://api.github.com/users/devknoll/following{/other_user}","gists_url":"https://api.github.com/users/devknoll/gists{/gist_id}","starred_url":"https://api.github.com/users/devknoll/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devknoll/subscriptions","organizations_url":"https://api.github.com/users/devknoll/orgs","repos_url":"https://api.github.com/users/devknoll/repos","events_url":"https://api.github.com/users/devknoll/events{/privacy}","received_events_url":"https://api.github.com/users/devknoll/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":3129154254,"node_id":"MDU6TGFiZWwzMTI5MTU0MjU0","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Chrome%20Aurora","name":"created-by: Chrome Aurora","color":"000000","default":false,"description":"The Google Chrome team: https://web.dev/aurora"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2021-08-31T17:50:02Z","updated_at":"2021-09-01T06:38:04Z","closed_at":null,"author_association":"COLLABORATOR","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28670","html_url":"https://github.com/vercel/next.js/pull/28670","diff_url":"https://github.com/vercel/next.js/pull/28670.diff","patch_url":"https://github.com/vercel/next.js/pull/28670.patch"},"body":"Allow sending dynamic (i.e. streaming) responses to real (i.e. non-crawler) clients.","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28664","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28664/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28664/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28664/events","html_url":"https://github.com/vercel/next.js/issues/28664","id":984010932,"node_id":"MDU6SXNzdWU5ODQwMTA5MzI=","number":28664,"title":"Exported static website looses styling for only 1 page when refreshed or direct landing (with updated findings)","user":{"login":"Shrivallabh","id":1617956,"node_id":"MDQ6VXNlcjE2MTc5NTY=","avatar_url":"https://avatars.githubusercontent.com/u/1617956?v=4","gravatar_id":"","url":"https://api.github.com/users/Shrivallabh","html_url":"https://github.com/Shrivallabh","followers_url":"https://api.github.com/users/Shrivallabh/followers","following_url":"https://api.github.com/users/Shrivallabh/following{/other_user}","gists_url":"https://api.github.com/users/Shrivallabh/gists{/gist_id}","starred_url":"https://api.github.com/users/Shrivallabh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Shrivallabh/subscriptions","organizations_url":"https://api.github.com/users/Shrivallabh/orgs","repos_url":"https://api.github.com/users/Shrivallabh/repos","events_url":"https://api.github.com/users/Shrivallabh/events{/privacy}","received_events_url":"https://api.github.com/users/Shrivallabh/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-08-31T15:42:11Z","updated_at":"2021-09-01T09:05:39Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\r\n\r\n11.1.0\r\n\r\n### What version of Node.js are you using?\r\n\r\n16+\r\n\r\n### What browser are you using?\r\n\r\nChrome\r\n\r\n### What operating system are you using?\r\n\r\nmacOs\r\n\r\n### How are you deploying your application?\r\n\r\nnext export\r\n\r\n### Describe the Bug\r\n\r\nWhen we navigate to the page through nextjs router the page renders fine.\r\n\r\nHowever, when directly accessing the page or performing a refresh, the page loses all its styling.\r\n\r\nThere is a complete mismatch in the name of the style and the style. All styles are expected on the page. Only the name is not matching and therefore the style is getting applied to a random element in dom.\r\n\r\nHere is a [stack overflow discussion](https://stackoverflow.com/questions/60060544/page-refresh-break-styles-on-nextjs-production-app) about similar experience.\r\n\r\nFor me, I have triple-checked the implementation for _app and _document for material ui. I have other implementations that are running fine. The problem is only on specific pages and only for one website.\r\n\r\nI tried dynamic load and it is not rendering the component when export is used. I am not sure if that is the expected behavior, but SSR is different then static export. And the suggestion seems to be for SSR.\r\n\r\nThe code for the website can be found [here](https://gitlab.com/Shrivallabh/next-export-issue)\r\n\r\n### Expected Behavior\r\n\r\nThe style names should always match.\r\n\r\n### To Reproduce\r\n\r\nDirectly access the [page](https://www.bluetrumpets.com/we-create)","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28656","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28656/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28656/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28656/events","html_url":"https://github.com/vercel/next.js/issues/28656","id":983849970,"node_id":"MDU6SXNzdWU5ODM4NDk5NzA=","number":28656,"title":"\"Invalid hook call\" in 11.1.2","user":{"login":"Ultharite","id":49991330,"node_id":"MDQ6VXNlcjQ5OTkxMzMw","avatar_url":"https://avatars.githubusercontent.com/u/49991330?v=4","gravatar_id":"","url":"https://api.github.com/users/Ultharite","html_url":"https://github.com/Ultharite","followers_url":"https://api.github.com/users/Ultharite/followers","following_url":"https://api.github.com/users/Ultharite/following{/other_user}","gists_url":"https://api.github.com/users/Ultharite/gists{/gist_id}","starred_url":"https://api.github.com/users/Ultharite/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ultharite/subscriptions","organizations_url":"https://api.github.com/users/Ultharite/orgs","repos_url":"https://api.github.com/users/Ultharite/repos","events_url":"https://api.github.com/users/Ultharite/events{/privacy}","received_events_url":"https://api.github.com/users/Ultharite/received_events","type":"User","site_admin":false},"labels":[{"id":482888042,"node_id":"MDU6TGFiZWw0ODI4ODgwNDI=","url":"https://api.github.com/repos/vercel/next.js/labels/please%20add%20a%20complete%20reproduction","name":"please add a complete reproduction","color":"fbca04","default":false,"description":""},{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":21,"created_at":"2021-08-31T13:14:42Z","updated_at":"2021-09-04T15:23:36Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\n\n11.1.2\n\n### What version of Node.js are you using?\n\n14.17.0\n\n### What browser are you using?\n\nChrome\n\n### What operating system are you using?\n\nWindows 10\n\n### How are you deploying your application?\n\nnext dev\n\n### Describe the Bug\n\nThe CSS issue in Windows is cleared up, but this new one appears on any fresh NextJS project:\r\n\r\n`Server Error\r\nError: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:\r\n1. You might have mismatching versions of React and the renderer (such as React DOM)\r\n2. You might be breaking the Rules of Hooks\r\n3. You might have more than one copy of React in the same app\r\nSee https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.`\n\n### Expected Behavior\n\nNextJS would work as it did before 11.1.1.\n\n### To Reproduce\n\nnpx create-next-app (anything)","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28652","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28652/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28652/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28652/events","html_url":"https://github.com/vercel/next.js/pull/28652","id":983810170,"node_id":"MDExOlB1bGxSZXF1ZXN0NzIzMzI5Njg2","number":28652,"title":"with-stitches example fixes #28650","user":{"login":"RobEasthope","id":2979919,"node_id":"MDQ6VXNlcjI5Nzk5MTk=","avatar_url":"https://avatars.githubusercontent.com/u/2979919?v=4","gravatar_id":"","url":"https://api.github.com/users/RobEasthope","html_url":"https://github.com/RobEasthope","followers_url":"https://api.github.com/users/RobEasthope/followers","following_url":"https://api.github.com/users/RobEasthope/following{/other_user}","gists_url":"https://api.github.com/users/RobEasthope/gists{/gist_id}","starred_url":"https://api.github.com/users/RobEasthope/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RobEasthope/subscriptions","organizations_url":"https://api.github.com/users/RobEasthope/orgs","repos_url":"https://api.github.com/users/RobEasthope/repos","events_url":"https://api.github.com/users/RobEasthope/events{/privacy}","received_events_url":"https://api.github.com/users/RobEasthope/received_events","type":"User","site_admin":false},"labels":[{"id":549032284,"node_id":"MDU6TGFiZWw1NDkwMzIyODQ=","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20example","name":"type: example","color":"ecffaf","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-31T12:33:30Z","updated_at":"2021-09-01T20:58:54Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28652","html_url":"https://github.com/vercel/next.js/pull/28652","diff_url":"https://github.com/vercel/next.js/pull/28652.diff","patch_url":"https://github.com/vercel/next.js/pull/28652.patch"},"body":"The with-stitches example is broken presumably due to changes in the Stitches API now that it's hit `1.0.0`. I've created an issue already: #28650 \r\n\r\nI've made three small changes:\r\n- Replaced the createCss function in `stitcheds.config.js` with createStitches\r\n- Replaced the getCssString function with getCssText  in `stitches.config.js` and `pages/_documents.jsx`\r\n- Bumped `@stitches/react` to `^1.0.0` \uD83C\uDF89\r\n\r\nI've left the rest of the example code alone as I'm still exploring the library after seeing yesterdays release annoucement.\r\n\r\n@peduarte Is there anything else that needs to updated?\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28651","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28651/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28651/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28651/events","html_url":"https://github.com/vercel/next.js/issues/28651","id":983809153,"node_id":"MDU6SXNzdWU5ODM4MDkxNTM=","number":28651,"title":"Components do not receive SSR/SSG props on loopback redirects with hash","user":{"login":"anders-nom","id":18137669,"node_id":"MDQ6VXNlcjE4MTM3NjY5","avatar_url":"https://avatars.githubusercontent.com/u/18137669?v=4","gravatar_id":"","url":"https://api.github.com/users/anders-nom","html_url":"https://github.com/anders-nom","followers_url":"https://api.github.com/users/anders-nom/followers","following_url":"https://api.github.com/users/anders-nom/following{/other_user}","gists_url":"https://api.github.com/users/anders-nom/gists{/gist_id}","starred_url":"https://api.github.com/users/anders-nom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anders-nom/subscriptions","organizations_url":"https://api.github.com/users/anders-nom/orgs","repos_url":"https://api.github.com/users/anders-nom/repos","events_url":"https://api.github.com/users/anders-nom/events{/privacy}","received_events_url":"https://api.github.com/users/anders-nom/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-31T12:32:21Z","updated_at":"2021-08-31T12:36:36Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\r\n\r\n11.1.2\r\n\r\n### What version of Node.js are you using?\r\n\r\n16.8.0\r\n\r\n### What browser are you using?\r\n\r\nChrome\r\n\r\n### What operating system are you using?\r\n\r\nWindows 10/Alpine Linux\r\n\r\n### How are you deploying your application?\r\n\r\nnext start\r\n\r\n### Describe the Bug\r\n\r\nThis bug has been observed when redirecting via a SSR or SSG dynamic route under these conditions:\r\n- The client-side source and redirect destination paths are the same\r\n- The path which triggers the redirect is handled by same route as the source/destination path\r\n- The source and/or destination URL contains a hash (including an empty hash)\r\n\r\nIf all these conditions are true, the component exported from the route does not receive the props returned from the getServerSideProps/getStaticProps function. Instead, an internal next.js redirect object is received, i.e. `{ __N_REDIRECT: \"/myPage\", __N_REDIRECT_STATUS: 307 }`\r\n\r\nExample: the user is currently viewing /myPage#myHash, and clicks a link which redirects to /myPage (with or without a hash). If this redirect happens within the same dynamic route that handles /myPage, the component exported from this route will receive incorrect props as described above. However, if the redirect is handled in a separate route, no problem seems to occur and the correct props are received.\r\n\r\nOur current workaround for the issue is to check for the __N_REDIRECT value in the props of the exported component, and run router.reload() when it is present.\r\n\r\n### Expected Behavior\r\n\r\nComponents exported from an SSR/SSG route should always receive the props returned from getServerSideProps/getStaticProps.\r\n\r\n### To Reproduce\r\n\r\n- Clone https://github.com/anders-nom/nextjs-hash-redirect-bug\r\n- `npm run build`\r\n- `npm run start`\r\n- Go to http://localhost:3000\r\n- Click the link which leads to /myPage#myHash\r\n- Observe the aforementioned behaviour when clicking the second link on this page, which triggers a redirect through the same catch-all route that handles /myPage. The first link will however work as expected, as the redirect happens in a separate route.","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28650","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28650/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28650/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28650/events","html_url":"https://github.com/vercel/next.js/issues/28650","id":983808200,"node_id":"MDU6SXNzdWU5ODM4MDgyMDA=","number":28650,"title":"Witth-stitches example won't compile","user":{"login":"RobEasthope","id":2979919,"node_id":"MDQ6VXNlcjI5Nzk5MTk=","avatar_url":"https://avatars.githubusercontent.com/u/2979919?v=4","gravatar_id":"","url":"https://api.github.com/users/RobEasthope","html_url":"https://github.com/RobEasthope","followers_url":"https://api.github.com/users/RobEasthope/followers","following_url":"https://api.github.com/users/RobEasthope/following{/other_user}","gists_url":"https://api.github.com/users/RobEasthope/gists{/gist_id}","starred_url":"https://api.github.com/users/RobEasthope/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RobEasthope/subscriptions","organizations_url":"https://api.github.com/users/RobEasthope/orgs","repos_url":"https://api.github.com/users/RobEasthope/repos","events_url":"https://api.github.com/users/RobEasthope/events{/privacy}","received_events_url":"https://api.github.com/users/RobEasthope/received_events","type":"User","site_admin":false},"labels":[{"id":549032284,"node_id":"MDU6TGFiZWw1NDkwMzIyODQ=","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20example","name":"type: example","color":"ecffaf","default":false,"description":""},{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-31T12:31:16Z","updated_at":"2021-08-31T12:34:53Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What example does this report relate to?\n\nwith-stitches\n\n### What version of Next.js are you using?\n\n11.1.2\n\n### What version of Node.js are you using?\n\n16.7.0\n\n### What browser are you using?\n\nFirefox\n\n### What operating system are you using?\n\nmacOS\n\n### How are you deploying your application?\n\nnext start\n\n### Describe the Bug\n\nWhen trying spin up the with-stitches example I get this error message:\r\n\r\n```TypeError: (0 , _stitches_react__WEBPACK_IMPORTED_MODULE_0__.createCss) is not a function```\r\n\r\nI assume that this is due to changes in the Stitches API since the example was created.\n\n### Expected Behavior\n\nThe example to work first time\n\n### To Reproduce\n\nRun `yarn create next-app --example with-stitches with-stitches-app` and spin the dev instanse as usual with `yarn dev`","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28646","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28646/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28646/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28646/events","html_url":"https://github.com/vercel/next.js/pull/28646","id":983673482,"node_id":"MDExOlB1bGxSZXF1ZXN0NzIzMjEyNDE1","number":28646,"title":"Adopt context based experimental styled-jsx version","user":{"login":"huozhi","id":4800338,"node_id":"MDQ6VXNlcjQ4MDAzMzg=","avatar_url":"https://avatars.githubusercontent.com/u/4800338?v=4","gravatar_id":"","url":"https://api.github.com/users/huozhi","html_url":"https://github.com/huozhi","followers_url":"https://api.github.com/users/huozhi/followers","following_url":"https://api.github.com/users/huozhi/following{/other_user}","gists_url":"https://api.github.com/users/huozhi/gists{/gist_id}","starred_url":"https://api.github.com/users/huozhi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huozhi/subscriptions","organizations_url":"https://api.github.com/users/huozhi/orgs","repos_url":"https://api.github.com/users/huozhi/repos","events_url":"https://api.github.com/users/huozhi/events{/privacy}","received_events_url":"https://api.github.com/users/huozhi/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"The Next.js team at Vercel"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2021-08-31T10:00:00Z","updated_at":"2021-09-02T06:08:14Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28646","html_url":"https://github.com/vercel/next.js/pull/28646","diff_url":"https://github.com/vercel/next.js/pull/28646.diff","patch_url":"https://github.com/vercel/next.js/pull/28646.patch"},"body":"Integrate experimental (concurrent mode) version of styled-jsx to unblock streaming work\r\n\r\n* Wrap `<StyleRegistry>` on App\r\n* use `useStyleRegistry` to access style registry and flush styles to JSX elements\r\n* add `defaultGetInitialProps` in `DocumentContext` to return jsx styles\r\n\r\n- [ ] Once this PR is approved, will publish a new version of styled-jsx\r\n- [ ] Replace the version resolution in package.json\r\n\r\n\r\nrelated: https://github.com/vercel/styled-jsx/pull/721","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28638","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28638/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28638/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28638/events","html_url":"https://github.com/vercel/next.js/issues/28638","id":983480362,"node_id":"MDU6SXNzdWU5ODM0ODAzNjI=","number":28638,"title":"InferGetStaticPropsType not working as expected","user":{"login":"livelo-app","id":62419998,"node_id":"MDQ6VXNlcjYyNDE5OTk4","avatar_url":"https://avatars.githubusercontent.com/u/62419998?v=4","gravatar_id":"","url":"https://api.github.com/users/livelo-app","html_url":"https://github.com/livelo-app","followers_url":"https://api.github.com/users/livelo-app/followers","following_url":"https://api.github.com/users/livelo-app/following{/other_user}","gists_url":"https://api.github.com/users/livelo-app/gists{/gist_id}","starred_url":"https://api.github.com/users/livelo-app/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/livelo-app/subscriptions","organizations_url":"https://api.github.com/users/livelo-app/orgs","repos_url":"https://api.github.com/users/livelo-app/repos","events_url":"https://api.github.com/users/livelo-app/events{/privacy}","received_events_url":"https://api.github.com/users/livelo-app/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-08-31T06:08:48Z","updated_at":"2021-08-31T06:42:44Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\r\n\r\n11.1.0\r\n\r\n### What version of Node.js are you using?\r\n\r\n14.17.3\r\n\r\n### What browser are you using?\r\n\r\nChrome\r\n\r\n### What operating system are you using?\r\n\r\nmacOS\r\n\r\n### How are you deploying your application?\r\n\r\nVercel\r\n\r\n### Describe the Bug\r\n\r\nWhen attempting to use `InferGetStaticPropsType` I am getting my parameters' type as `never`.\r\n\r\nThe following link describes my issue.\r\n\r\nhttps://github.com/vercel/next.js/pull/11842#issuecomment-651292487\r\n\r\nTo better explain the bug - the bug only occurs if I include the following in `getStaticProps`:\r\n```\r\n  if (!res) {\r\n    return {\r\n      notFound: true\r\n    }\r\n  }\r\n\r\n  if (res.length === 1) {\r\n    return {\r\n      redirect : {\r\n        destination: `/city/sydney`,\r\n        permanent: false\r\n      }\r\n    }\r\n  }\r\n```\r\n\r\nIt seems that including:\r\n```\r\n    return {\r\n      notFound: true\r\n    }\r\n```\r\nand:\r\n```\r\n    return {\r\n      redirect : {\r\n        destination: `/city/sydney`,\r\n        permanent: false\r\n      }\r\n    }\r\n```\r\nwill not allow for `InferGetStaticPropsType` to infer the _correct_ type.\r\n\r\nIt also seems that including the type `GetStaticPaths` and `GetStaticProps` will force the `InferGetStaticPropsType` to return  `any` as the type as seen in the thread below.\r\nhttps://github.com/vercel/next.js/pull/11842#issuecomment-635459597\r\n\r\nI believe the most important bug to fix in this case is that the infer for `getStaticProps` only works in the case where we **only** return `props`. Not in the face where we _may_ return `redirect` or `notFound`.\r\n### Expected Behavior\r\n\r\nMy static props type should be inferred however they currently are not.\r\n\r\n### To Reproduce\r\n\r\nSet strict mode enabled and attempt to use InferGetStaticPropsType.","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28637","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28637/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28637/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28637/events","html_url":"https://github.com/vercel/next.js/pull/28637","id":983402561,"node_id":"MDExOlB1bGxSZXF1ZXN0NzIyOTg1NTg1","number":28637,"title":"fixes with-typescript-graphql: unable to resolve dependency tree","user":{"login":"msp5382","id":35285106,"node_id":"MDQ6VXNlcjM1Mjg1MTA2","avatar_url":"https://avatars.githubusercontent.com/u/35285106?v=4","gravatar_id":"","url":"https://api.github.com/users/msp5382","html_url":"https://github.com/msp5382","followers_url":"https://api.github.com/users/msp5382/followers","following_url":"https://api.github.com/users/msp5382/following{/other_user}","gists_url":"https://api.github.com/users/msp5382/gists{/gist_id}","starred_url":"https://api.github.com/users/msp5382/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/msp5382/subscriptions","organizations_url":"https://api.github.com/users/msp5382/orgs","repos_url":"https://api.github.com/users/msp5382/repos","events_url":"https://api.github.com/users/msp5382/events{/privacy}","received_events_url":"https://api.github.com/users/msp5382/received_events","type":"User","site_admin":false},"labels":[{"id":549032284,"node_id":"MDU6TGFiZWw1NDkwMzIyODQ=","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20example","name":"type: example","color":"ecffaf","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-31T03:31:23Z","updated_at":"2021-08-31T03:31:26Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28637","html_url":"https://github.com/vercel/next.js/pull/28637","diff_url":"https://github.com/vercel/next.js/pull/28637.diff","patch_url":"https://github.com/vercel/next.js/pull/28637.patch"},"body":"Example `with-typescript-graphql`has unmatched dependency tree in `react-test-renderer` lead to error in #28582, I changed version of `react-test-renderer` to `^17.0.1` and fix that issue.","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28634","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28634/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28634/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28634/events","html_url":"https://github.com/vercel/next.js/pull/28634","id":983333402,"node_id":"MDExOlB1bGxSZXF1ZXN0NzIyOTI3OTY4","number":28634,"title":"Update test set-up to leverage playwright when able to","user":{"login":"ijjk","id":22380829,"node_id":"MDQ6VXNlcjIyMzgwODI5","avatar_url":"https://avatars.githubusercontent.com/u/22380829?v=4","gravatar_id":"","url":"https://api.github.com/users/ijjk","html_url":"https://github.com/ijjk","followers_url":"https://api.github.com/users/ijjk/followers","following_url":"https://api.github.com/users/ijjk/following{/other_user}","gists_url":"https://api.github.com/users/ijjk/gists{/gist_id}","starred_url":"https://api.github.com/users/ijjk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijjk/subscriptions","organizations_url":"https://api.github.com/users/ijjk/orgs","repos_url":"https://api.github.com/users/ijjk/repos","events_url":"https://api.github.com/users/ijjk/events{/privacy}","received_events_url":"https://api.github.com/users/ijjk/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"The Next.js team at Vercel"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-08-31T00:57:43Z","updated_at":"2021-09-04T17:06:51Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28634","html_url":"https://github.com/vercel/next.js/pull/28634","diff_url":"https://github.com/vercel/next.js/pull/28634.diff","patch_url":"https://github.com/vercel/next.js/pull/28634.patch"},"body":"This updates our `next-webdriver` test util to allow leveraging selenium or playwright for testing so that we can leverage playwright without having to drop testing IE11 and older safari versions. By default playwright with chromium will be used so that contributors/CI doesn't need to worry about having chrome and the matching `chromedriver` version installed to run the tests correctly. \r\n\r\nThis also disables running tests concurrently inside of the same VM in CI as this seems to introduce higher probability for tests flaking from sharing fs watch events for development tests. Furthermore, tests retrying has been brought down to 1 and will ideally be removed entirely as we don't want to have tests that need to be retried at all. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28601","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28601/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28601/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28601/events","html_url":"https://github.com/vercel/next.js/pull/28601","id":982200332,"node_id":"MDExOlB1bGxSZXF1ZXN0NzIyMDE2OTM2","number":28601,"title":"Fix Typo in \"with-eslint\" Example docs","user":{"login":"appsplash99","id":65857855,"node_id":"MDQ6VXNlcjY1ODU3ODU1","avatar_url":"https://avatars.githubusercontent.com/u/65857855?v=4","gravatar_id":"","url":"https://api.github.com/users/appsplash99","html_url":"https://github.com/appsplash99","followers_url":"https://api.github.com/users/appsplash99/followers","following_url":"https://api.github.com/users/appsplash99/following{/other_user}","gists_url":"https://api.github.com/users/appsplash99/gists{/gist_id}","starred_url":"https://api.github.com/users/appsplash99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/appsplash99/subscriptions","organizations_url":"https://api.github.com/users/appsplash99/orgs","repos_url":"https://api.github.com/users/appsplash99/repos","events_url":"https://api.github.com/users/appsplash99/events{/privacy}","received_events_url":"https://api.github.com/users/appsplash99/received_events","type":"User","site_admin":false},"labels":[{"id":549032284,"node_id":"MDU6TGFiZWw1NDkwMzIyODQ=","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20example","name":"type: example","color":"ecffaf","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-29T20:51:57Z","updated_at":"2021-09-04T10:21:31Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28601","html_url":"https://github.com/vercel/next.js/pull/28601","diff_url":"https://github.com/vercel/next.js/pull/28601.diff","patch_url":"https://github.com/vercel/next.js/pull/28601.patch"},"body":"Earlier it was:\r\n\r\n```bash\r\nnpx create-next-app --example with-eslint with-eslint\r\n# or\r\nyarn create next-app --example with-eslint with-eslint\r\n```\r\n\r\nIt was confusing for me, \r\nas i couldn't identify which one is *example-name* and which one is *folder-name* (for *with-eslint*).\r\n\r\nI checked other example folders and was able to digest the stuff.\r\nBut if a new programmer comes who is not familiar with next/npx,\r\nthis could have took some time to understand.\r\n\r\nAnd Hence i modified the cmd it to  the below, for better understanding:\r\n\r\n```bash\r\nnpx create-next-app --example with-eslint with-eslint-app\r\n# or\r\nyarn create next-app --example with-eslint with-eslint-app\r\n```\r\n\r\n## Documentation / Examples\r\n\r\n- [X] Make sure the linting passes\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28598","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28598/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28598/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28598/events","html_url":"https://github.com/vercel/next.js/issues/28598","id":982123932,"node_id":"MDU6SXNzdWU5ODIxMjM5MzI=","number":28598,"title":"Custom Headers won't work properly under 11.x","user":{"login":"berkaey","id":4539951,"node_id":"MDQ6VXNlcjQ1Mzk5NTE=","avatar_url":"https://avatars.githubusercontent.com/u/4539951?v=4","gravatar_id":"","url":"https://api.github.com/users/berkaey","html_url":"https://github.com/berkaey","followers_url":"https://api.github.com/users/berkaey/followers","following_url":"https://api.github.com/users/berkaey/following{/other_user}","gists_url":"https://api.github.com/users/berkaey/gists{/gist_id}","starred_url":"https://api.github.com/users/berkaey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/berkaey/subscriptions","organizations_url":"https://api.github.com/users/berkaey/orgs","repos_url":"https://api.github.com/users/berkaey/repos","events_url":"https://api.github.com/users/berkaey/events{/privacy}","received_events_url":"https://api.github.com/users/berkaey/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-29T15:08:24Z","updated_at":"2021-08-29T15:09:32Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\n\n11.1.0\n\n### What version of Node.js are you using?\n\nv16.4.0\n\n### What browser are you using?\n\nAll\n\n### What operating system are you using?\n\nmacOS\n\n### How are you deploying your application?\n\nVercel\n\n### Describe the Bug\n\nAfter updating Next.js to 11, we noticed that custom headers won't work properly when using i18n(maybe without it also)\r\n\r\nWe are using custom api method to optimize svg files on the file;\r\n\r\n1. Case: https://staging.usemagnetiq.com/api/svg/people?color=ff0000\r\nif we use something like this we reach the api but headers won't be applied.\r\n\r\n2. Case: https://staging.usemagnetiq.com/en/api/svg/people\r\nif we use something like this we reach the api, headers are ok but got 404 and svg won't render.\r\n\r\n3. Case: (Same next.js config but 10.x) https://magnetic-web-gnhxim3pg-usemagnetic.vercel.app/api/svg/people\r\nEverything ok.\r\n\r\n```\r\n headers: async () => {\r\n    return [\r\n      {\r\n        source: \"/api/svg/:name\",\r\n        headers: [\r\n          {\r\n            key: \"content-type\",\r\n            value: \"image/svg+xml\",\r\n          },\r\n          {\r\n            key: \"cache-control\",\r\n            value: \"s-maxage=300, stale-while-revalidate\",\r\n          },\r\n        ],\r\n      },\r\n    ];\r\n  },\r\n```\n\n### Expected Behavior\n\nExplained above.\n\n### To Reproduce\n\nExplained above.","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28595","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28595/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28595/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28595/events","html_url":"https://github.com/vercel/next.js/issues/28595","id":981978550,"node_id":"MDU6SXNzdWU5ODE5Nzg1NTA=","number":28595,"title":"experimental-serverless-trace causes components to be loaded as promises","user":{"login":"m50","id":3577147,"node_id":"MDQ6VXNlcjM1NzcxNDc=","avatar_url":"https://avatars.githubusercontent.com/u/3577147?v=4","gravatar_id":"","url":"https://api.github.com/users/m50","html_url":"https://github.com/m50","followers_url":"https://api.github.com/users/m50/followers","following_url":"https://api.github.com/users/m50/following{/other_user}","gists_url":"https://api.github.com/users/m50/gists{/gist_id}","starred_url":"https://api.github.com/users/m50/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/m50/subscriptions","organizations_url":"https://api.github.com/users/m50/orgs","repos_url":"https://api.github.com/users/m50/repos","events_url":"https://api.github.com/users/m50/events{/privacy}","received_events_url":"https://api.github.com/users/m50/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-29T02:51:52Z","updated_at":"2021-08-29T02:51:52Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\n\n11.1.0\n\n### What version of Node.js are you using?\n\n15.5.0\n\n### What browser are you using?\n\nVivaldi\n\n### What operating system are you using?\n\nmacOs\n\n### How are you deploying your application?\n\nNetlify\n\n### Describe the Bug\n\nIf I have target set to `experimental-serverless-trace`, then `next build` fails with:\r\n```\r\n> Build error occurred\r\nError: Build optimization failed: found pages without a React Component as default export in \r\npages/portfolio/instagram\r\npages/portfolio/[slug]\r\n\r\nSee https://nextjs.org/docs/messages/page-without-valid-component for more info.\r\n\r\n    at /Users/marisaclardy/src/github.com/m50/lydiamichelle.com/node_modules/next/dist/build/index.js:597:19\r\n    at async Span.traceAsyncFn (/Users/marisaclardy/src/github.com/m50/lydiamichelle.com/node_modules/next/dist/telemetry/trace/trace.js:60:20)\r\nerror Command failed with exit code 1.\r\ninfo Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.\r\n```\r\n\r\nHowever if I set it `serverless`, then `next build` succeeds without issue.\r\n\r\nWhen digging through it, I noticed that when it loaded the component, it loaded them as a Promise for some reason.\r\n\r\nAdditionally, this started to happen after updating to Next 11.1.0. When I was on Next 10.X.X (don't know exact version anymore, sorry), it built just fine on `experimental-serverless-trace`.\r\n\r\nBoth files default export react components correctly, and neither is particularly strange with regards to how they are built.\r\n\r\nThe only thing of importance, I suppose (though when going through the source, it never makes it to this), is that I use cwebp to process some images (as when I originally built this, next/image wasn't supported on Netlify) in the `getStaticPaths` and `getStaticProps` for at least one of those pages. Again, not sure that is relevant though, because it never even gets to calling those before it dies. cwebp only seems to consistantly work in github actions if the target is set to `experimental-serverless-trace` though, which is why I switched to it in the first place.\n\n### Expected Behavior\n\nBuild should succeed in `experimental-serverless-trace` in Next 11, just like it did in Next 10, and just like it does with target set to `serverless`.\n\n### To Reproduce\n\nNot sure how to reproduce, but you can reproduce it with this github repo: https://github.com/m50/lydiamichelle.com\r\n\r\nChanging the config between the two, you can see the behaviour.\r\n\r\nNot sure what exactly is causing it though.\r\n\r\nI narrowed it down to the three lines at `src/templates/Series/index.tsx:31`:\r\n\r\n```tsx\r\n      {series.body && <Body content={series.body} />}\r\n      <ImageGrid images={series.images} onImageClick={onImageClick} />\r\n      {selectedImage && <ImageModal onClickAway={onOutsideClick} image={selectedImage} />}\r\n```\r\n\r\nIf I comment all three of those lines out, it builds. But if any of them are there, it fails to load. Not sure what it is about those three that are problematic though....","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28593","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28593/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28593/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28593/events","html_url":"https://github.com/vercel/next.js/issues/28593","id":981967630,"node_id":"MDU6SXNzdWU5ODE5Njc2MzA=","number":28593,"title":"ReferenceError when using next/script in  beforeInteractive strategy ","user":{"login":"zero734kr","id":51540538,"node_id":"MDQ6VXNlcjUxNTQwNTM4","avatar_url":"https://avatars.githubusercontent.com/u/51540538?v=4","gravatar_id":"","url":"https://api.github.com/users/zero734kr","html_url":"https://github.com/zero734kr","followers_url":"https://api.github.com/users/zero734kr/followers","following_url":"https://api.github.com/users/zero734kr/following{/other_user}","gists_url":"https://api.github.com/users/zero734kr/gists{/gist_id}","starred_url":"https://api.github.com/users/zero734kr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zero734kr/subscriptions","organizations_url":"https://api.github.com/users/zero734kr/orgs","repos_url":"https://api.github.com/users/zero734kr/repos","events_url":"https://api.github.com/users/zero734kr/events{/privacy}","received_events_url":"https://api.github.com/users/zero734kr/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":{"login":"housseindjirdeh","id":12476932,"node_id":"MDQ6VXNlcjEyNDc2OTMy","avatar_url":"https://avatars.githubusercontent.com/u/12476932?v=4","gravatar_id":"","url":"https://api.github.com/users/housseindjirdeh","html_url":"https://github.com/housseindjirdeh","followers_url":"https://api.github.com/users/housseindjirdeh/followers","following_url":"https://api.github.com/users/housseindjirdeh/following{/other_user}","gists_url":"https://api.github.com/users/housseindjirdeh/gists{/gist_id}","starred_url":"https://api.github.com/users/housseindjirdeh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/housseindjirdeh/subscriptions","organizations_url":"https://api.github.com/users/housseindjirdeh/orgs","repos_url":"https://api.github.com/users/housseindjirdeh/repos","events_url":"https://api.github.com/users/housseindjirdeh/events{/privacy}","received_events_url":"https://api.github.com/users/housseindjirdeh/received_events","type":"User","site_admin":false},"assignees":[{"login":"housseindjirdeh","id":12476932,"node_id":"MDQ6VXNlcjEyNDc2OTMy","avatar_url":"https://avatars.githubusercontent.com/u/12476932?v=4","gravatar_id":"","url":"https://api.github.com/users/housseindjirdeh","html_url":"https://github.com/housseindjirdeh","followers_url":"https://api.github.com/users/housseindjirdeh/followers","following_url":"https://api.github.com/users/housseindjirdeh/following{/other_user}","gists_url":"https://api.github.com/users/housseindjirdeh/gists{/gist_id}","starred_url":"https://api.github.com/users/housseindjirdeh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/housseindjirdeh/subscriptions","organizations_url":"https://api.github.com/users/housseindjirdeh/orgs","repos_url":"https://api.github.com/users/housseindjirdeh/repos","events_url":"https://api.github.com/users/housseindjirdeh/events{/privacy}","received_events_url":"https://api.github.com/users/housseindjirdeh/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2021-08-29T01:25:53Z","updated_at":"2021-09-02T15:39:01Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\r\n\r\n11.1.0\r\n\r\n### What version of Node.js are you using?\r\n\r\n14.17.5\r\n\r\n### What browser are you using?\r\n\r\nGoogle Chrome 92.0.4515.159\r\n\r\n### What operating system are you using?\r\n\r\nLinux Mint 20.2\r\n\r\n### How are you deploying your application?\r\n\r\nVercel\r\n\r\n### Describe the Bug\r\n\r\n(Error only when I use ``yarn build``.)\r\n\r\nSince I updated next.js to v11.1.0, the following error is causing the build to fail.\r\n\r\n```\r\nError occurred prerendering page \"/\". Read more: https://nextjs.org/docs/messages/prerender-error\r\nReferenceError: document is not defined\r\n    at loadScript (<MY_PROJECT>/node_modules/next/dist/client/script.js:94:16)\r\n    at Script (<MY_PROJECT>/node_modules/next/dist/client/script.js:181:13)\r\n    at d (<MY_PROJECT>/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:33:498)\r\n    at bb (<MY_PROJECT>/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:36:16)\r\n    at a.b.render (<MY_PROJECT>/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:42:43)\r\n    at a.b.read (<MY_PROJECT>/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:41:83)\r\n    at Object.exports.renderToStaticMarkup (<MY_PROJECT>/node_modules/react-dom/cjs/react-dom-server.node.production.min.js:51:446)\r\n    at renderDocument (<MY_PROJECT>/node_modules/next/dist/server/render.js:111:47)\r\n    at renderToHTML (<MY_PROJECT>/node_modules/next/dist/server/render.js:664:16)\r\n    at async <MY_PROJECT>/node_modules/next/dist/export/worker.js:276:36\r\n```\r\n\r\nIt is throwing this error on all files that are pages when use ``next/script`` with beforeInteractive strategy in ``_document.tsx``.\r\n\r\nIn the afterInteractive strategy, the error will not appear.\r\n\r\n### Expected Behavior\r\n\r\nSuccess on production build without errors.\r\n\r\n### To Reproduce\r\n\r\n``_document.tsx``:\r\n```tsx\r\nimport Document, { Html, Main, NextScript } from 'next/document'\r\nimport Script from 'next/script'\r\n\r\nexport default class MyDocument extends Document {\r\n  render() {\r\n    return (\r\n      <Html>\r\n        <body>\r\n          <Main />\r\n          <NextScript />\r\n\r\n          <Script strategy=\"beforeInteractive\" async src='/js/webp-modernizr.js' />\r\n        </body>\r\n      </Html>\r\n    )\r\n  }\r\n}\r\n```\r\n\r\n``/js/webp-modernizr.js``:\r\n```js\r\n/*! modernizr 3.6.0 (Custom Build) | MIT *\r\n * https://modernizr.com/download/?-webp-setclasses ! */\r\n!(function (e, n, A) { function o (e, n) { return typeof e === n } function t () { let e, n, A, t, a, i, l; for (const f in r) if (r.hasOwnProperty(f)) { if (e = [], n = r[f], n.name && (e.push(n.name.toLowerCase()), n.options && n.options.aliases && n.options.aliases.length)) for (A = 0; A < n.options.aliases.length; A++)e.push(n.options.aliases[A].toLowerCase()); for (t = o(n.fn, 'function') ? n.fn() : n.fn, a = 0; a < e.length; a++)i = e[a], l = i.split('.'), l.length === 1 ? Modernizr[l[0]] = t : (!Modernizr[l[0]] || Modernizr[l[0]] instanceof Boolean || (Modernizr[l[0]] = new Boolean(Modernizr[l[0]])), Modernizr[l[0]][l[1]] = t), s.push((t ? '' : 'no-') + l.join('-')) } } function a (e) { let n = u.className; const A = Modernizr._config.classPrefix || ''; if (c && (n = n.baseVal), Modernizr._config.enableJSClass) { const o = new RegExp('(^|\\\\s)' + A + 'no-js(\\\\s|$)'); n = n.replace(o, '$1' + A + 'js$2') }Modernizr._config.enableClasses && (n += ' ' + A + e.join(' ' + A), c ? u.className.baseVal = n : u.className = n) } function i (e, n) { if (typeof e === 'object') for (const A in e)f(e, A) && i(A, e[A]); else { e = e.toLowerCase(); const o = e.split('.'); let t = Modernizr[o[0]]; if (o.length == 2 && (t = t[o[1]]), typeof t !== 'undefined') return Modernizr; n = typeof n === 'function' ? n() : n, o.length == 1 ? Modernizr[o[0]] = n : (!Modernizr[o[0]] || Modernizr[o[0]] instanceof Boolean || (Modernizr[o[0]] = new Boolean(Modernizr[o[0]])), Modernizr[o[0]][o[1]] = n), a([(n && n != 0 ? '' : 'no-') + o.join('-')]), Modernizr._trigger(e, n) } return Modernizr } var s = []; var r = []; const l = { _version: '3.6.0', _config: { classPrefix: '', enableClasses: !0, enableJSClass: !0, usePrefixes: !0 }, _q: [], on: function (e, n) { const A = this; setTimeout(function () { n(A[e]) }, 0) }, addTest: function (e, n, A) { r.push({ name: e, fn: n, options: A }) }, addAsyncTest: function (e) { r.push({ name: null, fn: e }) } }; var Modernizr = function () {}; Modernizr.prototype = l, Modernizr = new Modernizr(); let f; var u = n.documentElement; var c = u.nodeName.toLowerCase() === 'svg'; !(function () { const e = {}.hasOwnProperty; f = o(e, 'undefined') || o(e.call, 'undefined') ? function (e, n) { return n in e && o(e.constructor.prototype[n], 'undefined') } : function (n, A) { return e.call(n, A) } }()), l._l = {}, l.on = function (e, n) { this._l[e] || (this._l[e] = []), this._l[e].push(n), Modernizr.hasOwnProperty(e) && setTimeout(function () { Modernizr._trigger(e, Modernizr[e]) }, 0) }, l._trigger = function (e, n) { if (this._l[e]) { const A = this._l[e]; setTimeout(function () { let e, o; for (e = 0; e < A.length; e++)(o = A[e])(n) }, 0), delete this._l[e] } }, Modernizr._q.push(function () { l.addTest = i }), Modernizr.addAsyncTest(function () { function e (e, n, A) { function o (n) { const o = n && n.type === 'load' ? t.width == 1 : !1; const a = e === 'webp'; i(e, a && o ? new Boolean(o) : o), A && A(n) } var t = new Image(); t.onerror = o, t.onload = o, t.src = n } const n = [{ uri: 'data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA=', name: 'webp' }, { uri: 'data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA==', name: 'webp.alpha' }, { uri: 'data:image/webp;base64,UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA', name: 'webp.animation' }, { uri: 'data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=', name: 'webp.lossless' }]; const A = n.shift(); e(A.name, A.uri, function (A) { if (A && A.type === 'load') for (let o = 0; o < n.length; o++)e(n[o].name, n[o].uri) }) }), t(), a(s), delete l.addTest, delete l.addAsyncTest; for (let p = 0; p < Modernizr._q.length; p++)Modernizr._q[p](); e.Modernizr = Modernizr }(window, document))\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28582","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28582/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28582/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28582/events","html_url":"https://github.com/vercel/next.js/issues/28582","id":981836217,"node_id":"MDU6SXNzdWU5ODE4MzYyMTc=","number":28582,"title":"with-typescript-graphql: unable to resolve dependency tree","user":{"login":"benhame","id":89403436,"node_id":"MDQ6VXNlcjg5NDAzNDM2","avatar_url":"https://avatars.githubusercontent.com/u/89403436?v=4","gravatar_id":"","url":"https://api.github.com/users/benhame","html_url":"https://github.com/benhame","followers_url":"https://api.github.com/users/benhame/followers","following_url":"https://api.github.com/users/benhame/following{/other_user}","gists_url":"https://api.github.com/users/benhame/gists{/gist_id}","starred_url":"https://api.github.com/users/benhame/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benhame/subscriptions","organizations_url":"https://api.github.com/users/benhame/orgs","repos_url":"https://api.github.com/users/benhame/repos","events_url":"https://api.github.com/users/benhame/events{/privacy}","received_events_url":"https://api.github.com/users/benhame/received_events","type":"User","site_admin":false},"labels":[{"id":549032284,"node_id":"MDU6TGFiZWw1NDkwMzIyODQ=","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20example","name":"type: example","color":"ecffaf","default":false,"description":""},{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-28T13:34:28Z","updated_at":"2021-08-28T13:34:28Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What example does this report relate to?\n\nwith-typescript-graphql\n\n### What version of Next.js are you using?\n\nN/A\n\n### What version of Node.js are you using?\n\nv16.6.2\n\n### What browser are you using?\n\nN/A\n\n### What operating system are you using?\n\nmacOS\n\n### How are you deploying your application?\n\nnpx create-next-app --example with-typescript-graphql with-typescript-graphql-app\n\n### Describe the Bug\n\nCannot setup the TypeScript and GraphQL Example.\n\n### Expected Behavior\n\n`npx create-next-app --example with-typescript-graphql with-typescript-graphql-app` should setup the example with no errors.\n\n### To Reproduce\n\nRun the following: `npx create-next-app --example with-typescript-graphql with-typescript-graphql-app`","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28567","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28567/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28567/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28567/events","html_url":"https://github.com/vercel/next.js/issues/28567","id":981465855,"node_id":"MDU6SXNzdWU5ODE0NjU4NTU=","number":28567,"title":"Updating to ESM modules like remark-slug etc fails build due to cache in .next folder","user":{"login":"marcofranssen","id":694733,"node_id":"MDQ6VXNlcjY5NDczMw==","avatar_url":"https://avatars.githubusercontent.com/u/694733?v=4","gravatar_id":"","url":"https://api.github.com/users/marcofranssen","html_url":"https://github.com/marcofranssen","followers_url":"https://api.github.com/users/marcofranssen/followers","following_url":"https://api.github.com/users/marcofranssen/following{/other_user}","gists_url":"https://api.github.com/users/marcofranssen/gists{/gist_id}","starred_url":"https://api.github.com/users/marcofranssen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcofranssen/subscriptions","organizations_url":"https://api.github.com/users/marcofranssen/orgs","repos_url":"https://api.github.com/users/marcofranssen/repos","events_url":"https://api.github.com/users/marcofranssen/events{/privacy}","received_events_url":"https://api.github.com/users/marcofranssen/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-27T17:51:48Z","updated_at":"2021-08-27T17:57:27Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\r\n\r\n11.1.0\r\n\r\n### What version of Node.js are you using?\r\n\r\n16.7.0\r\n\r\n### What browser are you using?\r\n\r\nChrome\r\n\r\n### What operating system are you using?\r\n\r\nmacOS\r\n\r\n### How are you deploying your application?\r\n\r\nVercel\r\n\r\n### Describe the Bug\r\n\r\nWhen bumping some modules like `remark-slug` and a whole bunch of other `remark-*` libraries to the latest ESM ones next build sometimes fails. \r\n\r\nI think it caused by some caching inside `.next` folder.\r\n\r\nSee here an abstract of the log from Vercel.\r\n\r\n```bash\r\n19:53:50.278 | > Build error occurred\r\n-- | --\r\n19:53:50.280 | Error [ERR_REQUIRE_ESM]: Must use import to load ES Module: /vercel/path0/node_modules/remark-slug/index.js\r\n19:53:50.280 | require() of ES modules is not supported.\r\n19:53:50.280 | require() of /vercel/path0/node_modules/remark-slug/index.js from /vercel/path0/.next/server/pages/[slug].js is an ES module file as it is a .js file whose nearest parent package.json contains \"type\": \"module\" which defines all .js files in that package scope as ES modules.\r\n19:53:50.281 | Instead rename index.js to end in .cjs, change the requiring code to use import(), or remove \"type\": \"module\" from /vercel/path0/node_modules/remark-slug/package.json.\r\n19:53:50.281 | at Object.Module._extensions..js (internal/modules/cjs/loader.js:1089:13)\r\n19:53:50.282 | at Module.load (internal/modules/cjs/loader.js:937:32)\r\n19:53:50.282 | at Function.Module._load (internal/modules/cjs/loader.js:778:12)\r\n19:53:50.282 | at Module.require (internal/modules/cjs/loader.js:961:19)\r\n19:53:50.282 | at require (internal/modules/cjs/helpers.js:92:18)\r\n19:53:50.282 | at Object.4674 (/vercel/path0/.next/server/pages/[slug].js:464:46)\r\n19:53:50.282 | at __webpack_require__ (/vercel/path0/.next/server/webpack-runtime.js:25:42)\r\n19:53:50.282 | at /vercel/path0/.next/server/pages/[slug].js:570:78\r\n19:53:50.283 | at Function.__webpack_require__.a (/vercel/path0/.next/server/webpack-runtime.js:98:13)\r\n19:53:50.283 | at Object.1103 (/vercel/path0/.next/server/pages/[slug].js:545:21) {\r\n19:53:50.283 | type: 'NodeError',\r\n19:53:50.283 | code: 'ERR_REQUIRE_ESM'\r\n19:53:50.283 | }\r\n19:53:50.310 | error Command failed with exit code 1.\r\n19:53:50.310 | info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.\r\n19:53:50.340 | Error: Command \"yarn run build\" exited with 1\r\n```\r\n\r\nRunning same on local works if I delete he `.next` directory.\r\n\r\n### Expected Behavior\r\n\r\nWhen switching to ESM implementations of dependencies and replacing the code as explained [here](https://nextjs.org/docs/messages/import-esm-externals) `yarn dev` and `yarn build` work, no matter what.\r\n\r\n### To Reproduce\r\n\r\nTake an existing project that depends on an older `remark-*` dependency and run `yarn build`. Then update the module and code for that dependency to the ESM approach and run `yarn build`.\r\n\r\nYou will see the build failes with some ESM error.\r\n\r\nThen delete the `.next` folder.\r\n\r\nRun `yarn build` again. ✅ all works","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28560","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28560/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28560/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28560/events","html_url":"https://github.com/vercel/next.js/issues/28560","id":981275629,"node_id":"MDU6SXNzdWU5ODEyNzU2Mjk=","number":28560,"title":"Next/link triggering momentary 'Unhandled Runtime Error' only in dev mode","user":{"login":"simongowing1","id":76006710,"node_id":"MDQ6VXNlcjc2MDA2NzEw","avatar_url":"https://avatars.githubusercontent.com/u/76006710?v=4","gravatar_id":"","url":"https://api.github.com/users/simongowing1","html_url":"https://github.com/simongowing1","followers_url":"https://api.github.com/users/simongowing1/followers","following_url":"https://api.github.com/users/simongowing1/following{/other_user}","gists_url":"https://api.github.com/users/simongowing1/gists{/gist_id}","starred_url":"https://api.github.com/users/simongowing1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/simongowing1/subscriptions","organizations_url":"https://api.github.com/users/simongowing1/orgs","repos_url":"https://api.github.com/users/simongowing1/repos","events_url":"https://api.github.com/users/simongowing1/events{/privacy}","received_events_url":"https://api.github.com/users/simongowing1/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2021-08-27T13:54:50Z","updated_at":"2021-09-01T12:20:09Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\n\n11.1.0\n\n### What version of Node.js are you using?\n\n14.15.3\n\n### What browser are you using?\n\nFirefox\n\n### What operating system are you using?\n\nmacOS\n\n### How are you deploying your application?\n\nIssue refers to Dev mode only\n\n### Describe the Bug\n\nIn dev mode, I am getting a momentary runtime error when I click on a dynamic next/link. The error appears for a couple of seconds then the required page renders correctly.\r\nNB the error cannot be replicated in production.\r\n\r\n**Error**\r\n```\r\nUnhandled Runtime Error\r\nError: Failed to load script: /_next/static/chunks/pages/%5BvenueId%5D/events/detail/%5Bdate%5D/%5BeventId%5D.js\r\nCall Stack\r\nappendScript/</script.onerror\r\nnode_modules/next/dist/client/route-loader.js (83:51)\r\n```\r\n\r\n**Link**\r\n```\r\n<Link\r\nhref={`/${venueId}/events/detail/${date}/slug=${eventId}`}\r\nas={`/${venueId}/events/detail/${date}/${eventId}`}\r\n>\r\n<a className=\"font-bold text-lg\">{name}</a>\r\n</Link>\r\n```\r\n\r\n**File Structure to page I am trying to reach:**\r\npages/[venueId]/events/detail/[...slug].tsx\r\n\r\nThe error persists if I attempt to replicate the file structure in my href. Same error with the code as follows:\r\n\r\n```\r\nhref={`/${venueId}/events/detail/${eventId}`}\r\nas={`/${cinemaId}/events/detail/${date}/${eventId}`}\r\n```\r\n\r\nThe one thing that does get rid of the error is if I simply paste the template literal from the 'as' prop in the 'href' and remove the 'as' prop:\r\n\r\n```\r\nhref={`/${venueId}/events/detail/${date}/${eventId}`}\r\n```\r\n\r\nThis renders the required page swiftly and flawlessly without error. **BUT** when I try to navigate 'back' to the previous page using the browser 'back' button, it changes the URL to the correct address for the previous page, but remains on the same page.\n\n### Expected Behavior\n\nAs a user I want to be able to click on a dynamic 'event' link in a list and have the respective 'detail' content rendered without an error temporarily flashing up.\r\n\r\nWhen I have finished with the information, I want to be able to click the browser's 'back' button and be returned to the previous page with the list of dynamic links.\n\n### To Reproduce\n\n**Link in question**\r\n\r\n```\r\n<Link\r\nhref={`/${venueId}/events/detail/${date}/slug=${eventId}`}\r\nas={`/${venueId}/events/detail/${date}/${eventId}`}\r\n>\r\n<a className=\"font-bold text-lg\">{name}</a>\r\n</Link>\r\n```\r\n\r\n**File Structure to page I am trying to reach:**\r\npages/[venueId]/events/detail/[...slug].tsx\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28547","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28547/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28547/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28547/events","html_url":"https://github.com/vercel/next.js/issues/28547","id":980819059,"node_id":"MDU6SXNzdWU5ODA4MTkwNTk=","number":28547,"title":"[ESLint] no-html-link-for-pages false positive on target=\"_blank\"","user":{"login":"DarthSomebody","id":10331302,"node_id":"MDQ6VXNlcjEwMzMxMzAy","avatar_url":"https://avatars.githubusercontent.com/u/10331302?v=4","gravatar_id":"","url":"https://api.github.com/users/DarthSomebody","html_url":"https://github.com/DarthSomebody","followers_url":"https://api.github.com/users/DarthSomebody/followers","following_url":"https://api.github.com/users/DarthSomebody/following{/other_user}","gists_url":"https://api.github.com/users/DarthSomebody/gists{/gist_id}","starred_url":"https://api.github.com/users/DarthSomebody/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DarthSomebody/subscriptions","organizations_url":"https://api.github.com/users/DarthSomebody/orgs","repos_url":"https://api.github.com/users/DarthSomebody/repos","events_url":"https://api.github.com/users/DarthSomebody/events{/privacy}","received_events_url":"https://api.github.com/users/DarthSomebody/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-27T02:54:47Z","updated_at":"2021-08-27T02:54:47Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\n\n11.1.0\n\n### What version of Node.js are you using?\n\n16.6.0\n\n### What browser are you using?\n\nFirefox\n\n### What operating system are you using?\n\nWindows 10\n\n### How are you deploying your application?\n\nnext lint\n\n### Describe the Bug\n\nI have a link to a page on the same domain that opens in a new tab like this:  \r\n`<a target=\"_blank\" rel=\"noreferrer\" href=\"/discord\">Discord</a>`\r\n\r\nThis route redirects to a Discord invite URL and I don't want to open this route in the same tab.  \r\nThe ESLint rule `no-html-link-for-pages` however complains:\r\n> Error: Do not use the HTML <a> tag to navigate to /discord/. Use Link from 'next/link' instead. See: https://nextjs.org/docs/messages/no-html-link-for-pages.\n\n### Expected Behavior\n\nThe rule should pass, since the link is opened in a new tab.\n\n### To Reproduce\n\nUse any relative link that opens in a new tab:\r\n`<a target=\"_blank\" rel=\"noreferrer\" href=\"/discord\">Discord</a>`","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28546","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28546/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28546/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28546/events","html_url":"https://github.com/vercel/next.js/pull/28546","id":980723534,"node_id":"MDExOlB1bGxSZXF1ZXN0NzIwOTA5NDIz","number":28546,"title":"Fix type-check in Temporal example","user":{"login":"lorensr","id":251288,"node_id":"MDQ6VXNlcjI1MTI4OA==","avatar_url":"https://avatars.githubusercontent.com/u/251288?v=4","gravatar_id":"","url":"https://api.github.com/users/lorensr","html_url":"https://github.com/lorensr","followers_url":"https://api.github.com/users/lorensr/followers","following_url":"https://api.github.com/users/lorensr/following{/other_user}","gists_url":"https://api.github.com/users/lorensr/gists{/gist_id}","starred_url":"https://api.github.com/users/lorensr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorensr/subscriptions","organizations_url":"https://api.github.com/users/lorensr/orgs","repos_url":"https://api.github.com/users/lorensr/repos","events_url":"https://api.github.com/users/lorensr/events{/privacy}","received_events_url":"https://api.github.com/users/lorensr/received_events","type":"User","site_admin":false},"labels":[{"id":549032284,"node_id":"MDU6TGFiZWw1NDkwMzIyODQ=","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20example","name":"type: example","color":"ecffaf","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-26T23:26:00Z","updated_at":"2021-08-26T23:26:03Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28546","html_url":"https://github.com/vercel/next.js/pull/28546","diff_url":"https://github.com/vercel/next.js/pull/28546.diff","patch_url":"https://github.com/vercel/next.js/pull/28546.patch"},"body":"Before this PR, `cd examples/with-temporal && npm run type-check` fails.\r\n\r\n## Documentation / Examples\r\n\r\n- [x] Make sure the linting passes\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28538","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28538/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28538/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28538/events","html_url":"https://github.com/vercel/next.js/issues/28538","id":980471265,"node_id":"MDU6SXNzdWU5ODA0NzEyNjU=","number":28538,"title":"Duplicating script component when using rewrite rule in config.next.js","user":{"login":"zt1983811","id":2559543,"node_id":"MDQ6VXNlcjI1NTk1NDM=","avatar_url":"https://avatars.githubusercontent.com/u/2559543?v=4","gravatar_id":"","url":"https://api.github.com/users/zt1983811","html_url":"https://github.com/zt1983811","followers_url":"https://api.github.com/users/zt1983811/followers","following_url":"https://api.github.com/users/zt1983811/following{/other_user}","gists_url":"https://api.github.com/users/zt1983811/gists{/gist_id}","starred_url":"https://api.github.com/users/zt1983811/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zt1983811/subscriptions","organizations_url":"https://api.github.com/users/zt1983811/orgs","repos_url":"https://api.github.com/users/zt1983811/repos","events_url":"https://api.github.com/users/zt1983811/events{/privacy}","received_events_url":"https://api.github.com/users/zt1983811/received_events","type":"User","site_admin":false},"labels":[{"id":549032284,"node_id":"MDU6TGFiZWw1NDkwMzIyODQ=","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20example","name":"type: example","color":"ecffaf","default":false,"description":""},{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-26T17:13:34Z","updated_at":"2021-08-26T17:15:19Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What example does this report relate to?\r\n\r\nnext/script + rewrite rule\r\n\r\n### What version of Next.js are you using?\r\n\r\n11.1.0\r\n\r\n### What version of Node.js are you using?\r\n\r\n15.7.0\r\n\r\n### What browser are you using?\r\n\r\nChrome\r\n\r\n### What operating system are you using?\r\n\r\nMacos/Linux\r\n\r\n### How are you deploying your application?\r\n\r\nuse codesandbox https://codesandbox.io/s/old-flower-wx1zm?file=/next.config.js\r\n\r\n### Describe the Bug\r\n\r\nI see 2 times of script being generated by next/script when I have rewrites rule in `next.config.js`\r\n\r\nCheck following screenshot you have script with console.log 2 times being generated:\r\n![image](https://user-images.githubusercontent.com/2559543/131005724-a7257017-b19c-407c-8f5c-42f5cb1ee70e.png)\r\n\r\nPlease see the detail in codesandbox: \r\nhttps://codesandbox.io/s/old-flower-wx1zm\r\n\r\n### Expected Behavior\r\n\r\nonly one script suppose be generated.\r\n\r\n### To Reproduce\r\n\r\n* add script in either `_app.js` or and pages component by next/script ie: in _app.js\r\n```\r\nimport Script from \"next/script\";\r\n\r\nfunction MyApp({ Component, pageProps }) {\r\n  return (\r\n    <>\r\n      <Component {...pageProps} />\r\n      <Script>console.log(\"this is duplicated\")</Script>;\r\n    </>\r\n  );\r\n}\r\nexport default MyApp;\r\n```\r\n* create whatever rewrites rule in `next.config.js`\r\n```\r\nmodule.exports = {\r\n  async rewrites() {\r\n    return [\r\n      {\r\n        source: \"/about\",\r\n        destination: \"/\"\r\n      }\r\n    ];\r\n  }\r\n};\r\n```\r\n* Run page if script \r\nand search for script tag","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28537","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28537/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28537/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28537/events","html_url":"https://github.com/vercel/next.js/pull/28537","id":980429391,"node_id":"MDExOlB1bGxSZXF1ZXN0NzIwNjY5MTk5","number":28537,"title":"Add PostHog integration to docs","user":{"login":"Ismaaa","id":22240843,"node_id":"MDQ6VXNlcjIyMjQwODQz","avatar_url":"https://avatars.githubusercontent.com/u/22240843?v=4","gravatar_id":"","url":"https://api.github.com/users/Ismaaa","html_url":"https://github.com/Ismaaa","followers_url":"https://api.github.com/users/Ismaaa/followers","following_url":"https://api.github.com/users/Ismaaa/following{/other_user}","gists_url":"https://api.github.com/users/Ismaaa/gists{/gist_id}","starred_url":"https://api.github.com/users/Ismaaa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ismaaa/subscriptions","organizations_url":"https://api.github.com/users/Ismaaa/orgs","repos_url":"https://api.github.com/users/Ismaaa/repos","events_url":"https://api.github.com/users/Ismaaa/events{/privacy}","received_events_url":"https://api.github.com/users/Ismaaa/received_events","type":"User","site_admin":false},"labels":[{"id":549032284,"node_id":"MDU6TGFiZWw1NDkwMzIyODQ=","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20example","name":"type: example","color":"ecffaf","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-26T16:22:03Z","updated_at":"2021-08-28T07:09:55Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28537","html_url":"https://github.com/vercel/next.js/pull/28537","diff_url":"https://github.com/vercel/next.js/pull/28537.diff","patch_url":"https://github.com/vercel/next.js/pull/28537.patch"},"body":"Added an example showing how to integrate [PostHog](https://posthog.com) with Next.js\r\n\r\n<!--\r\nThanks for opening a PR! Your contribution is much appreciated.\r\nIn order to make sure your PR is handled as smoothly as possible we request that you follow the checklist sections below.\r\nChoose the right checklist for the change that you're making:\r\n-->\r\n\r\n## Documentation / Examples\r\n\r\n- [x] Make sure the linting passes\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28534","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28534/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28534/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28534/events","html_url":"https://github.com/vercel/next.js/issues/28534","id":980253939,"node_id":"MDU6SXNzdWU5ODAyNTM5Mzk=","number":28534,"title":"Image component lazy loading not working on IE11","user":{"login":"thiniulian","id":15338310,"node_id":"MDQ6VXNlcjE1MzM4MzEw","avatar_url":"https://avatars.githubusercontent.com/u/15338310?v=4","gravatar_id":"","url":"https://api.github.com/users/thiniulian","html_url":"https://github.com/thiniulian","followers_url":"https://api.github.com/users/thiniulian/followers","following_url":"https://api.github.com/users/thiniulian/following{/other_user}","gists_url":"https://api.github.com/users/thiniulian/gists{/gist_id}","starred_url":"https://api.github.com/users/thiniulian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thiniulian/subscriptions","organizations_url":"https://api.github.com/users/thiniulian/orgs","repos_url":"https://api.github.com/users/thiniulian/repos","events_url":"https://api.github.com/users/thiniulian/events{/privacy}","received_events_url":"https://api.github.com/users/thiniulian/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-08-26T13:33:28Z","updated_at":"2021-08-27T19:57:17Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\n\n11.0.0\n\n### What version of Node.js are you using?\n\n14.15.4\n\n### What browser are you using?\n\nIE11\n\n### What operating system are you using?\n\nWindows\n\n### How are you deploying your application?\n\nVercel\n\n### Describe the Bug\n\nThe image lazy loading is not working on IE11. The white sizer image remains visible.\r\n\r\n=======What we discovered =======\r\n\r\n[Looking at the code](https://github.com/vercel/next.js/blob/canary/packages/next/client/image.tsx#L257) for the image component we could see there's img.decode() function used to handle the image loading.\r\nLooking at the browser adoption for it, it seems that IE is not supporting it.\r\n\r\nThis forces us to take one of the following solutions:\r\n- use priority -> this affects the Lighthouse scores since it's loading a lot of resources that are not needed\r\n- refrain from updating next.js to version 11 -> which kinda makes us reconsider nextjs entirely\r\n- use img tag instead of the Image Component -> we need the optimisation that image component does for the Lighthouse audit\r\n\r\n=============================\r\n\n\n### Expected Behavior\n\nThe images should appear when we scroll to them.\n\n### To Reproduce\n\nUse the image component on a page\r\nOpen the page in IE11 (you could use one from here https://developer.microsoft.com/en-us/microsoft-edge/tools/vms/)\r\nScroll the page to the image\r\nSee the image not loading\r\nInspecting the source you'll see the white sizer image.","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28533","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28533/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28533/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28533/events","html_url":"https://github.com/vercel/next.js/issues/28533","id":980236747,"node_id":"MDU6SXNzdWU5ODAyMzY3NDc=","number":28533,"title":"prodction build panic when public folder exists but .next/static folder not exists.","user":{"login":"zzjin","id":679757,"node_id":"MDQ6VXNlcjY3OTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/679757?v=4","gravatar_id":"","url":"https://api.github.com/users/zzjin","html_url":"https://github.com/zzjin","followers_url":"https://api.github.com/users/zzjin/followers","following_url":"https://api.github.com/users/zzjin/following{/other_user}","gists_url":"https://api.github.com/users/zzjin/gists{/gist_id}","starred_url":"https://api.github.com/users/zzjin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zzjin/subscriptions","organizations_url":"https://api.github.com/users/zzjin/orgs","repos_url":"https://api.github.com/users/zzjin/repos","events_url":"https://api.github.com/users/zzjin/events{/privacy}","received_events_url":"https://api.github.com/users/zzjin/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-26T13:17:31Z","updated_at":"2021-08-26T13:17:56Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\r\n\r\n11.1.0\r\n\r\n### What version of Node.js are you using?\r\n\r\n14.17.5\r\n\r\n### What browser are you using?\r\n\r\nany\r\n\r\n### What operating system are you using?\r\n\r\nany\r\n\r\n### How are you deploying your application?\r\n\r\nnext start\r\n\r\n### Describe the Bug\r\n\r\nWe have a root public folder and build next using `npm run build`, and upload `.next/static` files to cdn.\r\nThen we want to deploy next server to a serverless host with pack minimal files.\r\nSo we delete the `.next/static` folder as all contents uploaded to cdn already.\r\nwhen start build server, and nagitive to `/favicon.ico` next server throw error with:\r\n```\r\nError: ENOENT: no such file or directory, scandir '/web-next/build/node/.next/static'\r\n    at Object.readdirSync (fs.js:1043:3)\r\n    at Object.recursiveReadDirSync (/web-next/build/node/node_modules/next/dist/server/lib/recursive-readdir-sync.js:14:32)\r\n    at Server.getFilesystemPaths (/web-next/build/node/node_modules/next/dist/server/next-server.js:1515:74)\r\n    at Server.isServeableUrl (/web-next/build/node/node_modules/next/dist/server/next-server.js:1549:37)\r\n    at Server.serveStatic (/web-next/build/node/node_modules/next/dist/server/next-server.js:1475:19)\r\n    at Object.fn (/web-next/build/node/node_modules/next/dist/server/next-server.js:789:36)\r\n    at Router.execute (/web-next/build/node/node_modules/next/dist/server/router.js:205:48)\r\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)\r\n    at async Server.run (/web-next/build/node/node_modules/next/dist/server/next-server.js:825:29)\r\n    at async Server.handleRequest (/web-next/build/node/node_modules/next/dist/server/next-server.js:292:20) {\r\n  errno: -2,\r\n  syscall: 'scandir',\r\n  code: 'ENOENT',\r\n  path: '/web-next/build/node/.next/static'\r\n}\r\n```\r\n\r\ncreate a empty `.next/static` folder can solve this error.\r\nStill strange why need this.\r\n\r\n### Expected Behavior\r\n\r\nServe `favicon.ico` as usual.\r\n\r\n### To Reproduce\r\n\r\n1. build server\r\n2. remove `.next/static` folder as it uploaded to cdn.\r\n3. start server\r\n4. navigate to `favicon.ico`","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28530","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28530/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28530/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28530/events","html_url":"https://github.com/vercel/next.js/issues/28530","id":980167067,"node_id":"MDU6SXNzdWU5ODAxNjcwNjc=","number":28530,"title":"Increase in memory usage since 10.0.8 even without next/image usage","user":{"login":"jackyef","id":7252454,"node_id":"MDQ6VXNlcjcyNTI0NTQ=","avatar_url":"https://avatars.githubusercontent.com/u/7252454?v=4","gravatar_id":"","url":"https://api.github.com/users/jackyef","html_url":"https://github.com/jackyef","followers_url":"https://api.github.com/users/jackyef/followers","following_url":"https://api.github.com/users/jackyef/following{/other_user}","gists_url":"https://api.github.com/users/jackyef/gists{/gist_id}","starred_url":"https://api.github.com/users/jackyef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackyef/subscriptions","organizations_url":"https://api.github.com/users/jackyef/orgs","repos_url":"https://api.github.com/users/jackyef/repos","events_url":"https://api.github.com/users/jackyef/events{/privacy}","received_events_url":"https://api.github.com/users/jackyef/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-26T12:04:41Z","updated_at":"2021-08-31T10:13:23Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"### What version of Next.js are you using?\r\n\r\n&gt;= 10.0.8\r\n\r\n### What version of Node.js are you using?\r\n\r\n12.20.0\r\n\r\n### What browser are you using?\r\n\r\nChrome\r\n\r\n### What operating system are you using?\r\n\r\nmacOS\r\n\r\n### How are you deploying your application?\r\n\r\nnext start\r\n\r\n### Describe the Bug\r\n\r\nWe recently upgraded a Next app from `10.0.5` to `11.1.0` and saw an increase in the amount of memory usage of our `next` app. (10+ MB in sample app, might be more in larger apps)\r\n\r\nI initially suspected it was caused by the introduction of the WASM module to handle image optimization, but the issue doesn't seem to exist in [10.0.8-canary.3](https://github.com/vercel/next.js/releases/tag/v10.0.8-canary.3). The WASM module was added in [10.0.8-canary.2](https://github.com/vercel/next.js/releases/tag/v10.0.8-canary.2), but 10.0.8-canary.2 doesn't exist in npm, so I tested on the 10.0.8-canary.3 instead.\r\n\r\nAfter some digging, I found that the issue started occurring since [10.0.8-canary.10](https://github.com/vercel/next.js/releases/tag/v10.0.8-canary.10).\r\n\r\n\r\n\r\n### Expected Behavior\r\n\r\nThe memory usage shouldn't increase significantly.\r\n\r\n### To Reproduce\r\n\r\n1. Create a sample next app\r\n   ```\r\n   yarn create-next-app --typescript\r\n   ```\r\n2. Comment out the usage and import of the `Image` component in `pages/index.tsx`\r\n3. Change `next` version in the `package.json` to `10.0.8-canary.9`\r\n4. Run `yarn && yarn build && yarn start`\r\n5. Observe the memory usage. (In my case, it was around 11-12 MB in macOS' activity monitor)\r\n    ![image](https://user-images.githubusercontent.com/7252454/130959443-b195e757-37b4-4082-9eab-d38ccd2b62d5.png)\r\n\r\n6. Change `next` version in the `package.json` to `10.0.8-canary.10`\r\n7. Run `yarn && yarn build && yarn start`\r\n8. Observe the memory usage, you should see a significantly higher number. (In my case, it was around 22-24 MB)\r\n    ![image](https://user-images.githubusercontent.com/7252454/130959206-f5dea644-0f54-45b8-918d-1cfc91e4ff51.png)\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28528","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28528/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28528/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28528/events","html_url":"https://github.com/vercel/next.js/pull/28528","id":980012507,"node_id":"MDExOlB1bGxSZXF1ZXN0NzIwMzI1NDAz","number":28528,"title":"Expose RouterContext","user":{"login":"eric-burel","id":7983005,"node_id":"MDQ6VXNlcjc5ODMwMDU=","avatar_url":"https://avatars.githubusercontent.com/u/7983005?v=4","gravatar_id":"","url":"https://api.github.com/users/eric-burel","html_url":"https://github.com/eric-burel","followers_url":"https://api.github.com/users/eric-burel/followers","following_url":"https://api.github.com/users/eric-burel/following{/other_user}","gists_url":"https://api.github.com/users/eric-burel/gists{/gist_id}","starred_url":"https://api.github.com/users/eric-burel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eric-burel/subscriptions","organizations_url":"https://api.github.com/users/eric-burel/orgs","repos_url":"https://api.github.com/users/eric-burel/repos","events_url":"https://api.github.com/users/eric-burel/events{/privacy}","received_events_url":"https://api.github.com/users/eric-burel/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2021-08-26T09:07:17Z","updated_at":"2021-08-31T14:50:53Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28528","html_url":"https://github.com/vercel/next.js/pull/28528","diff_url":"https://github.com/vercel/next.js/pull/28528.diff","patch_url":"https://github.com/vercel/next.js/pull/28528.patch"},"body":"This is needed by third party apps that setup their own router context, useful for instance the Storybook Next Router Plugin, see https://github.com/lifeiscontent/storybook-addon-next-router/issues/35\r\n\r\n<!--\r\nThanks for opening a PR! Your contribution is much appreciated.\r\nIn order to make sure your PR is handled as smoothly as possible we request that you follow the checklist sections below.\r\nChoose the right checklist for the change that you're making:\r\n-->\r\n\r\n## Bug\r\n\r\n- [ ] Related issues linked using `fixes #number`\r\n- [ ] Integration tests added\r\n- [ ] Errors have helpful link attached, see `contributing.md`\r\n\r\n## Feature\r\n\r\n- [ ] Implements an existing feature request or RFC. Make sure the feature request has been accepted for implementation before opening a PR.\r\n- [X] Related issues linked using `fixes #number`\r\n- [ ] Integration tests added\r\n- [X] Documentation added => this is an internal API for third party library developers so maybe better left undocumented\r\n- [ ] Telemetry added. In case of a feature if it's used or not.\r\n- [ ] Errors have helpful link attached, see `contributing.md`\r\n\r\n## Documentation / Examples\r\n\r\n- [ ] Make sure the linting passes\r\n\r\nClose https://github.com/lifeiscontent/storybook-addon-next-router/issues/35","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28519","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28519/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28519/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28519/events","html_url":"https://github.com/vercel/next.js/issues/28519","id":979746143,"node_id":"MDU6SXNzdWU5Nzk3NDYxNDM=","number":28519,"title":"Router.push() does not fully route when dynamic route has hash (static export)","user":{"login":"skitterm","id":5875149,"node_id":"MDQ6VXNlcjU4NzUxNDk=","avatar_url":"https://avatars.githubusercontent.com/u/5875149?v=4","gravatar_id":"","url":"https://api.github.com/users/skitterm","html_url":"https://github.com/skitterm","followers_url":"https://api.github.com/users/skitterm/followers","following_url":"https://api.github.com/users/skitterm/following{/other_user}","gists_url":"https://api.github.com/users/skitterm/gists{/gist_id}","starred_url":"https://api.github.com/users/skitterm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/skitterm/subscriptions","organizations_url":"https://api.github.com/users/skitterm/orgs","repos_url":"https://api.github.com/users/skitterm/repos","events_url":"https://api.github.com/users/skitterm/events{/privacy}","received_events_url":"https://api.github.com/users/skitterm/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-26T01:42:33Z","updated_at":"2021-08-26T01:47:01Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\r\n\r\n11.1.0\r\n\r\n### What version of Node.js are you using?\r\n\r\n14.7.0\r\n\r\n### What browser are you using?\r\n\r\nChrome\r\n\r\n### What operating system are you using?\r\n\r\nWindows\r\n\r\n### How are you deploying your application?\r\n\r\nnext export\r\n\r\n### Describe the Bug\r\n\r\nWhen using `Router.push()` on a static-exported site with dynamic routes, I am not re-routed correctly if my current URL and the to-be-routed-to URL differ by hash alone, or by part of the pathname alone.\r\n\r\nI have a router page that I use to route client-side to various pages (many of which have dynamic routes). When hitting the static server, it returns the router page, which then routes client-side to any other page in the app (depending on the URL). When trying to route to a dynamic route with a hash after the pathname, `Router.push()` updates the URL, but does not actually route me to the correct page (I am visually still on the router page).\r\n\r\nI'm calling Router.push() like this (pretend the `asPath` and `query.id` and `hash` parameters aren't hardcoded):\r\n```js\r\nuseEffect(() => {\r\n  Router.push({\r\n    pathname: '/posts/view',\r\n    query: {\r\n      id: 'first-post',\r\n    },\r\n    hash: 'so-cool'\r\n  }, '/posts/first-post#so-cool')\r\n}, [])\r\n```\r\n\r\nI have only seen this issue with a static HTML export.\r\n\r\n### Expected Behavior\r\n\r\nI expect `Router.push()` to route me to the correct next.js page, even if my current pathname and/or hash matches the `asPath` value I pass to it.\r\n\r\n### To Reproduce\r\n\r\n1. Clone this repo: https://github.com/skitterm/nextjs-routing-issue\r\n2. Follow instructions on README for setup\r\n3. Navigate to `http://localhost:3000/posts/first-post#so-cool`. Observe that the URL is updated but the router page is still shown (\"Routing\") -- _bug_.\r\n4. Change the URL to `http://localhost:3000/posts/first-post`. Observe that the URL is updated but the router page is still shown (\"Routing\") -- _bug_.\r\n5. Change the URL to `http://localhost:3000/posts`. Observe that you are routed correctly to the `/posts/first-post#so-cool` page -- _works as intended_.","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28510","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28510/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28510/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28510/events","html_url":"https://github.com/vercel/next.js/issues/28510","id":979562922,"node_id":"MDU6SXNzdWU5Nzk1NjI5MjI=","number":28510,"title":"Nextjs and sass @extend","user":{"login":"Lukortech","id":26508593,"node_id":"MDQ6VXNlcjI2NTA4NTkz","avatar_url":"https://avatars.githubusercontent.com/u/26508593?v=4","gravatar_id":"","url":"https://api.github.com/users/Lukortech","html_url":"https://github.com/Lukortech","followers_url":"https://api.github.com/users/Lukortech/followers","following_url":"https://api.github.com/users/Lukortech/following{/other_user}","gists_url":"https://api.github.com/users/Lukortech/gists{/gist_id}","starred_url":"https://api.github.com/users/Lukortech/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Lukortech/subscriptions","organizations_url":"https://api.github.com/users/Lukortech/orgs","repos_url":"https://api.github.com/users/Lukortech/repos","events_url":"https://api.github.com/users/Lukortech/events{/privacy}","received_events_url":"https://api.github.com/users/Lukortech/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-08-25T19:43:37Z","updated_at":"2021-08-31T11:37:04Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\n\n11\n\n### What version of Node.js are you using?\n\n14.17.4\n\n### What browser are you using?\n\nChrome\n\n### What operating system are you using?\n\nWindows 10\n\n### How are you deploying your application?\n\ndev\n\n### Describe the Bug\n\nNextjs doesn't support sass `@extend` properly in `.module.scss` files.\n\n### Expected Behavior\n\nI should be able to use `styles\\globals.scss`\r\n```\r\n.centerTransform {\r\n  position: absolute;\r\n  left: 50%;\r\n  top: 50%;\r\n  transform: translate(-50%, -50%);\r\n}\r\n``` \r\nclass in `pages\\settings\\some-module.scss` via `@extend`\r\n```\r\n.someClass {\r\n  @extend .centerTransform;\r\n}\r\n```\n\n### To Reproduce\n\nCheck the ongoing discussion in this \"closed\" issue.\r\n\r\nhttps://github.com/vercel/next.js/issues/10475","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28504","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28504/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28504/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28504/events","html_url":"https://github.com/vercel/next.js/issues/28504","id":979388092,"node_id":"MDU6SXNzdWU5NzkzODgwOTI=","number":28504,"title":"Interface TransitionOptions not exported","user":{"login":"Dwlad90","id":22377836,"node_id":"MDQ6VXNlcjIyMzc3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/22377836?v=4","gravatar_id":"","url":"https://api.github.com/users/Dwlad90","html_url":"https://github.com/Dwlad90","followers_url":"https://api.github.com/users/Dwlad90/followers","following_url":"https://api.github.com/users/Dwlad90/following{/other_user}","gists_url":"https://api.github.com/users/Dwlad90/gists{/gist_id}","starred_url":"https://api.github.com/users/Dwlad90/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Dwlad90/subscriptions","organizations_url":"https://api.github.com/users/Dwlad90/orgs","repos_url":"https://api.github.com/users/Dwlad90/repos","events_url":"https://api.github.com/users/Dwlad90/events{/privacy}","received_events_url":"https://api.github.com/users/Dwlad90/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-08-25T16:11:44Z","updated_at":"2021-08-27T14:53:10Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\n\n11.1.0\n\n### What version of Node.js are you using?\n\n14.17.4\n\n### What browser are you using?\n\nChrome\n\n### What operating system are you using?\n\nMacOS Big Sur\n\n### How are you deploying your application?\n\nnext start\n\n### Describe the Bug\n\nTypescript complication error: semantic error TS4058: Return type of exported function has or is using name 'TransitionOptions' from external module \"node_modules/next/dist/shared/lib/router/router\" but cannot be named\n\n### Expected Behavior\n\nInterface TransitionOptions is exported\n\n### To Reproduce\n\nCreate NX React library with hook useRouter  and run build\r\n<img width=\"1281\" alt=\"Screen Shot 2021-08-25 at 19 09 36\" src=\"https://user-images.githubusercontent.com/22377836/130826520-ef107b90-9e26-4ccd-bbca-f6c2b24e31f1.png\">\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28503","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28503/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28503/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28503/events","html_url":"https://github.com/vercel/next.js/pull/28503","id":979374435,"node_id":"MDExOlB1bGxSZXF1ZXN0NzE5Nzk3NjA3","number":28503,"title":"Export Router interfaces","user":{"login":"Dwlad90","id":22377836,"node_id":"MDQ6VXNlcjIyMzc3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/22377836?v=4","gravatar_id":"","url":"https://api.github.com/users/Dwlad90","html_url":"https://github.com/Dwlad90","followers_url":"https://api.github.com/users/Dwlad90/followers","following_url":"https://api.github.com/users/Dwlad90/following{/other_user}","gists_url":"https://api.github.com/users/Dwlad90/gists{/gist_id}","starred_url":"https://api.github.com/users/Dwlad90/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Dwlad90/subscriptions","organizations_url":"https://api.github.com/users/Dwlad90/orgs","repos_url":"https://api.github.com/users/Dwlad90/repos","events_url":"https://api.github.com/users/Dwlad90/events{/privacy}","received_events_url":"https://api.github.com/users/Dwlad90/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-08-25T16:03:49Z","updated_at":"2021-08-25T16:13:50Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28503","html_url":"https://github.com/vercel/next.js/pull/28503","diff_url":"https://github.com/vercel/next.js/pull/28503.diff","patch_url":"https://github.com/vercel/next.js/pull/28503.patch"},"body":"Semantic error TS4058: Return type of exported function has or is using name 'TransitionOptions' from external module \"/node_modules/next/dist/shared/lib/router/router\" but cannot be named.\r\n\r\n<!--\r\nThanks for opening a PR! Your contribution is much appreciated.\r\nIn order to make sure your PR is handled as smoothly as possible we request that you follow the checklist sections below.\r\nChoose the right checklist for the change that you're making:\r\n-->\r\n\r\n## Bug\r\n\r\n- [ ] Related issues linked using `fixes #number`\r\n- [ ] Integration tests added\r\n- [ ] Errors have helpful link attached, see `contributing.md`\r\n\r\n## Feature\r\n\r\n- [ ] Implements an existing feature request or RFC. Make sure the feature request has been accepted for implementation before opening a PR.\r\n- [ ] Related issues linked using `fixes #number`\r\n- [ ] Integration tests added\r\n- [ ] Documentation added\r\n- [ ] Telemetry added. In case of a feature if it's used or not.\r\n- [ ] Errors have helpful link attached, see `contributing.md`\r\n\r\n## Documentation / Examples\r\n\r\n- [ ] Make sure the linting passes\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28498","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28498/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28498/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28498/events","html_url":"https://github.com/vercel/next.js/pull/28498","id":979144417,"node_id":"MDExOlB1bGxSZXF1ZXN0NzE5NTk3ODc0","number":28498,"title":"Fix: Cannot assign to read only property 'children'","user":{"login":"awareness481","id":12380586,"node_id":"MDQ6VXNlcjEyMzgwNTg2","avatar_url":"https://avatars.githubusercontent.com/u/12380586?v=4","gravatar_id":"","url":"https://api.github.com/users/awareness481","html_url":"https://github.com/awareness481","followers_url":"https://api.github.com/users/awareness481/followers","following_url":"https://api.github.com/users/awareness481/following{/other_user}","gists_url":"https://api.github.com/users/awareness481/gists{/gist_id}","starred_url":"https://api.github.com/users/awareness481/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/awareness481/subscriptions","organizations_url":"https://api.github.com/users/awareness481/orgs","repos_url":"https://api.github.com/users/awareness481/repos","events_url":"https://api.github.com/users/awareness481/events{/privacy}","received_events_url":"https://api.github.com/users/awareness481/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2021-08-25T13:21:45Z","updated_at":"2021-08-27T16:42:32Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28498","html_url":"https://github.com/vercel/next.js/pull/28498","diff_url":"https://github.com/vercel/next.js/pull/28498.diff","patch_url":"https://github.com/vercel/next.js/pull/28498.patch"},"body":"## Bug\r\n\r\n- [x] Fixes https://github.com/vercel/next.js/issues/24783\r\n- [x] Integration tests added\r\n\r\n## Documentation / Examples\r\n\r\n- [x] Make sure the linting passes\r\n\r\nThe PR is currently unpolished. **If the solution is acceptable** please let me know so I can polish up the PR.\r\n\r\nThe integration test is built from this [repo](https://github.com/atdrago/repro-24783) which was provided here https://github.com/vercel/next.js/issues/24783#issuecomment-867671953\r\n\r\nAs far as I understand, taking the code below as an example:\r\n```jsx\r\n          {process.env.NODE_ENV === 'production' ? (\r\n            <>\r\n              <script />\r\n              <script />\r\n            </>\r\n          ) : null}\r\n```\r\n~~The issue here seems to be that the `script` elements will be parsed here whether the `ternary` is true or false. However, if `false` their children will be set to `writable: false`~~ Edit: Not accurate, however the error is caused by trying to modify children that have writable: false\r\n\r\nRemoving this line https://github.com/vercel/next.js/blob/ca2426185c331104f3d55ea6541a8d822a0a3ef1/packages/next/pages/_document.tsx#L432 from `_document.tsx`  should make the integration test fail","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28488","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28488/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28488/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28488/events","html_url":"https://github.com/vercel/next.js/issues/28488","id":978850714,"node_id":"MDU6SXNzdWU5Nzg4NTA3MTQ=","number":28488,"title":"Incremental Static Regeneration not working on my website.","user":{"login":"richardingwe","id":61764734,"node_id":"MDQ6VXNlcjYxNzY0NzM0","avatar_url":"https://avatars.githubusercontent.com/u/61764734?v=4","gravatar_id":"","url":"https://api.github.com/users/richardingwe","html_url":"https://github.com/richardingwe","followers_url":"https://api.github.com/users/richardingwe/followers","following_url":"https://api.github.com/users/richardingwe/following{/other_user}","gists_url":"https://api.github.com/users/richardingwe/gists{/gist_id}","starred_url":"https://api.github.com/users/richardingwe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardingwe/subscriptions","organizations_url":"https://api.github.com/users/richardingwe/orgs","repos_url":"https://api.github.com/users/richardingwe/repos","events_url":"https://api.github.com/users/richardingwe/events{/privacy}","received_events_url":"https://api.github.com/users/richardingwe/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2021-08-25T08:11:28Z","updated_at":"2021-09-03T00:20:33Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\n\n10.2.3\n\n### What version of Node.js are you using?\n\nv15.12.0\n\n### What browser are you using?\n\nchrome\n\n### What operating system are you using?\n\nWindows\n\n### How are you deploying your application?\n\nVercel\n\n### Describe the Bug\n\nI built a portfolio website using next.js and sanity headless cms, so on some pages, I used the getStaticProps function and added revalidate to it.\r\n\r\nhere is is a sample code.\r\n\r\n```\r\nexport async function getStaticProps() {\r\n    try {\r\n        const data = await sanityClient.fetch(\r\n            `*[_type == \"CodeProject\"]{\r\n                title,\r\n                slug,\r\n                date,\r\n                place,\r\n                description,\r\n                projectType,\r\n                link,\r\n                githubLink,\r\n                technologiesUsed,\r\n                projectImage{\r\n                asset->{\r\n                    _id,\r\n                    url\r\n                },\r\n                alt\r\n                }\r\n            }`\r\n        );\r\n        return {\r\n            props: {\r\n                codeData: data,\r\n                revalidate: 60,\r\n            },\r\n        };\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n\r\n}\r\n```\r\n\r\nbut Incremental static regeneration is not working. whenever I make changes from sanity cms, I always have to rebuild the site. because no matter how I reload the website does not change.\r\n\r\nwhat exactly am I doing wrong please?\r\na link to the website [https://www.ruingwe.com](https://www.ruingwe.com)\n\n### Expected Behavior\n\nI expect ISR to make changes on the website without me having to manually redeploy the site\n\n### To Reproduce\n\n```\r\n\r\nexport async function getStaticProps() {\r\n    try {\r\n        const data = await sanityClient.fetch(\r\n            `*[_type == \"CodeProject\"]{\r\n                title,\r\n                slug,\r\n                date,\r\n                place,\r\n                description,\r\n                projectType,\r\n                link,\r\n                githubLink,\r\n                technologiesUsed,\r\n                projectImage{\r\n                asset->{\r\n                    _id,\r\n                    url\r\n                },\r\n                alt\r\n                }\r\n            }`\r\n        );\r\n        return {\r\n            props: {\r\n                codeData: data,\r\n                revalidate: 60,\r\n            },\r\n        };\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n\r\n}```","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28486","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28486/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28486/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28486/events","html_url":"https://github.com/vercel/next.js/issues/28486","id":978825692,"node_id":"MDU6SXNzdWU5Nzg4MjU2OTI=","number":28486,"title":"CSS duplication when a component is used across pages","user":{"login":"gsm-fc","id":80637079,"node_id":"MDQ6VXNlcjgwNjM3MDc5","avatar_url":"https://avatars.githubusercontent.com/u/80637079?v=4","gravatar_id":"","url":"https://api.github.com/users/gsm-fc","html_url":"https://github.com/gsm-fc","followers_url":"https://api.github.com/users/gsm-fc/followers","following_url":"https://api.github.com/users/gsm-fc/following{/other_user}","gists_url":"https://api.github.com/users/gsm-fc/gists{/gist_id}","starred_url":"https://api.github.com/users/gsm-fc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gsm-fc/subscriptions","organizations_url":"https://api.github.com/users/gsm-fc/orgs","repos_url":"https://api.github.com/users/gsm-fc/repos","events_url":"https://api.github.com/users/gsm-fc/events{/privacy}","received_events_url":"https://api.github.com/users/gsm-fc/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-08-25T07:41:37Z","updated_at":"2021-08-26T02:20:36Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\r\n\r\n11.1.0\r\n\r\n### What version of Node.js are you using?\r\n\r\n12.19.0\r\n\r\n### What browser are you using?\r\n\r\nChrome\r\n\r\n### What operating system are you using?\r\n\r\nmacOS\r\n\r\n### How are you deploying your application?\r\n\r\nnext start\r\n\r\n### Describe the Bug\r\n\r\nIf I have two pages which share a common component. The CSS of the shared component is being loaded on both the pages when we switch from one page to another using client side routing (`<Link/>`). This is simple code duplication and must be fixed\r\n\r\n### Expected Behavior\r\n\r\nThe CSS must load only once and when the user moves to the next page the CSS loaded earlier must be reused.\r\n\r\n### To Reproduce\r\n\r\nClone the basic CSS example from next examples repo - https://github.com/vercel/next.js/tree/canary/examples/basic-css\r\n\r\nCreate 2 pages\r\n1) index.js\r\n2) about.js\r\n\r\nCreate a simple component` <User/>` whose styles are being loaded from a .module.css file\r\n\r\nImport this component on both pages and link the pages to one another through nextjs routing.\r\n\r\nWhen we open http://localhost:3000 the CSS  of index page is clubbed with CSS of user component and loaded via a CSS file as shown below\r\n<img width=\"1280\" alt=\"Screenshot 2021-08-25 at 12 57 37 PM\" src=\"https://user-images.githubusercontent.com/80637079/130745895-cfa93900-894d-4ba0-a9d1-7c3ffb3950a8.png\">\r\n<img width=\"1280\" alt=\"Screenshot 2021-08-25 at 12 57 54 PM\" src=\"https://user-images.githubusercontent.com/80637079/130745908-a9678937-8dac-4b19-b279-f8f82427318e.png\">\r\n\r\nNote the CSS for class - \"styles5_h1Custome__2VZ1Y\". This is the class which is used in user component.\r\n\r\nNow, if the user clicks on the about page link. The about page is loaded with its CSS being loaded in the head instead of a separate file.\r\n\r\n<img width=\"942\" alt=\"Screenshot 2021-08-25 at 1 01 38 PM\" src=\"https://user-images.githubusercontent.com/80637079/130746428-080e38f9-0c17-438c-9c5d-8d788e9106b3.png\">\r\n\r\nBut if we look closely in this inlined CSS we have the same CSS class \"styles5_h1Custome__2VZ1Y\" with same CSS for the user component.\r\n\r\nWhich leads to duplicate CSS being loaded for a given component across pages. Why was this CSS again loaded in the head when we switched the page as it is already present in the CSS file loaded with index page.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28482","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28482/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28482/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28482/events","html_url":"https://github.com/vercel/next.js/issues/28482","id":978775770,"node_id":"MDU6SXNzdWU5Nzg3NzU3NzA=","number":28482,"title":"Getting `Watchpack Error (initial scan)....` warning on terminal while running project using `yarn dev`","user":{"login":"asobirov","id":48186272,"node_id":"MDQ6VXNlcjQ4MTg2Mjcy","avatar_url":"https://avatars.githubusercontent.com/u/48186272?v=4","gravatar_id":"","url":"https://api.github.com/users/asobirov","html_url":"https://github.com/asobirov","followers_url":"https://api.github.com/users/asobirov/followers","following_url":"https://api.github.com/users/asobirov/following{/other_user}","gists_url":"https://api.github.com/users/asobirov/gists{/gist_id}","starred_url":"https://api.github.com/users/asobirov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asobirov/subscriptions","organizations_url":"https://api.github.com/users/asobirov/orgs","repos_url":"https://api.github.com/users/asobirov/repos","events_url":"https://api.github.com/users/asobirov/events{/privacy}","received_events_url":"https://api.github.com/users/asobirov/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-25T06:40:48Z","updated_at":"2021-08-25T10:52:47Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\r\n\r\n11.1.0\r\n\r\n### What version of Node.js are you using?\r\n\r\n16.4.2\r\n\r\n### What browser are you using?\r\n\r\nChrome, Safari\r\n\r\n### What operating system are you using?\r\n\r\nmacOS (Apple Silicone)\r\n\r\n### How are you deploying your application?\r\n\r\nVercel\r\n\r\n### Describe the Bug\r\n\r\nIf you create a new project using `yarn create next-app` and the run the project with `yarn dev` it produces the following error: \r\n```\r\ntest-app % yarn dev\r\nready - started server on 0.0.0.0:3000, url: http://localhost:3000\r\nevent - compiled successfully\r\nwait  - compiling...\r\nevent - compiled successfully\r\nwait  - compiling...\r\nevent - compiled successfully\r\nWatchpack Error (initial scan): TypeError: Cannot destructure property 'withFileTypes' of '(intermediate value)(intermediate value)(intermediate value)' as it is null.\r\nWatchpack Error (initial scan): TypeError: Cannot destructure property 'withFileTypes' of '(intermediate value)(intermediate value)(intermediate value)' as it is null.\r\nWatchpack Error (initial scan): TypeError: Cannot destructure property 'withFileTypes' of '(intermediate value)(intermediate value)(intermediate value)' as it is null.\r\nWatchpack Error (initial scan): TypeError: Cannot destructure property 'withFileTypes' of '(intermediate value)(intermediate value)(intermediate value)' as it is null.\r\nWatchpack Error (initial scan): TypeError: Cannot destructure property 'withFileTypes' of '(intermediate value)(intermediate value)(intermediate value)' as it is null.                \r\n```\r\n\r\nThis error does not appear if project is initialised using `npm`.\r\n\r\nI also assume that this error is somehow failing NextAuth.js to function properly.\r\n\r\nHere is a discussion with NextAuth.js: https://github.com/nextauthjs/next-auth/discussions/2588\r\n\r\n### Expected Behavior\r\n\r\nThe project should not produce above mentioned errors\r\n\r\n### To Reproduce\r\n\r\nMust have yarn v3 (did not check on v2, but in v1 it works properly)\r\nCreate a new project using `yarn create next-app` and the run ir with `yarn dev`.\r\n\r\nAlternatively you may start the project from https://github.com/asobirov/nextjs-chat using `yarn install` and `yarn dev`","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28475","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28475/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28475/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28475/events","html_url":"https://github.com/vercel/next.js/pull/28475","id":978416946,"node_id":"MDExOlB1bGxSZXF1ZXN0NzE5MDA3NTk4","number":28475,"title":"Webpack rule to block importing images into _document","user":{"login":"Perry-Olsson","id":37882581,"node_id":"MDQ6VXNlcjM3ODgyNTgx","avatar_url":"https://avatars.githubusercontent.com/u/37882581?v=4","gravatar_id":"","url":"https://api.github.com/users/Perry-Olsson","html_url":"https://github.com/Perry-Olsson","followers_url":"https://api.github.com/users/Perry-Olsson/followers","following_url":"https://api.github.com/users/Perry-Olsson/following{/other_user}","gists_url":"https://api.github.com/users/Perry-Olsson/gists{/gist_id}","starred_url":"https://api.github.com/users/Perry-Olsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Perry-Olsson/subscriptions","organizations_url":"https://api.github.com/users/Perry-Olsson/orgs","repos_url":"https://api.github.com/users/Perry-Olsson/repos","events_url":"https://api.github.com/users/Perry-Olsson/events{/privacy}","received_events_url":"https://api.github.com/users/Perry-Olsson/received_events","type":"User","site_admin":false},"labels":[{"id":1124940486,"node_id":"MDU6TGFiZWwxMTI0OTQwNDg2","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20documentation","name":"type: documentation","color":"a3f7d0","default":false,"description":""},{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2021-08-24T19:30:30Z","updated_at":"2021-09-03T23:47:01Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28475","html_url":"https://github.com/vercel/next.js/pull/28475","diff_url":"https://github.com/vercel/next.js/pull/28475.diff","patch_url":"https://github.com/vercel/next.js/pull/28475.patch"},"body":"<!--\r\nThanks for opening a PR! Your contribution is much appreciated.\r\nIn order to make sure your PR is handled as smoothly as possible we request that you follow the checklist sections below.\r\nChoose the right checklist for the change that you're making:\r\n-->\r\n\r\nThis PR adds a Webpack rule that disallows any static importing of images into the custom _document file.\r\n\r\nrelated/fixes issue #28307\r\n\r\n## Bug\r\n\r\n- [x] Related issues linked using `fixes #number`\r\n- [x] Errors have helpful link attached, see `contributing.md`\r\n- [x] Integration tests added","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28453","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28453/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28453/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28453/events","html_url":"https://github.com/vercel/next.js/issues/28453","id":977901755,"node_id":"MDU6SXNzdWU5Nzc5MDE3NTU=","number":28453,"title":"`setCookie` example in docs incorrectly handles `expires` and `maxAge`","user":{"login":"will-stone","id":654103,"node_id":"MDQ6VXNlcjY1NDEwMw==","avatar_url":"https://avatars.githubusercontent.com/u/654103?v=4","gravatar_id":"","url":"https://api.github.com/users/will-stone","html_url":"https://github.com/will-stone","followers_url":"https://api.github.com/users/will-stone/followers","following_url":"https://api.github.com/users/will-stone/following{/other_user}","gists_url":"https://api.github.com/users/will-stone/gists{/gist_id}","starred_url":"https://api.github.com/users/will-stone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/will-stone/subscriptions","organizations_url":"https://api.github.com/users/will-stone/orgs","repos_url":"https://api.github.com/users/will-stone/repos","events_url":"https://api.github.com/users/will-stone/events{/privacy}","received_events_url":"https://api.github.com/users/will-stone/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-24T09:32:50Z","updated_at":"2021-08-24T09:33:42Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"The example code for a setCookie function (https://nextjs.org/docs/api-routes/api-middlewares#extending-the-reqres-objects-with-typescript) shows the maxAge option being divided by 1000.\r\n\r\nI believe the function should be:\r\n\r\n```js\r\nif (typeof options.maxAge === 'number') {\r\n  options.expires = new Date(Date.now() + options.maxAge * 1000);\r\n}\r\n```\r\n\r\nThe max-age attribute for Set-Cookie is in seconds. Therefore I believe there's a few changes that are required to the middle conditional:\r\n\r\n1. The check should only be concerned with whether the `maxAge` is numerical.\r\n2. As `Date.now` provides time in milliseconds, we need to multiply `options.maxAge` by 1000.\r\n3. `options.maxAge` does not require altering as it can be passed on in seconds to the `serialize` function which expects it in seconds:\r\n  - https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie#attributes\r\n  - https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/cookie/index.d.ts#L55\r\n\r\n_Originally posted by @will-stone in https://github.com/vercel/next.js/discussions/27617#discussioncomment-1223241_","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28440","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28440/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28440/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28440/events","html_url":"https://github.com/vercel/next.js/issues/28440","id":977801529,"node_id":"MDU6SXNzdWU5Nzc4MDE1Mjk=","number":28440,"title":"Cannot access '__WEBPACK_DEFAULT_EXPORT__' before initialization upgrading from 11.0 to 11.1","user":{"login":"davecarlson","id":299702,"node_id":"MDQ6VXNlcjI5OTcwMg==","avatar_url":"https://avatars.githubusercontent.com/u/299702?v=4","gravatar_id":"","url":"https://api.github.com/users/davecarlson","html_url":"https://github.com/davecarlson","followers_url":"https://api.github.com/users/davecarlson/followers","following_url":"https://api.github.com/users/davecarlson/following{/other_user}","gists_url":"https://api.github.com/users/davecarlson/gists{/gist_id}","starred_url":"https://api.github.com/users/davecarlson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davecarlson/subscriptions","organizations_url":"https://api.github.com/users/davecarlson/orgs","repos_url":"https://api.github.com/users/davecarlson/repos","events_url":"https://api.github.com/users/davecarlson/events{/privacy}","received_events_url":"https://api.github.com/users/davecarlson/received_events","type":"User","site_admin":false},"labels":[{"id":482888042,"node_id":"MDU6TGFiZWw0ODI4ODgwNDI=","url":"https://api.github.com/repos/vercel/next.js/labels/please%20add%20a%20complete%20reproduction","name":"please add a complete reproduction","color":"fbca04","default":false,"description":""},{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-24T07:38:48Z","updated_at":"2021-08-24T08:32:35Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\n\n11.1.0\n\n### What version of Node.js are you using?\n\n14.17.5\n\n### What browser are you using?\n\nChrome\n\n### What operating system are you using?\n\nMac OS\n\n### How are you deploying your application?\n\nlocally\n\n### Describe the Bug\n\nWhen compiling typescript files being used with typeorm (0.2.22),  I now get the following error:\r\nReferenceError: Cannot access '__WEBPACK_DEFAULT_EXPORT__' before initialization\r\n    at Module.default (webpack-internal:///./models/client.ts:3:42)\r\n    at eval (webpack-internal:///./models/home.ts:48:90)\r\n    at Object../models/home.ts (/workspace/.next/server/pages/api/v2/candidates/upcoming-dbs-expiry.js:122:1)\r\n    at __webpack_require__ (/workspace/.next/server/webpack-runtime.js:33:42)\r\n    at eval (webpack-internal:///./models/client.ts:7:63)\r\n    at Object../models/client.ts (/workspace/.next/server/pages/api/v2/candidates/upcoming-dbs-expiry.js:102:1)\r\n    at __webpack_require__ (/workspace/.next/server/webpack-runtime.js:33:42)\r\n    at eval (webpack-internal:///./models/candidate.ts:7:65)\r\n    at Object../models/candidate.ts (/workspace/.next/server/pages/api/v2/candidates/upcoming-dbs-expiry.js:62:1)\r\n    at __webpack_require__ (/workspace/.next/server/webpack-runtime.js:33:42)\r\nReferenceError: Cannot access '__WEBPACK_DEFAULT_EXPORT__' before initialization\r\n\r\n\n\n### Expected Behavior\n\nNo Error\n\n### To Reproduce\n\ninstall next & typeorm 0.2.2\r\ncreate a typescript model & link \r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28425","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28425/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28425/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28425/events","html_url":"https://github.com/vercel/next.js/issues/28425","id":977478099,"node_id":"MDU6SXNzdWU5Nzc0NzgwOTk=","number":28425,"title":"getServerSideProps redirect does not respect basePath option during client transitions","user":{"login":"jmay4826","id":29423481,"node_id":"MDQ6VXNlcjI5NDIzNDgx","avatar_url":"https://avatars.githubusercontent.com/u/29423481?v=4","gravatar_id":"","url":"https://api.github.com/users/jmay4826","html_url":"https://github.com/jmay4826","followers_url":"https://api.github.com/users/jmay4826/followers","following_url":"https://api.github.com/users/jmay4826/following{/other_user}","gists_url":"https://api.github.com/users/jmay4826/gists{/gist_id}","starred_url":"https://api.github.com/users/jmay4826/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmay4826/subscriptions","organizations_url":"https://api.github.com/users/jmay4826/orgs","repos_url":"https://api.github.com/users/jmay4826/repos","events_url":"https://api.github.com/users/jmay4826/events{/privacy}","received_events_url":"https://api.github.com/users/jmay4826/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-08-23T21:18:48Z","updated_at":"2021-08-31T00:25:04Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\n\n11.1.0\n\n### What version of Node.js are you using?\n\n14\n\n### What browser are you using?\n\nChrome\n\n### What operating system are you using?\n\nmacOS\n\n### How are you deploying your application?\n\nnext start\n\n### Describe the Bug\n\nWhen returning a `redirect` in `getServerSideProps`, the `basePath: false` option is ignored for client-side transitions only. When navigating directly to the page with the `redirect`, the `basePath: false` option is used correctly. This leads to different results when accessing a page with a redirect via client-side routing vs. entering the URL directly. The `basePath: false` option is used correctly with `redirect` in all cases in Next v10.2.3.\n\n### Expected Behavior\n\nWhen navigating to a page using `redirect` in `getServerSideProps`, the `basePath: false` option should always be respected, no matter how the user arrives on the page.\n\n### To Reproduce\n\nv11.1.0 CodeSandbox (with issue):  https://codesandbox.io/s/next-11-basepath-redirect-pbcp6?file=/pages/login.js\r\nv10.2.3 CodeSandbox (same code, no issue): https://codesandbox.io/s/next-10-2-3-basepath-redirect-krprr?file=/pages/login.js\r\n\r\n1. Visit https://pbcp6.sse.codesandbox.io/next-app/login.\r\n  a. The project has a `basePath` of `/next-app` set in `next.config.js`. This page contains a client-side transition to `/page-with-server-redirect` via `router.replace`.\r\n2. After the page loads, you will be sent to `/next-app/page-with-server-redirect`, which correctly includes the `basePath`.\r\n3. The `getServerSideProps` function for `page-with-server-redirect` will return a server-side redirect to `/without-basepath` with an option of `basePath: false`. You will be incorrectly redirected to `/next-app/without-basepath`, which incorrectly includes the `basePath`. \r\n4. Visit https://pbcp6.sse.codesandbox.io/next-app/page-with-server-redirect directly. You will be sent to `/without-basepath`, which correctly omits the `basePath` based on the `basePath: false` option.\r\n5. Repeat steps 1-4 in the v10.2.3 copy of the project: https://krprr.sse.codesandbox.io/next-app/login. The issue is not seen in this version. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28423","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28423/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28423/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28423/events","html_url":"https://github.com/vercel/next.js/issues/28423","id":977238934,"node_id":"MDU6SXNzdWU5NzcyMzg5MzQ=","number":28423,"title":"After upgrade to 11.1.0 in live logs: [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client","user":{"login":"PepijnSenders","id":2052659,"node_id":"MDQ6VXNlcjIwNTI2NTk=","avatar_url":"https://avatars.githubusercontent.com/u/2052659?v=4","gravatar_id":"","url":"https://api.github.com/users/PepijnSenders","html_url":"https://github.com/PepijnSenders","followers_url":"https://api.github.com/users/PepijnSenders/followers","following_url":"https://api.github.com/users/PepijnSenders/following{/other_user}","gists_url":"https://api.github.com/users/PepijnSenders/gists{/gist_id}","starred_url":"https://api.github.com/users/PepijnSenders/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PepijnSenders/subscriptions","organizations_url":"https://api.github.com/users/PepijnSenders/orgs","repos_url":"https://api.github.com/users/PepijnSenders/repos","events_url":"https://api.github.com/users/PepijnSenders/events{/privacy}","received_events_url":"https://api.github.com/users/PepijnSenders/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2021-08-23T17:03:45Z","updated_at":"2021-09-03T00:24:22Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"### What version of Next.js are you using?\r\n\r\n11.1.0\r\n\r\n### What version of Node.js are you using?\r\n\r\n14\r\n\r\n### What browser are you using?\r\n\r\nChrome\r\n\r\n### What operating system are you using?\r\n\r\nmacOS\r\n\r\n### How are you deploying your application?\r\n\r\nother\r\n\r\n### Describe the Bug\r\n\r\nSince upgrading to `11.1.0` we're seeing numerous errors that contain this message in our logs:\r\n\r\n```\r\n[ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\r\n```\r\n\r\nThe stacktrace is quite clear:\r\n\r\n```\r\n  \"at Server.renderError (/app/node_modules/next/dist/server/next-server.js:1363:17)\",\r\n  \"at Server.render404 (/app/node_modules/next/dist/server/next-server.js:1472:21)\",\r\n  \"at Server.renderToResponseWithComponents (/app/node_modules/next/dist/server/next-server.js:1257:28)\",\r\n```\r\n\r\nI tried to go through the history but could not find any changes besides this PR: https://github.com/vercel/next.js/pull/27303\r\n\r\n### Expected Behavior\r\n\r\nWe reverted back to 10.0.x because the 404 page was breaking too often. Would be nice if the next.js team could help with debugging this.\r\n\r\n### To Reproduce\r\n\r\nHaven't been able to isolate the case where this breaks sadly.","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28419","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28419/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28419/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28419/events","html_url":"https://github.com/vercel/next.js/issues/28419","id":977123067,"node_id":"MDU6SXNzdWU5NzcxMjMwNjc=","number":28419,"title":"[ESLint] Add better documentation for `no-html-link-for-pages` rule","user":{"login":"housseindjirdeh","id":12476932,"node_id":"MDQ6VXNlcjEyNDc2OTMy","avatar_url":"https://avatars.githubusercontent.com/u/12476932?v=4","gravatar_id":"","url":"https://api.github.com/users/housseindjirdeh","html_url":"https://github.com/housseindjirdeh","followers_url":"https://api.github.com/users/housseindjirdeh/followers","following_url":"https://api.github.com/users/housseindjirdeh/following{/other_user}","gists_url":"https://api.github.com/users/housseindjirdeh/gists{/gist_id}","starred_url":"https://api.github.com/users/housseindjirdeh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/housseindjirdeh/subscriptions","organizations_url":"https://api.github.com/users/housseindjirdeh/orgs","repos_url":"https://api.github.com/users/housseindjirdeh/repos","events_url":"https://api.github.com/users/housseindjirdeh/events{/privacy}","received_events_url":"https://api.github.com/users/housseindjirdeh/received_events","type":"User","site_admin":false},"labels":[{"id":2108224381,"node_id":"MDU6TGFiZWwyMTA4MjI0Mzgx","url":"https://api.github.com/repos/vercel/next.js/labels/kind:%20story","name":"kind: story","color":"3075c9","default":false,"description":null}],"state":"open","locked":false,"assignee":{"login":"housseindjirdeh","id":12476932,"node_id":"MDQ6VXNlcjEyNDc2OTMy","avatar_url":"https://avatars.githubusercontent.com/u/12476932?v=4","gravatar_id":"","url":"https://api.github.com/users/housseindjirdeh","html_url":"https://github.com/housseindjirdeh","followers_url":"https://api.github.com/users/housseindjirdeh/followers","following_url":"https://api.github.com/users/housseindjirdeh/following{/other_user}","gists_url":"https://api.github.com/users/housseindjirdeh/gists{/gist_id}","starred_url":"https://api.github.com/users/housseindjirdeh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/housseindjirdeh/subscriptions","organizations_url":"https://api.github.com/users/housseindjirdeh/orgs","repos_url":"https://api.github.com/users/housseindjirdeh/repos","events_url":"https://api.github.com/users/housseindjirdeh/events{/privacy}","received_events_url":"https://api.github.com/users/housseindjirdeh/received_events","type":"User","site_admin":false},"assignees":[{"login":"housseindjirdeh","id":12476932,"node_id":"MDQ6VXNlcjEyNDc2OTMy","avatar_url":"https://avatars.githubusercontent.com/u/12476932?v=4","gravatar_id":"","url":"https://api.github.com/users/housseindjirdeh","html_url":"https://github.com/housseindjirdeh","followers_url":"https://api.github.com/users/housseindjirdeh/followers","following_url":"https://api.github.com/users/housseindjirdeh/following{/other_user}","gists_url":"https://api.github.com/users/housseindjirdeh/gists{/gist_id}","starred_url":"https://api.github.com/users/housseindjirdeh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/housseindjirdeh/subscriptions","organizations_url":"https://api.github.com/users/housseindjirdeh/orgs","repos_url":"https://api.github.com/users/housseindjirdeh/repos","events_url":"https://api.github.com/users/housseindjirdeh/events{/privacy}","received_events_url":"https://api.github.com/users/housseindjirdeh/received_events","type":"User","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/vercel/next.js/milestones/27","html_url":"https://github.com/vercel/next.js/milestone/27","labels_url":"https://api.github.com/repos/vercel/next.js/milestones/27/labels","id":4969800,"node_id":"MDk6TWlsZXN0b25lNDk2OTgwMA==","number":27,"title":"11.x.x","description":"","creator":{"login":"Timer","id":616428,"node_id":"MDQ6VXNlcjYxNjQyOA==","avatar_url":"https://avatars.githubusercontent.com/u/616428?v=4","gravatar_id":"","url":"https://api.github.com/users/Timer","html_url":"https://github.com/Timer","followers_url":"https://api.github.com/users/Timer/followers","following_url":"https://api.github.com/users/Timer/following{/other_user}","gists_url":"https://api.github.com/users/Timer/gists{/gist_id}","starred_url":"https://api.github.com/users/Timer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Timer/subscriptions","organizations_url":"https://api.github.com/users/Timer/orgs","repos_url":"https://api.github.com/users/Timer/repos","events_url":"https://api.github.com/users/Timer/events{/privacy}","received_events_url":"https://api.github.com/users/Timer/received_events","type":"User","site_admin":false},"open_issues":65,"closed_issues":22,"state":"open","created_at":"2020-01-03T01:53:54Z","updated_at":"2021-08-24T08:37:45Z","due_on":null,"closed_at":null},"comments":0,"created_at":"2021-08-23T14:54:44Z","updated_at":"2021-08-24T08:37:45Z","closed_at":null,"author_association":"COLLABORATOR","active_lock_reason":null,"body":"### Describe the feature you'd like to request\n\nThe `no-html-link-for-pages` rule will [warn](https://github.com/vercel/next.js/blob/canary/packages/eslint-plugin-next/lib/rules/no-html-link-for-pages.js#L11-L16) you if the `pages/` directory cannot be found, but does not show how to configure options to define which directory it lives in.\n\n### Describe the solution you'd like\n\nAdd a section to the [No HTML link for pages](https://nextjs.org/docs/messages/no-html-link-for-pages) message page showing how.\n\n### Describe alternatives you've considered\n\nN/A","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28411","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28411/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28411/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28411/events","html_url":"https://github.com/vercel/next.js/issues/28411","id":976785861,"node_id":"MDU6SXNzdWU5NzY3ODU4NjE=","number":28411,"title":"Next/Link bypassing skip-link on top of page","user":{"login":"PixeledCode","id":22215209,"node_id":"MDQ6VXNlcjIyMjE1MjA5","avatar_url":"https://avatars.githubusercontent.com/u/22215209?v=4","gravatar_id":"","url":"https://api.github.com/users/PixeledCode","html_url":"https://github.com/PixeledCode","followers_url":"https://api.github.com/users/PixeledCode/followers","following_url":"https://api.github.com/users/PixeledCode/following{/other_user}","gists_url":"https://api.github.com/users/PixeledCode/gists{/gist_id}","starred_url":"https://api.github.com/users/PixeledCode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PixeledCode/subscriptions","organizations_url":"https://api.github.com/users/PixeledCode/orgs","repos_url":"https://api.github.com/users/PixeledCode/repos","events_url":"https://api.github.com/users/PixeledCode/events{/privacy}","received_events_url":"https://api.github.com/users/PixeledCode/received_events","type":"User","site_admin":false},"labels":[{"id":549032284,"node_id":"MDU6TGFiZWw1NDkwMzIyODQ=","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20example","name":"type: example","color":"ecffaf","default":false,"description":""},{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-23T08:47:50Z","updated_at":"2021-08-24T05:22:41Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What example does this report relate to?\r\n\r\nnext/link\r\n\r\n### What version of Next.js are you using?\r\n\r\n11.1.0\r\n\r\n### What version of Node.js are you using?\r\n\r\n14.16.1\r\n\r\n### What browser are you using?\r\n\r\nMozilla Firefox\r\n\r\n### What operating system are you using?\r\n\r\nWindows\r\n\r\n### How are you deploying your application?\r\n\r\nnext dev\r\n\r\n### Describe the Bug\r\n\r\nlinks using Next/Link are bypassing the skip-link component that is used for accessibility for keyboard users. It works when refreshed the page but if we change the page, using `Tab` will not trigger the skip-link component to show up.\r\n\r\nThis bug appears when the page is cached. So if you open incognito mode, all links will work for the first time as expected but when visited again, they will fail to work.\r\n\r\n### Expected Behavior\r\n\r\nWhenever we change the page, the first `Tab` click should trigger a skip-link that is available there.\r\n\r\n### To Reproduce\r\n\r\n1. Go to https://vercel.com/home\r\n2. Click on `Integrations` on the navigation bar.\r\n3. Hit the `Tab` key on the keyboard.","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28409","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28409/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28409/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28409/events","html_url":"https://github.com/vercel/next.js/issues/28409","id":976743940,"node_id":"MDU6SXNzdWU5NzY3NDM5NDA=","number":28409,"title":"with-sentry next export does not work","user":{"login":"talaikis","id":7689499,"node_id":"MDQ6VXNlcjc2ODk0OTk=","avatar_url":"https://avatars.githubusercontent.com/u/7689499?v=4","gravatar_id":"","url":"https://api.github.com/users/talaikis","html_url":"https://github.com/talaikis","followers_url":"https://api.github.com/users/talaikis/followers","following_url":"https://api.github.com/users/talaikis/following{/other_user}","gists_url":"https://api.github.com/users/talaikis/gists{/gist_id}","starred_url":"https://api.github.com/users/talaikis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/talaikis/subscriptions","organizations_url":"https://api.github.com/users/talaikis/orgs","repos_url":"https://api.github.com/users/talaikis/repos","events_url":"https://api.github.com/users/talaikis/events{/privacy}","received_events_url":"https://api.github.com/users/talaikis/received_events","type":"User","site_admin":false},"labels":[{"id":549032284,"node_id":"MDU6TGFiZWw1NDkwMzIyODQ=","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20example","name":"type: example","color":"ecffaf","default":false,"description":""},{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-23T08:01:16Z","updated_at":"2021-08-23T08:03:40Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What example does this report relate to?\r\n\r\nwith-sentry\r\n\r\n### What version of Next.js are you using?\r\n\r\n11.1.0\r\n\r\n### What version of Node.js are you using?\r\n\r\n14.17.0\r\n\r\n### What browser are you using?\r\n\r\nChrome\r\n\r\n### What operating system are you using?\r\n\r\nWindows 10\r\n\r\n### How are you deploying your application?\r\n\r\nnext build && next export\r\n\r\n### Describe the Bug\r\n\r\nSame for pages that have no serverSideProps:\r\n\r\n```\r\nError occurred prerendering page \"/ssr/test1\". Read more: https://nextjs.org/docs/messages/prerender-error\r\nError: Error for page /ssr/test1: pages with `getServerSideProps` can not be exported. See more info here: https://nextjs.org/docs/messages/gssp-export\r\n    at \\with-sentry-app\\node_modules\\next\\dist\\export\\worker.js:228:27\r\n    at async Span.traceAsyncFn (with-sentry-app\\node_modules\\next\\dist\\telemetry\\trace\\trace.js:60:20)\r\n```\r\n\r\n### Expected Behavior\r\n\r\n`next export` should work\r\n\r\n### To Reproduce\r\n\r\n```bash\r\nnpx create-next-app --example with-sentry with-sentry-app\r\ncd with-sentry-app\r\nnpm run build\r\nnpx next export\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28403","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28403/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28403/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28403/events","html_url":"https://github.com/vercel/next.js/issues/28403","id":976537151,"node_id":"MDU6SXNzdWU5NzY1MzcxNTE=","number":28403,"title":"Link component doesn't respect the <base> HTML element target attribute in chrome","user":{"login":"maxquinn","id":18385481,"node_id":"MDQ6VXNlcjE4Mzg1NDgx","avatar_url":"https://avatars.githubusercontent.com/u/18385481?v=4","gravatar_id":"","url":"https://api.github.com/users/maxquinn","html_url":"https://github.com/maxquinn","followers_url":"https://api.github.com/users/maxquinn/followers","following_url":"https://api.github.com/users/maxquinn/following{/other_user}","gists_url":"https://api.github.com/users/maxquinn/gists{/gist_id}","starred_url":"https://api.github.com/users/maxquinn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maxquinn/subscriptions","organizations_url":"https://api.github.com/users/maxquinn/orgs","repos_url":"https://api.github.com/users/maxquinn/repos","events_url":"https://api.github.com/users/maxquinn/events{/privacy}","received_events_url":"https://api.github.com/users/maxquinn/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-23T01:26:56Z","updated_at":"2021-08-23T01:26:56Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\n\n11.1.0\n\n### What version of Node.js are you using?\n\n14.16.0\n\n### What browser are you using?\n\nChrome, Safari, Firefox\n\n### What operating system are you using?\n\nmacOS\n\n### How are you deploying your application?\n\nGCP\n\n### Describe the Bug\n\nAdding the `<base target=\"_blank\" />` element to a page before anchor links should make them open in a new tab as per https://developer.mozilla.org/en-US/docs/Web/HTML/Element/base#attr-target\r\n\r\nThe expected behaviour does not happen when using the `next/link` component with a relative path to page in the same app as the href. Instead the page just loads normally in the same tab.\r\n\r\nInterestingly this issue doesn't occur in Firefox but appears to be an issue in every other major browser.\n\n### Expected Behavior\n\nAny anchor link should open in a new tab if `<base target=\"_blank\" />` appears on the page before the anchor element. \n\n### To Reproduce\n\nhttps://github.com/maxquinn/next-base-llink-bug","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28363","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28363/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28363/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28363/events","html_url":"https://github.com/vercel/next.js/pull/28363","id":975969877,"node_id":"MDExOlB1bGxSZXF1ZXN0NzE3MDM4NzAx","number":28363,"title":"Bump squoosh latest canary","user":{"login":"styfle","id":229881,"node_id":"MDQ6VXNlcjIyOTg4MQ==","avatar_url":"https://avatars.githubusercontent.com/u/229881?v=4","gravatar_id":"","url":"https://api.github.com/users/styfle","html_url":"https://github.com/styfle","followers_url":"https://api.github.com/users/styfle/followers","following_url":"https://api.github.com/users/styfle/following{/other_user}","gists_url":"https://api.github.com/users/styfle/gists{/gist_id}","starred_url":"https://api.github.com/users/styfle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/styfle/subscriptions","organizations_url":"https://api.github.com/users/styfle/orgs","repos_url":"https://api.github.com/users/styfle/repos","events_url":"https://api.github.com/users/styfle/events{/privacy}","received_events_url":"https://api.github.com/users/styfle/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"The Next.js team at Vercel"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-08-20T23:01:16Z","updated_at":"2021-08-25T12:02:50Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28363","html_url":"https://github.com/vercel/next.js/pull/28363","diff_url":"https://github.com/vercel/next.js/pull/28363.diff","patch_url":"https://github.com/vercel/next.js/pull/28363.patch"},"body":"WIP\r\n\r\n- Fixes #27092 \r\n- Depends on https://github.com/GoogleChromeLabs/squoosh/pull/1123","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28359","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28359/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28359/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28359/events","html_url":"https://github.com/vercel/next.js/pull/28359","id":975893975,"node_id":"MDExOlB1bGxSZXF1ZXN0NzE2OTc1ODM0","number":28359,"title":"fix(with-sentry example): Small tweaks","user":{"login":"lobsterkatie","id":14812505,"node_id":"MDQ6VXNlcjE0ODEyNTA1","avatar_url":"https://avatars.githubusercontent.com/u/14812505?v=4","gravatar_id":"","url":"https://api.github.com/users/lobsterkatie","html_url":"https://github.com/lobsterkatie","followers_url":"https://api.github.com/users/lobsterkatie/followers","following_url":"https://api.github.com/users/lobsterkatie/following{/other_user}","gists_url":"https://api.github.com/users/lobsterkatie/gists{/gist_id}","starred_url":"https://api.github.com/users/lobsterkatie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lobsterkatie/subscriptions","organizations_url":"https://api.github.com/users/lobsterkatie/orgs","repos_url":"https://api.github.com/users/lobsterkatie/repos","events_url":"https://api.github.com/users/lobsterkatie/events{/privacy}","received_events_url":"https://api.github.com/users/lobsterkatie/received_events","type":"User","site_admin":false},"labels":[{"id":549032284,"node_id":"MDU6TGFiZWw1NDkwMzIyODQ=","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20example","name":"type: example","color":"ecffaf","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-20T20:16:02Z","updated_at":"2021-08-20T21:29:30Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28359","html_url":"https://github.com/vercel/next.js/pull/28359","diff_url":"https://github.com/vercel/next.js/pull/28359.diff","patch_url":"https://github.com/vercel/next.js/pull/28359.patch"},"body":"This PR makes two changes:\r\n\r\n- It updates the index page to reflect the fact that `withSentry` should now be working for API routes deployed to Vercel.\r\n- It changes the route which returns a promise rejection to be more obvious about the fact that that's what it's doing.","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28352","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28352/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28352/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28352/events","html_url":"https://github.com/vercel/next.js/issues/28352","id":975835644,"node_id":"MDU6SXNzdWU5NzU4MzU2NDQ=","number":28352,"title":"Lint failing","user":{"login":"lorensr","id":251288,"node_id":"MDQ6VXNlcjI1MTI4OA==","avatar_url":"https://avatars.githubusercontent.com/u/251288?v=4","gravatar_id":"","url":"https://api.github.com/users/lorensr","html_url":"https://github.com/lorensr","followers_url":"https://api.github.com/users/lorensr/followers","following_url":"https://api.github.com/users/lorensr/following{/other_user}","gists_url":"https://api.github.com/users/lorensr/gists{/gist_id}","starred_url":"https://api.github.com/users/lorensr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorensr/subscriptions","organizations_url":"https://api.github.com/users/lorensr/orgs","repos_url":"https://api.github.com/users/lorensr/repos","events_url":"https://api.github.com/users/lorensr/events{/privacy}","received_events_url":"https://api.github.com/users/lorensr/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2021-08-20T18:36:28Z","updated_at":"2021-08-21T15:09:04Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"### What version of Next.js are you using?\n\ncanary@a0f64ba\n\n### What version of Node.js are you using?\n\n16.6.2\n\n### What browser are you using?\n\nn/a\n\n### What operating system are you using?\n\nmacOS 11.4\n\n### How are you deploying your application?\n\nn/a\n\n### Describe the Bug\n\nWhen I run `npm run lint`, I get exit code 2 with this output:\r\n\r\n<details>\r\n\r\n```\r\ntest/test-file.txt: no issues found\r\nexamples/cms-sanity/lib/sanity.js\r\nexamples/custom-server-hapi/next-wrapper.js\r\nexamples/with-draft-js/pages/index.js\r\nexamples/with-fauna/pages/index.js\r\nexamples/with-msw/mocks/handlers.js\r\nlerna ERR! yarn run typescript exited 2 in 'next'\r\nexamples/with-prisma/README.mdlerna ERR! yarn run typescript stdout:\r\nyarn run v1.22.5\r\n$ tsc --noEmit --declaration\r\nbuild/webpack/plugins/next-trace-entrypoints-plugin.ts(2,10): error TS2305: Module '\"next/dist/compiled/@vercel/nft\"' has no exported member 'nodeFileTrace'.\r\nbuild/webpack/plugins/next-trace-entrypoints-plugin.ts(2,31): error TS2497: This module can only be referenced with ECMAScript imports/exports by turning on the 'allowSyntheticDefaultImports' flag and referencing its default export.\r\nserver/render.tsx(1014,29): error TS7006: Parameter 'observer' implicitly has an 'any' type.\r\nserver/render.tsx(1264,26): error TS2503: Cannot find namespace 'ZenObservable'.\r\nserver/render.tsx(1266,21): error TS2503: Cannot find namespace 'ZenObservable'.\r\nserver/render.tsx(1270,10): error TS7006: Parameter 'chunk' implicitly has an 'any' type.\r\nserver/render.tsx(1274,11): error TS7006: Parameter 'error' implicitly has an 'any' type.\r\nserver/render.tsx(1290,26): error TS7006: Parameter 'observer' implicitly has an 'any' type.\r\nserver/send-payload.ts(124,54): error TS7006: Parameter 'chunk' implicitly has an 'any' type.\r\ntypes/misc.d.ts(191,17): error TS2307: Cannot find module '@vercel/nft' or its corresponding type declarations.\r\ntypes/misc.d.ts(227,17): error TS2307: Cannot find module 'zen-observable' or its corresponding type declarations.\r\ninfo Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.\r\nlerna ERR! yarn run typescript stderr:\r\nerror Command failed with exit code 2.\r\nlerna ERR! yarn run typescript exited 2 in 'next'\r\nexamples/with-react-bootstrap/README.mdERROR: \"lint-typescript\" exited with 2.\r\n```\r\n\r\n</details>\n\n### Expected Behavior\n\nExit code 0\n\n### To Reproduce\n\n`npm run lint` on latest canary, `a0f64ba`.","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28346","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28346/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28346/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28346/events","html_url":"https://github.com/vercel/next.js/pull/28346","id":975751003,"node_id":"MDExOlB1bGxSZXF1ZXN0NzE2ODU2NjU1","number":28346,"title":"Add docs on sitemaps for Next.js.","user":{"login":"leerob","id":9113740,"node_id":"MDQ6VXNlcjkxMTM3NDA=","avatar_url":"https://avatars.githubusercontent.com/u/9113740?v=4","gravatar_id":"","url":"https://api.github.com/users/leerob","html_url":"https://github.com/leerob","followers_url":"https://api.github.com/users/leerob/followers","following_url":"https://api.github.com/users/leerob/following{/other_user}","gists_url":"https://api.github.com/users/leerob/gists{/gist_id}","starred_url":"https://api.github.com/users/leerob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leerob/subscriptions","organizations_url":"https://api.github.com/users/leerob/orgs","repos_url":"https://api.github.com/users/leerob/repos","events_url":"https://api.github.com/users/leerob/events{/privacy}","received_events_url":"https://api.github.com/users/leerob/received_events","type":"User","site_admin":false},"labels":[{"id":549032284,"node_id":"MDU6TGFiZWw1NDkwMzIyODQ=","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20example","name":"type: example","color":"ecffaf","default":false,"description":""},{"id":1124940486,"node_id":"MDU6TGFiZWwxMTI0OTQwNDg2","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20documentation","name":"type: documentation","color":"a3f7d0","default":false,"description":""},{"id":3129153557,"node_id":"MDU6TGFiZWwzMTI5MTUzNTU3","url":"https://api.github.com/repos/vercel/next.js/labels/created-by:%20Next.js%20team","name":"created-by: Next.js team","color":"000000","default":false,"description":"The Next.js team at Vercel"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-08-20T16:20:40Z","updated_at":"2021-08-27T18:55:01Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28346","html_url":"https://github.com/vercel/next.js/pull/28346","diff_url":"https://github.com/vercel/next.js/pull/28346.diff","patch_url":"https://github.com/vercel/next.js/pull/28346.patch"},"body":"Migrated and slightly tweaked my blog on sitemaps (https://leerob.io/blog/nextjs-sitemap-robots) to the docs. Will redirect my blog here once it's released.","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28340","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28340/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28340/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28340/events","html_url":"https://github.com/vercel/next.js/issues/28340","id":975632611,"node_id":"MDU6SXNzdWU5NzU2MzI2MTE=","number":28340,"title":"Some component styles are unloaded/not loaded in development mode","user":{"login":"x4th","id":12177451,"node_id":"MDQ6VXNlcjEyMTc3NDUx","avatar_url":"https://avatars.githubusercontent.com/u/12177451?v=4","gravatar_id":"","url":"https://api.github.com/users/x4th","html_url":"https://github.com/x4th","followers_url":"https://api.github.com/users/x4th/followers","following_url":"https://api.github.com/users/x4th/following{/other_user}","gists_url":"https://api.github.com/users/x4th/gists{/gist_id}","starred_url":"https://api.github.com/users/x4th/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/x4th/subscriptions","organizations_url":"https://api.github.com/users/x4th/orgs","repos_url":"https://api.github.com/users/x4th/repos","events_url":"https://api.github.com/users/x4th/events{/privacy}","received_events_url":"https://api.github.com/users/x4th/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-08-20T13:53:38Z","updated_at":"2021-08-20T14:04:47Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\r\n\r\n11.1.0\r\n\r\n### What version of Node.js are you using?\r\n\r\n15.12.0\r\n\r\n### What browser are you using?\r\n\r\nFirefox Developer Edition 92.0b6\r\n\r\n### What operating system are you using?\r\n\r\nmacOS\r\n\r\n### How are you deploying your application?\r\n\r\nVercel\r\n\r\n### Describe the Bug\r\n\r\nThere's two ways I'm experiencing this bug:\r\n\r\n1. Leave the tab, come back to it after a while and some styles are broken.\r\n2. Navigate through the app, land on some page and some styles are broken.\r\n\r\nThe problem is that some style tags in the header which hold component styles are not included.\r\nIn the first case, I come back to the page and there are less style tags (does next do some cleanup of styles when the app is in the background?).\r\nIn the second case as I'm navigating around and land on a page, some component's styles don't get included.\r\n\r\nIn both cases if I stay on the page the app refreshes. During testing this is very frustrating because app state is lost.\r\n\r\nI can't see a clear pattern on which component styles are problematic neither can I find a sequence of pages to visit to always reproduce the bug. But it always happens after a few minutes top.\r\n\r\nFor styling, we're using component-level Sass via CSS Modules. I'm here for any further questions.\r\n\r\n### Expected Behavior\r\n\r\nThe right styles to be included at all times in dev mode.\r\n\r\n### To Reproduce\r\n\r\nI really don't know how to reproduce this but I can send the codebase to a maintainer.","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28336","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28336/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28336/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28336/events","html_url":"https://github.com/vercel/next.js/pull/28336","id":975615626,"node_id":"MDExOlB1bGxSZXF1ZXN0NzE2NzQxNjQ1","number":28336,"title":"Update with-react-intl example","user":{"login":"HaNdTriX","id":1265681,"node_id":"MDQ6VXNlcjEyNjU2ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1265681?v=4","gravatar_id":"","url":"https://api.github.com/users/HaNdTriX","html_url":"https://github.com/HaNdTriX","followers_url":"https://api.github.com/users/HaNdTriX/followers","following_url":"https://api.github.com/users/HaNdTriX/following{/other_user}","gists_url":"https://api.github.com/users/HaNdTriX/gists{/gist_id}","starred_url":"https://api.github.com/users/HaNdTriX/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HaNdTriX/subscriptions","organizations_url":"https://api.github.com/users/HaNdTriX/orgs","repos_url":"https://api.github.com/users/HaNdTriX/repos","events_url":"https://api.github.com/users/HaNdTriX/events{/privacy}","received_events_url":"https://api.github.com/users/HaNdTriX/received_events","type":"User","site_admin":false},"labels":[{"id":549032284,"node_id":"MDU6TGFiZWw1NDkwMzIyODQ=","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20example","name":"type: example","color":"ecffaf","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-20T13:32:35Z","updated_at":"2021-08-26T16:20:11Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28336","html_url":"https://github.com/vercel/next.js/pull/28336","diff_url":"https://github.com/vercel/next.js/pull/28336.diff","patch_url":"https://github.com/vercel/next.js/pull/28336.patch"},"body":"This PR implements Internationalized Routing using formatjs / react-intl.\r\n\r\n## Changelog\r\n\r\n- Updated formatjs to latest version\r\n- Remove  deprecated babel-react-intl-plugin in favor of babel-formatjs-plugin\r\n- Remove server in favour of Internationalized Routing\r\n- Added linter with formatjs rules\r\n- Refactored JSX\r\n- Added missing types\r\n- Auto run formtjs script via before hooks\r\n- Adjusted readme docs\r\n- Added message descriptions\r\n- Removed default configs\r\n\r\n<!--\r\nThanks for opening a PR! Your contribution is much appreciated.\r\nIn order to make sure your PR is handled as smoothly as possible we request that you follow the checklist sections below.\r\nChoose the right checklist for the change that you're making:\r\n-->\r\n\r\nfixes #27870\r\n\r\n## Bug\r\n\r\n- [x] Related issues linked using `fixes #number`\r\n- [ ] Integration tests added\r\n- [ ] Errors have helpful link attached, see `contributing.md`\r\n\r\n## Feature\r\n\r\n- [ ] Implements an existing feature request or RFC. Make sure the feature request has been accepted for implementation before opening a PR.\r\n- [ ] Related issues linked using `fixes #number`\r\n- [ ] Integration tests added\r\n- [ ] Documentation added\r\n- [ ] Telemetry added. In case of a feature if it's used or not.\r\n- [ ] Errors have helpful link attached, see `contributing.md`\r\n\r\n## Documentation / Examples\r\n\r\n- [x] Make sure the linting passes\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28316","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28316/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28316/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28316/events","html_url":"https://github.com/vercel/next.js/pull/28316","id":975322078,"node_id":"MDExOlB1bGxSZXF1ZXN0NzE2NDg5OTE3","number":28316,"title":"Include submodules in exported type definition","user":{"login":"lfades","id":4278345,"node_id":"MDQ6VXNlcjQyNzgzNDU=","avatar_url":"https://avatars.githubusercontent.com/u/4278345?v=4","gravatar_id":"","url":"https://api.github.com/users/lfades","html_url":"https://github.com/lfades","followers_url":"https://api.github.com/users/lfades/followers","following_url":"https://api.github.com/users/lfades/following{/other_user}","gists_url":"https://api.github.com/users/lfades/gists{/gist_id}","starred_url":"https://api.github.com/users/lfades/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lfades/subscriptions","organizations_url":"https://api.github.com/users/lfades/orgs","repos_url":"https://api.github.com/users/lfades/repos","events_url":"https://api.github.com/users/lfades/events{/privacy}","received_events_url":"https://api.github.com/users/lfades/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""},{"id":2108224491,"node_id":"MDU6TGFiZWwyMTA4MjI0NDkx","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20create-next-app","name":"type: create-next-app","color":"9effbb","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2021-08-20T06:53:29Z","updated_at":"2021-08-20T07:18:16Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28316","html_url":"https://github.com/vercel/next.js/pull/28316","diff_url":"https://github.com/vercel/next.js/pull/28316.diff","patch_url":"https://github.com/vercel/next.js/pull/28316.patch"},"body":"Currently, it's not possible to autocomplete imports coming from submodules in the Next.js package, like `next/image`, `next/script`, `next/router`, etc.\r\n\r\nWith this PR there's a new `index.d.ts` that adds a reference to most of the submodules, excluding `babel`, `client`, `constants` and `data` (which points to a non-existing file so maybe it should be removed?). Adding them to the current `types/index.d.ts` results in an error because these references are only valid after `dist` has the definitions inside.\r\n\r\nAdding tests here is not possible I believe, there are no real changes more than improved autocompletion\r\n\r\n**Note:** It's possible to also get rid of `next-env.d.ts` for every Next.js app if wanted, by moving the references in there to `files` in `tsconfig.json` instead of using `includes`, or by adding a tsconfig in Next.js and then using `extends`.","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28315","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28315/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28315/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28315/events","html_url":"https://github.com/vercel/next.js/issues/28315","id":975247317,"node_id":"MDU6SXNzdWU5NzUyNDczMTc=","number":28315,"title":"injected next/script code doesn't change","user":{"login":"kibaek-kimm","id":19887743,"node_id":"MDQ6VXNlcjE5ODg3NzQz","avatar_url":"https://avatars.githubusercontent.com/u/19887743?v=4","gravatar_id":"","url":"https://api.github.com/users/kibaek-kimm","html_url":"https://github.com/kibaek-kimm","followers_url":"https://api.github.com/users/kibaek-kimm/followers","following_url":"https://api.github.com/users/kibaek-kimm/following{/other_user}","gists_url":"https://api.github.com/users/kibaek-kimm/gists{/gist_id}","starred_url":"https://api.github.com/users/kibaek-kimm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kibaek-kimm/subscriptions","organizations_url":"https://api.github.com/users/kibaek-kimm/orgs","repos_url":"https://api.github.com/users/kibaek-kimm/repos","events_url":"https://api.github.com/users/kibaek-kimm/events{/privacy}","received_events_url":"https://api.github.com/users/kibaek-kimm/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-20T04:15:11Z","updated_at":"2021-08-20T04:35:53Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\r\n\r\n11.1.0\r\n\r\n### What version of Node.js are you using?\r\n\r\n14.16.0\r\n\r\n### What browser are you using?\r\n\r\nChrome\r\n\r\n### What operating system are you using?\r\n\r\nMac\r\n\r\n### How are you deploying your application?\r\n\r\nother (aws)\r\n\r\n### Describe the Bug\r\n\r\nMy third-party script code changed by page url.\r\nBut Injected next/script code doesn't change. And even stack up script code when entered other page.\r\n\r\n**Visit `https://domain/a`**\r\n```html\r\n<body>\r\n  ...\r\n  <script>\r\n    track(\"a page\")\r\n  </script>\r\n</body>\r\n```\r\n\r\n**And move to `https://domain/b`**\r\n```html\r\n<body>\r\n  ...\r\n  <script>\r\n    track(\"a page\")\r\n  </script>\r\n  <script>\r\n    track(\"b page\")\r\n  </script>\r\n</body>\r\n```\r\n\r\n\r\n### Expected Behavior\r\n\r\n* Delete previous script code\r\n\r\n**Visit `https://domain/a`**\r\n```html\r\n<body>\r\n  ...\r\n  <script>\r\n    track(\"a page\")\r\n  </script>\r\n</body>\r\n```\r\n\r\n**And move to `https://domain/b`**\r\n```html\r\n<body>\r\n  ...\r\n  <!-- Delete a page code \r\n  <!-- <script> \r\n  <!--  track(\"a page\") \r\n  </script> -->\r\n  <script>\r\n    track(\"b page\")\r\n  </script>\r\n</body>\r\n```\r\n\r\n### To Reproduce\r\n\r\n_app.tsx\r\n\r\n```javascript\r\nconst { asPath } = useRouter();\r\nconst myScript = useMemo(() => {\r\n  let message;\r\n  switch(asPath) {\r\n    case \"/a\":\r\n      message = \"hello a\";\r\n      break; \r\n    case \"/b\":\r\n      message = \"hello b\";\r\n      break;\r\n    default:\r\n      return null;\r\n  }\r\n\r\n  <Script\r\n    strategy=\"beforeInteractive\"\r\n    dangerouslySetInnerHTML={{\r\n      __html: `\r\n        console.log(\"${message}\");\r\n      `,\r\n        }}\r\n      />\r\n\r\n}, [asPath]);\r\n\r\n\r\nreturn (\r\n  <>\r\n    {myScript}\r\n  </>\r\n)\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28307","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28307/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28307/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28307/events","html_url":"https://github.com/vercel/next.js/issues/28307","id":975023894,"node_id":"MDU6SXNzdWU5NzUwMjM4OTQ=","number":28307,"title":"images do not emit images that were imported in _document","user":{"login":"ScriptedAlchemy","id":25274700,"node_id":"MDQ6VXNlcjI1Mjc0NzAw","avatar_url":"https://avatars.githubusercontent.com/u/25274700?v=4","gravatar_id":"","url":"https://api.github.com/users/ScriptedAlchemy","html_url":"https://github.com/ScriptedAlchemy","followers_url":"https://api.github.com/users/ScriptedAlchemy/followers","following_url":"https://api.github.com/users/ScriptedAlchemy/following{/other_user}","gists_url":"https://api.github.com/users/ScriptedAlchemy/gists{/gist_id}","starred_url":"https://api.github.com/users/ScriptedAlchemy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ScriptedAlchemy/subscriptions","organizations_url":"https://api.github.com/users/ScriptedAlchemy/orgs","repos_url":"https://api.github.com/users/ScriptedAlchemy/repos","events_url":"https://api.github.com/users/ScriptedAlchemy/events{/privacy}","received_events_url":"https://api.github.com/users/ScriptedAlchemy/received_events","type":"User","site_admin":false},"labels":[{"id":455907192,"node_id":"MDU6TGFiZWw0NTU5MDcxOTI=","url":"https://api.github.com/repos/vercel/next.js/labels/kind:%20bug","name":"kind: bug","color":"d1323a","default":false,"description":""},{"id":475935585,"node_id":"MDU6TGFiZWw0NzU5MzU1ODU=","url":"https://api.github.com/repos/vercel/next.js/labels/good%20first%20issue","name":"good first issue","color":"35d64d","default":true,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/vercel/next.js/milestones/17","html_url":"https://github.com/vercel/next.js/milestone/17","labels_url":"https://api.github.com/repos/vercel/next.js/milestones/17/labels","id":4617417,"node_id":"MDk6TWlsZXN0b25lNDYxNzQxNw==","number":17,"title":"backlog","description":"","creator":{"login":"Timer","id":616428,"node_id":"MDQ6VXNlcjYxNjQyOA==","avatar_url":"https://avatars.githubusercontent.com/u/616428?v=4","gravatar_id":"","url":"https://api.github.com/users/Timer","html_url":"https://github.com/Timer","followers_url":"https://api.github.com/users/Timer/followers","following_url":"https://api.github.com/users/Timer/following{/other_user}","gists_url":"https://api.github.com/users/Timer/gists{/gist_id}","starred_url":"https://api.github.com/users/Timer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Timer/subscriptions","organizations_url":"https://api.github.com/users/Timer/orgs","repos_url":"https://api.github.com/users/Timer/repos","events_url":"https://api.github.com/users/Timer/events{/privacy}","received_events_url":"https://api.github.com/users/Timer/received_events","type":"User","site_admin":false},"open_issues":194,"closed_issues":32,"state":"open","created_at":"2019-08-30T17:35:08Z","updated_at":"2021-08-20T13:49:18Z","due_on":null,"closed_at":null},"comments":2,"created_at":"2021-08-19T20:29:16Z","updated_at":"2021-08-20T18:13:55Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"### What version of Next.js are you using?\n\n11.1.0\n\n### What version of Node.js are you using?\n\n14\n\n### What browser are you using?\n\nchrome\n\n### What operating system are you using?\n\nmacOS\n\n### How are you deploying your application?\n\nOther (serverless aws) \n\n### Describe the Bug\n\nWhen importing images into `_document` next does not emit these image assets into the client build. \r\n\r\nFor example, If i have favicons\r\n\r\n```js\r\nimport favicon from '../assets/icons/favicon.ico';\r\nimport favicon16 from '../assets/icons/favicon-16x16.png';\r\nimport favicon32 from '../assets/icons/favicon-32x32.png';\r\n```\r\n\r\nThey will end up in the serverless directory and are never emitted into the client directory, making them unavailable when the browser attempts to load them \r\n\r\nIf i move these meta tags into `_app`, the assets are imported as expected. \n\n### Expected Behavior\n\nImage assets should always emit to the client directory \n\n### To Reproduce\n\nimport an image in _document and check the .next build output","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28306","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28306/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28306/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28306/events","html_url":"https://github.com/vercel/next.js/pull/28306","id":975013129,"node_id":"MDExOlB1bGxSZXF1ZXN0NzE2MjMxNTQy","number":28306,"title":"fix: asset prefix on images","user":{"login":"ScriptedAlchemy","id":25274700,"node_id":"MDQ6VXNlcjI1Mjc0NzAw","avatar_url":"https://avatars.githubusercontent.com/u/25274700?v=4","gravatar_id":"","url":"https://api.github.com/users/ScriptedAlchemy","html_url":"https://github.com/ScriptedAlchemy","followers_url":"https://api.github.com/users/ScriptedAlchemy/followers","following_url":"https://api.github.com/users/ScriptedAlchemy/following{/other_user}","gists_url":"https://api.github.com/users/ScriptedAlchemy/gists{/gist_id}","starred_url":"https://api.github.com/users/ScriptedAlchemy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ScriptedAlchemy/subscriptions","organizations_url":"https://api.github.com/users/ScriptedAlchemy/orgs","repos_url":"https://api.github.com/users/ScriptedAlchemy/repos","events_url":"https://api.github.com/users/ScriptedAlchemy/events{/privacy}","received_events_url":"https://api.github.com/users/ScriptedAlchemy/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2021-08-19T20:16:35Z","updated_at":"2021-08-31T07:55:34Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28306","html_url":"https://github.com/vercel/next.js/pull/28306","diff_url":"https://github.com/vercel/next.js/pull/28306.diff","patch_url":"https://github.com/vercel/next.js/pull/28306.patch"},"body":"Adding asset prefix support to next-images-loader\r\nfixes #28305\r\n<!--\r\nThanks for opening a PR! Your contribution is much appreciated.\r\nIn order to make sure your PR is handled as smoothly as possible we request that you follow the checklist sections below.\r\nChoose the right checklist for the change that you're making:\r\n-->\r\n\r\n## Bug\r\n\r\n- [x] Related issues linked using `fixes #number`\r\n- [ ] Integration tests added\r\n- [ ] Errors have helpful link attached, see `contributing.md`\r\n\r\n## Feature\r\n\r\n- [ ] Implements an existing feature request or RFC. Make sure the feature request has been accepted for implementation before opening a PR.\r\n- [ ] Related issues linked using `fixes #number`\r\n- [ ] Integration tests added\r\n- [ ] Documentation added\r\n- [ ] Telemetry added. In case of a feature if it's used or not.\r\n- [ ] Errors have helpful link attached, see `contributing.md`\r\n\r\n## Documentation / Examples\r\n\r\n- [ ] Make sure the linting passes\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28305","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28305/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28305/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28305/events","html_url":"https://github.com/vercel/next.js/issues/28305","id":975012726,"node_id":"MDU6SXNzdWU5NzUwMTI3MjY=","number":28305,"title":"next-image-loader does not respect assetPrefix","user":{"login":"ScriptedAlchemy","id":25274700,"node_id":"MDQ6VXNlcjI1Mjc0NzAw","avatar_url":"https://avatars.githubusercontent.com/u/25274700?v=4","gravatar_id":"","url":"https://api.github.com/users/ScriptedAlchemy","html_url":"https://github.com/ScriptedAlchemy","followers_url":"https://api.github.com/users/ScriptedAlchemy/followers","following_url":"https://api.github.com/users/ScriptedAlchemy/following{/other_user}","gists_url":"https://api.github.com/users/ScriptedAlchemy/gists{/gist_id}","starred_url":"https://api.github.com/users/ScriptedAlchemy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ScriptedAlchemy/subscriptions","organizations_url":"https://api.github.com/users/ScriptedAlchemy/orgs","repos_url":"https://api.github.com/users/ScriptedAlchemy/repos","events_url":"https://api.github.com/users/ScriptedAlchemy/events{/privacy}","received_events_url":"https://api.github.com/users/ScriptedAlchemy/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-08-19T20:16:01Z","updated_at":"2021-08-20T13:47:47Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"### What version of Next.js are you using?\r\n\r\n11.1.0\r\n\r\n### What version of Node.js are you using?\r\n\r\n14\r\n\r\n### What browser are you using?\r\n\r\nChrome\r\n\r\n### What operating system are you using?\r\n\r\nmacOS\r\n\r\n### How are you deploying your application?\r\n\r\nOther (serverless aws) \r\n\r\n### Describe the Bug\r\n\r\nWhen specifying an asset prefix, images do not respect it.\r\n\r\n```\r\n assetPrefix: isProd ? '/static/web-app/' : '',\r\n```\r\n\r\nimages still emit paths like `_next/` instead of `/static/web-app/_next` \r\n\r\n### Expected Behavior\r\n\r\nAsset prefixes should be added to image paths. \r\n\r\nI've been able to fix it with the following PR https://github.com/vercel/next.js/pull/28306\r\n\r\n### To Reproduce\r\n\r\nTry adding an asset prefix via next config and check the image paths that are emitted. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28288","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28288/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28288/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28288/events","html_url":"https://github.com/vercel/next.js/issues/28288","id":974484137,"node_id":"MDU6SXNzdWU5NzQ0ODQxMzc=","number":28288,"title":"import Head from 'next/document' causing heap out of memory","user":{"login":"dotsinspace","id":76559517,"node_id":"MDQ6VXNlcjc2NTU5NTE3","avatar_url":"https://avatars.githubusercontent.com/u/76559517?v=4","gravatar_id":"","url":"https://api.github.com/users/dotsinspace","html_url":"https://github.com/dotsinspace","followers_url":"https://api.github.com/users/dotsinspace/followers","following_url":"https://api.github.com/users/dotsinspace/following{/other_user}","gists_url":"https://api.github.com/users/dotsinspace/gists{/gist_id}","starred_url":"https://api.github.com/users/dotsinspace/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dotsinspace/subscriptions","organizations_url":"https://api.github.com/users/dotsinspace/orgs","repos_url":"https://api.github.com/users/dotsinspace/repos","events_url":"https://api.github.com/users/dotsinspace/events{/privacy}","received_events_url":"https://api.github.com/users/dotsinspace/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-08-19T09:54:06Z","updated_at":"2021-08-21T01:33:43Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\n\n11.1.1-canary.11\n\n### What version of Node.js are you using?\n\n14.15.3\n\n### What browser are you using?\n\nBrave\n\n### What operating system are you using?\n\nLinux, Kali\n\n### How are you deploying your application?\n\nVercel\n\n### Describe the Bug\n\nUse following import causes heap out of memory.\r\n\r\n# _document.js\r\n```\r\nimport Document, { Html, Main, Head, NextScript } from 'next/document' // Npm: next.js library.\r\n```\r\n\r\nBut following works.\r\n```\r\nimport Head from 'next/head'\r\n```\r\n\r\n#_document.js\r\n```\r\n/*\r\n * IMPORTS\r\n */\r\nimport React from 'react' // Npm: react.js library.\r\nimport Head from 'next/head' // Npm: next.js head library.\r\nimport Document, { Html, Main, NextScript } from 'next/document' // Npm: next.js library.\r\nimport Manifest from 'next-manifest/manifest' // Npm: next.js manifest handler.\r\nimport { ServerStyleSheet } from 'styled-components' // Npm: styled component library.\r\n\r\n\r\n/*\r\n * OBJECTS\r\n */\r\nclass MyDocument extends Document {\r\n  // GetInitialProps for getting initial props.\r\n  static async getInitialProps(__ctx) {\r\n    // Const assignment.\r\n    const _sheet = new ServerStyleSheet()\r\n    const _originalRenderPage = __ctx.renderPage\r\n    const _initialProps = await Document.getInitialProps(__ctx)\r\n\r\n    // Load all styles from application.\r\n    __ctx.renderPage = () =>\r\n      _originalRenderPage({\r\n        'enhanceApp': App => props =>\r\n          _sheet.collectStyles(<App {...props} />)\r\n      })\r\n\r\n    // Return component.\r\n    return {\r\n      ..._initialProps,\r\n      'styles': (\r\n        <Html>\r\n          <Head>\r\n            <Manifest href='static/manifest.json'/>\r\n            <link href='https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700;800;900&display=swap' rel='stylesheet' />\r\n            <title />\r\n          </Head>\r\n          {_initialProps.styles}\r\n          {_sheet.getStyleElement()}\r\n          <Main />\r\n          <NextScript />\r\n        </Html>\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\n\r\n/*\r\n * EXPORTS\r\n */\r\nexport default MyDocument\r\n\r\n```\n\n### Expected Behavior\n\nimporting Head from 'next/document' should not cause heap out of memory.\n\n### To Reproduce\n\nHow to reproduce following issue is out of my context. because this issue is caused by next","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28277","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28277/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28277/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28277/events","html_url":"https://github.com/vercel/next.js/pull/28277","id":974220943,"node_id":"MDExOlB1bGxSZXF1ZXN0NzE1NTU2OTUz","number":28277,"title":"fix for issue #14434 whitespacing in error pop up","user":{"login":"DiKwickley","id":31622972,"node_id":"MDQ6VXNlcjMxNjIyOTcy","avatar_url":"https://avatars.githubusercontent.com/u/31622972?v=4","gravatar_id":"","url":"https://api.github.com/users/DiKwickley","html_url":"https://github.com/DiKwickley","followers_url":"https://api.github.com/users/DiKwickley/followers","following_url":"https://api.github.com/users/DiKwickley/following{/other_user}","gists_url":"https://api.github.com/users/DiKwickley/gists{/gist_id}","starred_url":"https://api.github.com/users/DiKwickley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DiKwickley/subscriptions","organizations_url":"https://api.github.com/users/DiKwickley/orgs","repos_url":"https://api.github.com/users/DiKwickley/repos","events_url":"https://api.github.com/users/DiKwickley/events{/privacy}","received_events_url":"https://api.github.com/users/DiKwickley/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2021-08-19T03:09:38Z","updated_at":"2021-09-02T08:52:40Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28277","html_url":"https://github.com/vercel/next.js/pull/28277","diff_url":"https://github.com/vercel/next.js/pull/28277.diff","patch_url":"https://github.com/vercel/next.js/pull/28277.patch"},"body":"\r\n## Bug\r\n\r\n- [x] Related issues linked using `fixes #number`\r\n\r\nfixes #14434 \r\n\r\nBefore\r\n![image](https://user-images.githubusercontent.com/31622972/130001431-392efc66-69b3-47b5-802a-251a545983fd.png)\r\n\r\nAfter\r\n![image](https://user-images.githubusercontent.com/31622972/130001455-f553c977-c64b-43da-8e27-b513c6ea4179.png)\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28271","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28271/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28271/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28271/events","html_url":"https://github.com/vercel/next.js/issues/28271","id":974132975,"node_id":"MDU6SXNzdWU5NzQxMzI5NzU=","number":28271,"title":"Next 11.1 site deployed on Vercel shows empty containers on Safari initial load","user":{"login":"riceboyler","id":2243596,"node_id":"MDQ6VXNlcjIyNDM1OTY=","avatar_url":"https://avatars.githubusercontent.com/u/2243596?v=4","gravatar_id":"","url":"https://api.github.com/users/riceboyler","html_url":"https://github.com/riceboyler","followers_url":"https://api.github.com/users/riceboyler/followers","following_url":"https://api.github.com/users/riceboyler/following{/other_user}","gists_url":"https://api.github.com/users/riceboyler/gists{/gist_id}","starred_url":"https://api.github.com/users/riceboyler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/riceboyler/subscriptions","organizations_url":"https://api.github.com/users/riceboyler/orgs","repos_url":"https://api.github.com/users/riceboyler/repos","events_url":"https://api.github.com/users/riceboyler/events{/privacy}","received_events_url":"https://api.github.com/users/riceboyler/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-18T23:33:53Z","updated_at":"2021-08-18T23:33:53Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\n\n11.1.0\n\n### What version of Node.js are you using?\n\n14.16.1\n\n### What browser are you using?\n\nSafari 14\n\n### What operating system are you using?\n\nmacOS\n\n### How are you deploying your application?\n\nVercel\n\n### Describe the Bug\n\nOn the first page load of https://chatbooks.com in Safari (both on macOS and on iOS devices (tried on iPad, iPhone, iPad Pro), and ONLY the first page load, the page is rendered with empty containers.\r\n\r\n![image](https://user-images.githubusercontent.com/2243596/129984997-3b9715c4-76fd-45fb-8130-d312e1c404e8.png)\r\n\r\nLooking at the Dev Tools, all of the HTML elements are showing up, including the text/images that should be populating those boxes (the pink bar at the bottom is a GDPR banner, for instance), and all of the elements are interactive. If you hover over a navbar link, the highlight will show and if you click on it, the animation of a panel with a drop shadow is visible, but that panel has no text or images in it.\r\n\r\nThis ONLY happens on the first load with a clean Browser History. As soon as the page is reloaded once, it loads perfectly every time until the history is cleared (cache, etc.). This also only happens in Safari. Chrome, Firefox, Edge, Opera even all render perfectly. Even IE renders it ugly, but at least the contents are there...\n\n### Expected Behavior\n\nThe contents of the page should be displayed on first load.\n\n### To Reproduce\n\nHaving never visited https://chatbooks.com, visit in a Safari browser. It's not 100% reproducible, but at least 75% of the time it will load with no contents. Refresh the browser to see the contents of the page load properly.\r\n\r\nTo eliminate domain issues, you can also visit https://chatbooks.vercel.app and the same thing happens.","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28255","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28255/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28255/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28255/events","html_url":"https://github.com/vercel/next.js/issues/28255","id":973604255,"node_id":"MDU6SXNzdWU5NzM2MDQyNTU=","number":28255,"title":"Component gives Module parse failed:  Unexpected token","user":{"login":"skar07","id":39200016,"node_id":"MDQ6VXNlcjM5MjAwMDE2","avatar_url":"https://avatars.githubusercontent.com/u/39200016?v=4","gravatar_id":"","url":"https://api.github.com/users/skar07","html_url":"https://github.com/skar07","followers_url":"https://api.github.com/users/skar07/followers","following_url":"https://api.github.com/users/skar07/following{/other_user}","gists_url":"https://api.github.com/users/skar07/gists{/gist_id}","starred_url":"https://api.github.com/users/skar07/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/skar07/subscriptions","organizations_url":"https://api.github.com/users/skar07/orgs","repos_url":"https://api.github.com/users/skar07/repos","events_url":"https://api.github.com/users/skar07/events{/privacy}","received_events_url":"https://api.github.com/users/skar07/received_events","type":"User","site_admin":false},"labels":[{"id":482888042,"node_id":"MDU6TGFiZWw0ODI4ODgwNDI=","url":"https://api.github.com/repos/vercel/next.js/labels/please%20add%20a%20complete%20reproduction","name":"please add a complete reproduction","color":"fbca04","default":false,"description":""},{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-08-18T12:18:47Z","updated_at":"2021-08-18T13:05:46Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\r\n\r\n11.1.0\r\n\r\n### What version of Node.js are you using?\r\n\r\n14.17.3\r\n\r\n### What browser are you using?\r\n\r\nOpera\r\n\r\n### What operating system are you using?\r\n\r\nWindows\r\n\r\n### How are you deploying your application?\r\n\r\nnext dev\r\n\r\n### Describe the Bug\r\n\r\nI had created a React component file within the component directory and had it run successfully. The component file on being deployed gives the following error all of a sudden,\r\n\r\nThings that have been tried:\r\nChanged directories\r\nChanged names \r\nChanged function name\r\nRe-added file\r\n\r\n```error - ../components/CallToAction.tsx\r\nModule parse failed: Unexpected token (2:29)\r\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\r\n| import React from 'react';\r\n export const CallToAction = (): React.ReactElement => {\r\n|       return (\r\n|               <div className='bg-gradient-to-r from-green-400 via-blue-500 to-blue-500 animate-gradient-x transform -skew-y-3 md:mr-8 px-8 py-12 w-full mt-8\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n### Expected Behavior\r\n\r\nFor the component to be rendered, and not give out an error regarding the loader.\r\n\r\n### To Reproduce\r\n\r\nOccurs on deploying the following code, regardless of  the file destination:\r\n``` import React from 'react';\r\nexport const CallToAction = (): React.ReactElement => {\r\n\treturn (\r\n\t\t<div className='bg-gradient-to-r from-green-400 via-blue-500 to-blue-500 animate-gradient-x transform -skew-y-3 md:mr-8 px-8 py-12 w-full mt-8'>\r\n\t\t\t<div className='flex flex-col md:flex-row justify-between max-w-3xl m-auto transform skew-y-3'>\r\n\t\t\t\t<div className='text-lg md:text-2xl font-semibold cursor-default md:mr-12 text-white self-end pb-2'>\r\n\t\t\t\t\tSign up with us to experience our service.\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='flex justify-center'>\r\n\t\t\t\t\t<button className='px-6 py-3 rounded bg-blue-600 hover:bg-blue-800 transition text-white m-2'>Sign Up &rarr;</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}````\r\n\r\nnext.config.js:\r\n``` module. exports = {\r\n}\r\n```\r\nReact version:  17.0.2\r\nTypescript: 4.3.5\r\ntailwindcss:  2.2.7\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28235","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28235/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28235/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28235/events","html_url":"https://github.com/vercel/next.js/issues/28235","id":973380144,"node_id":"MDU6SXNzdWU5NzMzODAxNDQ=","number":28235,"title":"Allocation failed - JavaScript heap out of memory","user":{"login":"devv-aman","id":18486164,"node_id":"MDQ6VXNlcjE4NDg2MTY0","avatar_url":"https://avatars.githubusercontent.com/u/18486164?v=4","gravatar_id":"","url":"https://api.github.com/users/devv-aman","html_url":"https://github.com/devv-aman","followers_url":"https://api.github.com/users/devv-aman/followers","following_url":"https://api.github.com/users/devv-aman/following{/other_user}","gists_url":"https://api.github.com/users/devv-aman/gists{/gist_id}","starred_url":"https://api.github.com/users/devv-aman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devv-aman/subscriptions","organizations_url":"https://api.github.com/users/devv-aman/orgs","repos_url":"https://api.github.com/users/devv-aman/repos","events_url":"https://api.github.com/users/devv-aman/events{/privacy}","received_events_url":"https://api.github.com/users/devv-aman/received_events","type":"User","site_admin":false},"labels":[{"id":482888042,"node_id":"MDU6TGFiZWw0ODI4ODgwNDI=","url":"https://api.github.com/repos/vercel/next.js/labels/please%20add%20a%20complete%20reproduction","name":"please add a complete reproduction","color":"fbca04","default":false,"description":""},{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2021-08-18T07:52:28Z","updated_at":"2021-08-27T19:34:15Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\n\n10.0.6\n\n### What version of Node.js are you using?\n\n12.0.0\n\n### What browser are you using?\n\nChrome\n\n### What operating system are you using?\n\nlinux\n\n### How are you deploying your application?\n\nnext start\n\n### Describe the Bug\n\nWe're building our next project on AWS ECS with build CPU size of 3GB\r\nThings have been running smooth, although since last deploy suddenly getting Out of Memory. We're not expecting this to go out of memory on a 3GB memory CPU\r\n\r\n<img width=\"1424\" alt=\"image\" src=\"https://user-images.githubusercontent.com/18486164/129851202-c208e7aa-250c-49fc-bb3d-1712f47cf77c.png\">\r\n\r\nThis behaviour occured after using react-timezone-select with react-transpile-modules\r\n\r\n```\r\nconst withTM = require('next-transpile-modules')(['react-timezone-select']);\r\n````\r\n\r\n\r\nWe've also tried resolveSymlinks true after reading [issuecomment-719449598](https://github.com/vercel/next.js/issues/7929#issuecomment-719449598), but even after that, the build is failing\r\n```\r\nconst withTM = require('next-transpile-modules')(['react-timezone-select'], {\r\n  resolveSymlinks: true\r\n});\r\n```\r\n\r\n\n\n### Expected Behavior\n\nBuild should not fail\n\n### To Reproduce\n\nnext build","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28231","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28231/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28231/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28231/events","html_url":"https://github.com/vercel/next.js/issues/28231","id":973351722,"node_id":"MDU6SXNzdWU5NzMzNTE3MjI=","number":28231,"title":"Trying to redirect with a 'query' type - does not remove the querystring from the redirect.","user":{"login":"ned-kelly","id":17648709,"node_id":"MDQ6VXNlcjE3NjQ4NzA5","avatar_url":"https://avatars.githubusercontent.com/u/17648709?v=4","gravatar_id":"","url":"https://api.github.com/users/ned-kelly","html_url":"https://github.com/ned-kelly","followers_url":"https://api.github.com/users/ned-kelly/followers","following_url":"https://api.github.com/users/ned-kelly/following{/other_user}","gists_url":"https://api.github.com/users/ned-kelly/gists{/gist_id}","starred_url":"https://api.github.com/users/ned-kelly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ned-kelly/subscriptions","organizations_url":"https://api.github.com/users/ned-kelly/orgs","repos_url":"https://api.github.com/users/ned-kelly/repos","events_url":"https://api.github.com/users/ned-kelly/events{/privacy}","received_events_url":"https://api.github.com/users/ned-kelly/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-08-18T07:13:25Z","updated_at":"2021-08-24T11:11:49Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\n\n10.2.3\n\n### What version of Node.js are you using?\n\n12.14.0\n\n### What browser are you using?\n\nChrome\n\n### What operating system are you using?\n\nOSX\n\n### How are you deploying your application?\n\nserverless-next.js -- https://github.com/serverless-nextjs/serverless-next.js\n\n### Describe the Bug\n\nSo I'm having issues redirecting from a site with a query-string - to a slug that uses a 'folder' type structure...\n\n### Expected Behavior\n\nThe expected behaviour is that URL's such as\r\nsite.com/page.html?id=SomePage\r\n\r\nShould be able to redirect to a structure like:\r\nsite.com/page/SomePage\r\n\n\n### To Reproduce\n\n**Example config in next.config.js file:**\r\n\r\n```{\r\n  source: '/page.html',\r\n  has: [\r\n    {\r\n      type: 'query',\r\n      key: 'id',\r\n    },\r\n  ],\r\n  permanent: true,\r\n  destination: '/page/:id*',\r\n}```\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28229","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28229/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28229/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28229/events","html_url":"https://github.com/vercel/next.js/issues/28229","id":973284990,"node_id":"MDU6SXNzdWU5NzMyODQ5OTA=","number":28229,"title":"Dev server no longer working with Nginx reverse proxy","user":{"login":"eahmann","id":55002808,"node_id":"MDQ6VXNlcjU1MDAyODA4","avatar_url":"https://avatars.githubusercontent.com/u/55002808?v=4","gravatar_id":"","url":"https://api.github.com/users/eahmann","html_url":"https://github.com/eahmann","followers_url":"https://api.github.com/users/eahmann/followers","following_url":"https://api.github.com/users/eahmann/following{/other_user}","gists_url":"https://api.github.com/users/eahmann/gists{/gist_id}","starred_url":"https://api.github.com/users/eahmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eahmann/subscriptions","organizations_url":"https://api.github.com/users/eahmann/orgs","repos_url":"https://api.github.com/users/eahmann/repos","events_url":"https://api.github.com/users/eahmann/events{/privacy}","received_events_url":"https://api.github.com/users/eahmann/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2021-08-18T05:21:51Z","updated_at":"2021-08-18T19:39:52Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\r\n\r\n11.1.1-canary.10\r\n\r\n### What version of Node.js are you using?\r\n\r\n12.0.0\r\n\r\n### What browser are you using?\r\n\r\nChrome\r\n\r\n### What operating system are you using?\r\n\r\nWindows 10 with WSL2\r\n\r\n### How are you deploying your application?\r\n\r\nnext dev\r\n\r\n### Describe the Bug\r\n\r\nMy dev environment is setup with a Docker container with Nginx running a reverse proxy to port 3000.  With versions `11.0.2-canary.17` and above I am getting 502 Bad Gateway. With versions `11.0.2-canary.16` and below, everything is working as expected with the Next.js app (I used create-next-app) rendering through the reverse proxy. This is with running the dev server (`next dev`) \r\n\r\nIt seems that the bug was introduced in `11.0.2-canary.17`. The dev server through nginx is working fine prior to this version. \r\n\r\n### Expected Behavior\r\n\r\nNest.js dev server to load through reverse proxy\r\n\r\n### To Reproduce\r\n\r\nYou will need a way to use docker-compose. I am using Docker Desktop with WSL2 backend. \r\n\r\nCreate the following files for minimal reproduction: \r\n\r\n`docker-compose.yml`\r\n```\r\nversion: \"3.1\"\r\nservices:\r\n  web:\r\n    image: nginx:alpine\r\n    ports:\r\n      - \"8081:80\"\r\n    volumes:\r\n      - ./nginx.conf:/etc/nginx/nginx.conf\r\n```\r\n\r\n`nginx.conf`\r\n```\r\nevents {\r\n  worker_connections  1024;\r\n}\r\n\r\nhttp {\r\n    server {\r\n        listen 80 default_server;\r\n        listen [::]:80 default_server;\r\n        proxy_read_timeout 120s;\r\n\r\n        server_name localhost;\r\n\r\n        root /app/src;\r\n        \r\n        location / {\r\n            proxy_pass http://host.docker.internal:3000;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nStart nginx with `docker-compose up`\r\nStart simple Next.Js app on port 3000. I used basic `create-next-app`\r\n\r\nObserve that localhost:3000 works. And that when trying to access localhost:8081 (our reverse proxy) you receive nginx error page `502 Bad Gateway`","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28228","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28228/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28228/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28228/events","html_url":"https://github.com/vercel/next.js/pull/28228","id":973267739,"node_id":"MDExOlB1bGxSZXF1ZXN0NzE0NzM4MTAz","number":28228,"title":"Changing GitHub Actions cache documentation","user":{"login":"chrispat","id":185122,"node_id":"MDQ6VXNlcjE4NTEyMg==","avatar_url":"https://avatars.githubusercontent.com/u/185122?v=4","gravatar_id":"","url":"https://api.github.com/users/chrispat","html_url":"https://github.com/chrispat","followers_url":"https://api.github.com/users/chrispat/followers","following_url":"https://api.github.com/users/chrispat/following{/other_user}","gists_url":"https://api.github.com/users/chrispat/gists{/gist_id}","starred_url":"https://api.github.com/users/chrispat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrispat/subscriptions","organizations_url":"https://api.github.com/users/chrispat/orgs","repos_url":"https://api.github.com/users/chrispat/repos","events_url":"https://api.github.com/users/chrispat/events{/privacy}","received_events_url":"https://api.github.com/users/chrispat/received_events","type":"User","site_admin":true},"labels":[{"id":1124940486,"node_id":"MDU6TGFiZWwxMTI0OTQwNDg2","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20documentation","name":"type: documentation","color":"a3f7d0","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-18T04:42:08Z","updated_at":"2021-08-26T10:59:17Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28228","html_url":"https://github.com/vercel/next.js/pull/28228","diff_url":"https://github.com/vercel/next.js/pull/28228.diff","patch_url":"https://github.com/vercel/next.js/pull/28228.patch"},"body":"<!--\r\nThanks for opening a PR! Your contribution is much appreciated.\r\nIn order to make sure your PR is handled as smoothly as possible we request that you follow the checklist sections below.\r\nChoose the right checklist for the change that you're making:\r\n-->\r\n\r\n## Bug\r\n\r\n- [ ] Related issues linked using `fixes #number`\r\n- [ ] Integration tests added\r\n- [ ] Errors have helpful link attached, see `contributing.md`\r\n\r\n## Feature\r\n\r\n- [ ] Implements an existing feature request or RFC. Make sure the feature request has been accepted for implementation before opening a PR.\r\n- [ ] Related issues linked using `fixes #number`\r\n- [ ] Integration tests added\r\n- [ ] Documentation added\r\n- [ ] Telemetry added. In case of a feature if it's used or not.\r\n- [ ] Errors have helpful link attached, see `contributing.md`\r\n\r\n## Documentation / Examples\r\n\r\n- [ ] Make sure the linting passes\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28215","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28215/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28215/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28215/events","html_url":"https://github.com/vercel/next.js/issues/28215","id":973047391,"node_id":"MDU6SXNzdWU5NzMwNDczOTE=","number":28215,"title":"Unnecessary warnings when using custom image loader with size buckets","user":{"login":"ericmatthys","id":1154586,"node_id":"MDQ6VXNlcjExNTQ1ODY=","avatar_url":"https://avatars.githubusercontent.com/u/1154586?v=4","gravatar_id":"","url":"https://api.github.com/users/ericmatthys","html_url":"https://github.com/ericmatthys","followers_url":"https://api.github.com/users/ericmatthys/followers","following_url":"https://api.github.com/users/ericmatthys/following{/other_user}","gists_url":"https://api.github.com/users/ericmatthys/gists{/gist_id}","starred_url":"https://api.github.com/users/ericmatthys/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ericmatthys/subscriptions","organizations_url":"https://api.github.com/users/ericmatthys/orgs","repos_url":"https://api.github.com/users/ericmatthys/repos","events_url":"https://api.github.com/users/ericmatthys/events{/privacy}","received_events_url":"https://api.github.com/users/ericmatthys/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-17T20:39:04Z","updated_at":"2021-08-17T20:39:04Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\n\n11.1.0\n\n### What version of Node.js are you using?\n\n14.17.3\n\n### What browser are you using?\n\nChrome\n\n### What operating system are you using?\n\nmacOS\n\n### How are you deploying your application?\n\nVercel\n\n### Describe the Bug\n\nAfter upgrading Next.js, we are seeing lots of errors being printed about a missing width, referencing this page: https://nextjs.org/docs/messages/next-image-missing-loader-width. This error makes the assumption that the loader cannot be resizing the image properly without the width value as a parameter. We have a custom image loader that relies on `size` and `scale` parameters to bucket image requests into several predefined sizes. Based on the needed width, we'll compute the appropriate `size` and `scale` and only those parameters are passed to the image service, like `size=medium-360&scale=1`. There doesn't seem to be any way to silence this error, even though it is working as expected and the images are being optimized within their appropriate buckets.\n\n### Expected Behavior\n\nNo error, or at least a way to assert that we are using our custom loader in an expected way.\n\n### To Reproduce\n\n```jsx\r\nfunction transcodeImageImageLoader({ src, width }: { src: string; width: number; }): string {\r\n  const [size, scale] = getSizeForWidth(width);\r\n\r\n  return `https://example.com/${src}?size=${size}&scale=${scale}`;\r\n}\r\n\r\nexport default function TranscodeImage(props: ImageProps): ReactElement {\r\n  return <Image {...props} loader={transcodeImageImageLoader} />;\r\n}\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28203","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28203/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28203/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28203/events","html_url":"https://github.com/vercel/next.js/pull/28203","id":972814108,"node_id":"MDExOlB1bGxSZXF1ZXN0NzE0MzU0ODMx","number":28203,"title":"24422-notfound-error, export error fixed","user":{"login":"berkelmas","id":42638691,"node_id":"MDQ6VXNlcjQyNjM4Njkx","avatar_url":"https://avatars.githubusercontent.com/u/42638691?v=4","gravatar_id":"","url":"https://api.github.com/users/berkelmas","html_url":"https://github.com/berkelmas","followers_url":"https://api.github.com/users/berkelmas/followers","following_url":"https://api.github.com/users/berkelmas/following{/other_user}","gists_url":"https://api.github.com/users/berkelmas/gists{/gist_id}","starred_url":"https://api.github.com/users/berkelmas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/berkelmas/subscriptions","organizations_url":"https://api.github.com/users/berkelmas/orgs","repos_url":"https://api.github.com/users/berkelmas/repos","events_url":"https://api.github.com/users/berkelmas/events{/privacy}","received_events_url":"https://api.github.com/users/berkelmas/received_events","type":"User","site_admin":false},"labels":[{"id":1965625097,"node_id":"MDU6TGFiZWwxOTY1NjI1MDk3","url":"https://api.github.com/repos/vercel/next.js/labels/type:%20next","name":"type: next","color":"f6aff7","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-08-17T15:29:39Z","updated_at":"2021-08-17T21:30:21Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/vercel/next.js/pulls/28203","html_url":"https://github.com/vercel/next.js/pull/28203","diff_url":"https://github.com/vercel/next.js/pull/28203.diff","patch_url":"https://github.com/vercel/next.js/pull/28203.patch"},"body":"## Bug\r\nFix for this bug:\r\nhttps://github.com/vercel/next.js/issues/24422\r\n\r\n- [ ] Related issues linked using `fixes #number`\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28198","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28198/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28198/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28198/events","html_url":"https://github.com/vercel/next.js/issues/28198","id":972627377,"node_id":"MDU6SXNzdWU5NzI2MjczNzc=","number":28198,"title":"SSR generates wrong css with Material UI, webpack5","user":{"login":"qwertyforce","id":44163887,"node_id":"MDQ6VXNlcjQ0MTYzODg3","avatar_url":"https://avatars.githubusercontent.com/u/44163887?v=4","gravatar_id":"","url":"https://api.github.com/users/qwertyforce","html_url":"https://github.com/qwertyforce","followers_url":"https://api.github.com/users/qwertyforce/followers","following_url":"https://api.github.com/users/qwertyforce/following{/other_user}","gists_url":"https://api.github.com/users/qwertyforce/gists{/gist_id}","starred_url":"https://api.github.com/users/qwertyforce/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qwertyforce/subscriptions","organizations_url":"https://api.github.com/users/qwertyforce/orgs","repos_url":"https://api.github.com/users/qwertyforce/repos","events_url":"https://api.github.com/users/qwertyforce/events{/privacy}","received_events_url":"https://api.github.com/users/qwertyforce/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-08-17T12:18:11Z","updated_at":"2021-09-01T09:41:16Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"### What version of Next.js are you using?\n\n@latest\n\n### What version of Node.js are you using?\n\nv15.8.0\n\n### What browser are you using?\n\nChrome\n\n### What operating system are you using?\n\nWindows\n\n### How are you deploying your application?\n\nnext start\n\n### Describe the Bug\n\nnextjs starting at v10.2.1-canary.3 generates wrong css for following example.\r\n```ts\r\nimport Button from '@material-ui/core/Button'\r\nimport { IconButton } from '@material-ui/core'\r\n\r\nexport default function Home() {\r\n  return (\r\n    <div>\r\n    <IconButton color=\"inherit\" href={`text`}></IconButton>\r\n    <Button variant=\"contained\" color=\"primary\">Text</Button>\r\n  </div>)\r\n}\r\n\r\n```\r\n![image](https://user-images.githubusercontent.com/44163887/129722501-6d31401e-dad6-48af-b9ee-c11616af0ace.png)\r\n(Broken css on button)\r\n\r\nnextjs starting at v10.2.1-canary.2 and below works great, webpack5 enabled. Bug doesn't occur when webpack5 is disabled, therefore I blame webpack5 related commits from here https://github.com/vercel/next.js/releases/tag/v10.2.1-canary.3\n\n### Expected Behavior\n\nThe button should look like this\r\n![image](https://user-images.githubusercontent.com/44163887/129722595-bda3884a-141a-4732-8361-93f31cd86f44.png)\n\n### To Reproduce\n\nhttps://github.com/qwertyforce/ssr_bug_example","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28195","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28195/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28195/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28195/events","html_url":"https://github.com/vercel/next.js/issues/28195","id":972595326,"node_id":"MDU6SXNzdWU5NzI1OTUzMjY=","number":28195,"title":"ISR: is navigating between pages isn't considered a new request?","user":{"login":"pranavmalvawala","id":42204892,"node_id":"MDQ6VXNlcjQyMjA0ODky","avatar_url":"https://avatars.githubusercontent.com/u/42204892?v=4","gravatar_id":"","url":"https://api.github.com/users/pranavmalvawala","html_url":"https://github.com/pranavmalvawala","followers_url":"https://api.github.com/users/pranavmalvawala/followers","following_url":"https://api.github.com/users/pranavmalvawala/following{/other_user}","gists_url":"https://api.github.com/users/pranavmalvawala/gists{/gist_id}","starred_url":"https://api.github.com/users/pranavmalvawala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pranavmalvawala/subscriptions","organizations_url":"https://api.github.com/users/pranavmalvawala/orgs","repos_url":"https://api.github.com/users/pranavmalvawala/repos","events_url":"https://api.github.com/users/pranavmalvawala/events{/privacy}","received_events_url":"https://api.github.com/users/pranavmalvawala/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-17T11:41:12Z","updated_at":"2021-08-17T11:41:12Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\n\n11.0.1\n\n### What version of Node.js are you using?\n\n14.17.0\n\n### What browser are you using?\n\nChrome\n\n### What operating system are you using?\n\nWindows\n\n### How are you deploying your application?\n\nVercel\n\n### Describe the Bug\n\nI have an app with ISR and it appears simply navigating to a page (multiple times) is not enough to view updates. I have to actually land on that url or refresh the page. It feels navigating is not enough to even trigger ISR. So can I know is this the ideal / expected behavior? or are there any chances for including this in future?\n\n### Expected Behavior\n\nI think it can be over demanding to ask but I expect the page to revalidate on navigating to the page and also have it be in an updated state in case the user accesses the same page again after revalidation time has passed and regeneration is finished.\n\n### To Reproduce\n\n1. Have 2 pages with ISR (data must change for both pages) and a link to navigate between them\r\n2. Change data for both pages\r\n3. Navigate between pages and check if ISR gets triggered\r\n3. wait for time > revalidate time and then hit refresh (ISR must have triggered just now so pages must still have stale data, check both pages using navigation)\r\n4. ISR was triggered in last step so a refresh again should do the trick and new data can be filled in pages.\r\n\r\nI was under the impression navigating to a page would trigger ISR for it and later on when I go back to that page again, it would have latest data. The confusion began for me with word \"request\" in doc.","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28193","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28193/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28193/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28193/events","html_url":"https://github.com/vercel/next.js/issues/28193","id":972554417,"node_id":"MDU6SXNzdWU5NzI1NTQ0MTc=","number":28193,"title":"React does not recognize the `blurDataURL` prop on a DOM element.","user":{"login":"scurrilus-funke","id":20335598,"node_id":"MDQ6VXNlcjIwMzM1NTk4","avatar_url":"https://avatars.githubusercontent.com/u/20335598?v=4","gravatar_id":"","url":"https://api.github.com/users/scurrilus-funke","html_url":"https://github.com/scurrilus-funke","followers_url":"https://api.github.com/users/scurrilus-funke/followers","following_url":"https://api.github.com/users/scurrilus-funke/following{/other_user}","gists_url":"https://api.github.com/users/scurrilus-funke/gists{/gist_id}","starred_url":"https://api.github.com/users/scurrilus-funke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/scurrilus-funke/subscriptions","organizations_url":"https://api.github.com/users/scurrilus-funke/orgs","repos_url":"https://api.github.com/users/scurrilus-funke/repos","events_url":"https://api.github.com/users/scurrilus-funke/events{/privacy}","received_events_url":"https://api.github.com/users/scurrilus-funke/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-08-17T10:50:21Z","updated_at":"2021-08-21T10:55:15Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\r\n\r\n11.1.0\r\n\r\n### What version of Node.js are you using?\r\n\r\n15.5.1\r\n\r\n### What browser are you using?\r\n\r\nChrome, Safari\r\n\r\n### What operating system are you using?\r\n\r\nmacOs\r\n\r\n### How are you deploying your application?\r\n\r\nVercel, Amazon Webservice\r\n\r\n### Describe the Bug\r\n\r\n` Warning: React does not recognize the 'blurDataURL' prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `blurdataurl` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\r\n`\r\n\r\nThe implementation of Img placeholder with 'blur' and 'blurDataURL' works perfect, but by running jest Test with Img component the console outputs a warning. Write spell to lowercase breaks working functionality.\r\n\r\n### Expected Behavior\r\n\r\nRun jest test without warning.\r\n\r\n### To Reproduce\r\n\r\nTest Img component with jest.\r\n\r\n## Component\r\n\r\n`<Image\r\n            width={width}\r\n            height={height}\r\n            src={imgSrc}\r\n            alt={alt}\r\n            title={title}\r\n            sizes={sizes}\r\n            className={className}\r\n            quality={isValidSrc ? quality : 100}\r\n            priority={priority}\r\n            placeholder=\"blur\"\r\n            blurDataURL={imgSrc}\r\n            loading={loading}\r\n            layout={layout}\r\n            onError={() => setSrcType(isValidSrc ? 'ratioFallback' : 'defaultFallback')}\r\n            unoptimized={unoptimized}\r\n            data-testid='img'}\r\n        />`\r\n\r\n\r\n## Jest Test\r\n\r\n`test('Img Test', () => {\r\n    const { getByTestId, queryByTestId } = render(<Img ratio=\"16:9\" src=\"https://www.nrz.de/img.jpg\" className=\"test\" />);\r\n    expect((getByTestId('img') as HTMLImageElement).src).toBe('https://www.nrz.de/img.jpg');\r\n});`","performed_via_github_app":null},{"url":"https://api.github.com/repos/vercel/next.js/issues/28171","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/28171/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/28171/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/28171/events","html_url":"https://github.com/vercel/next.js/issues/28171","id":971831536,"node_id":"MDU6SXNzdWU5NzE4MzE1MzY=","number":28171,"title":"Next/image displays the same images twice in an infinite scroll","user":{"login":"dbaweb","id":10218039,"node_id":"MDQ6VXNlcjEwMjE4MDM5","avatar_url":"https://avatars.githubusercontent.com/u/10218039?v=4","gravatar_id":"","url":"https://api.github.com/users/dbaweb","html_url":"https://github.com/dbaweb","followers_url":"https://api.github.com/users/dbaweb/followers","following_url":"https://api.github.com/users/dbaweb/following{/other_user}","gists_url":"https://api.github.com/users/dbaweb/gists{/gist_id}","starred_url":"https://api.github.com/users/dbaweb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbaweb/subscriptions","organizations_url":"https://api.github.com/users/dbaweb/orgs","repos_url":"https://api.github.com/users/dbaweb/repos","events_url":"https://api.github.com/users/dbaweb/events{/privacy}","received_events_url":"https://api.github.com/users/dbaweb/received_events","type":"User","site_admin":false},"labels":[{"id":2471906168,"node_id":"MDU6TGFiZWwyNDcxOTA2MTY4","url":"https://api.github.com/repos/vercel/next.js/labels/template:%20bug","name":"template: bug","color":"fddf99","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-08-16T15:02:39Z","updated_at":"2021-08-19T16:21:44Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### What version of Next.js are you using?\n\n11.0.1\n\n### What version of Node.js are you using?\n\n14.16.0\n\n### What browser are you using?\n\nChrome\n\n### What operating system are you using?\n\nwindows\n\n### How are you deploying your application?\n\nN/A\n\n### Describe the Bug\n\nI have created an infinite list with cards that each contain an image but sometimes two images are the same in two different cards even though the src is correct. \r\n\r\nI don't know why, maybe the cache? \r\n\r\nIs there a solution to this problem? I tried to put a unique key to each image but that didn't solve the problem. When I use <img> it works. But I would like to understand and use next/image to take advantage of all the benefits it can offer me.\n\n### Expected Behavior\n\nView related images \n\n### To Reproduce\n\nRefer to the screenshot below to see the bug\r\n\r\n![Capture](https://user-images.githubusercontent.com/10218039/129584878-d49b14f4-a7e5-4dde-8b4d-9796d8da9c7c.PNG)\r\n\r\n![image](https://user-images.githubusercontent.com/10218039/129584256-f35462af-8f67-4539-bb60-cc16174c2f8c.png)\r\n","performed_via_github_app":null}],"isExecutionSuccess":true,"request":{"headers":{},"httpMethod":"GET","url":"https://api.github.com/repos/vercel/next.js/issues?filter=all&per_page=100"}}}